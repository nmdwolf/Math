\section{Space of integrable functions}
\subsection{Distance}\index{distance}

    To define a distance between functions, a notion of the length of a function is introduced first. Normally this would not be a problem, one could use the integral of a function to define a norm. However, the fact that two functions differing on a null set have the same integral carries problems with it: a nonzero function could have a zero length. To avoid this issue one quotients out these degenerate functions::
    \newdef{$L^1$-space}{
        \nomenclature[S_L1]{$L^1(\Omega)$}{Space of integrable functions on $\Omega$.}
        Define the set of equivalence classes $L^1 = \mathcal{L}^1_{/\equiv}$ by introducing the following equivalence relation: $f\equiv g$ if and only if $f=g$ a.e.
    }
    \begin{property}
        $L^1$ is a Banach space \ref{linalgebra:banach_space}. The norm on $L^1$ is given by
        \begin{gather}
            \label{lebesgue:L1_norm}
            \|f\|_1 := \int|f|\,d\mu.
        \end{gather}
    \end{property}

\subsection{Hilbert space \texorpdfstring{$L^2$}{L2}}\label{lebesgue:section:hilbert_space}

    \begin{property}\label{lebesgue:L2_hilbert_space}
        $L^2$ is a Hilbert space \ref{hilbert:hilbert_space}. The norm on $L^2$ is given by
        \begin{gather}
            \label{lebesgue:L2_norm}
            \|f\|_2 := \left(\int|f|^2\,d\mu\right)^{\frac{1}{2}}.
        \end{gather}
        This norm is induced by the following inner product:
        \begin{gather}
            \label{lebesgue:L2_inner_product}
            \langle f|g \rangle := \int\overline{f}g\,d\mu.
        \end{gather}
    \end{property}

    \begin{formula}[Cauchy-Schwarz inequality]\index{Cauchy-Schwarz}\label{lebesgue:schwarz_inequality}
        Let $f,g\in L^2(X,\mathbb{C})$. We have that $fg\in L^1(X,\mathbb{C})$ and
        \begin{gather}
        \left|\int\overline{f}g\,d\mu\right|\leq\|fg\|_1\leq\|f\|_2\|g\|_2.
        \end{gather}
    \end{formula}
    \sremark{This follows immediately from Formula \ref{lebesgue:holders_inequality}.}

\subsection{\texorpdfstring{$L^p$}{Lp}-spaces}

    Generalizing the previous two function classes leads to the notion of $L^p$-spaces with the following norm:
    \begin{formula}
        For all $1\leq p\leq+\infty$, $L^p(X)$ is a Banach space when equipped with the following norm:
        \begin{gather}
            \label{lebesgue:Lp_norm}
            \|f\|_p := \left(\int_X |f|^p\,d\mu\right)^{\frac{1}{p}}.
        \end{gather}
    \end{formula}
    \remark{Note that $L^2$ is the only $L^p$-space that is also a Hilbert space. The other $L^p$-spaces do not have a norm induced by an inner product.}

    \newformula{H\"{o}lder's inequality}{\index{H\"older!inequality}\index{H\"older!conjugates}\label{lebesgue:holders_inequality}
        Let $\frac{1}{p} + \frac{1}{q} = 1$ with $p\geq1$ (numbers satisfying this equality are called \textbf{H\"older conjugates}). For every $f\in L^p$ and $g\in L^q$ one has that
        \begin{gather}
            \|fg\|_1\leq\|f\|_p\|g\|_q.
        \end{gather}
        This also implies that $fg\in L^1$.
    }
    \newformula{Minkowski's inequality}{\index{Minkowski!inequality}\label{lebesgue:minkowskis_inequality}
        For every $p\geq1$ and $f,g\in L^p$ one has that
        \begin{gather}
            \|f+g\|_p\leq\|f\|_p + \|g\|_p.
        \end{gather}
        This also implies that $f+g\in L^p$.
    }

    \begin{property}[Inclusions]
        $L^1(X)\cap L^\infty(X)\subset L^2(X)$. Moreover, if $X$ has finite measure, then $L^q(X)\subset L^p(X)$ whenever $1\leq p\leq q<+\infty$.
    \end{property}

    Using the H\"older inequality one can prove the following property:
    \begin{property}\label{lebesgue:Lp_duals}
        Let $p,q$ be H\"older conjugates. The spaces $L^p$ and $L^q$ are topological duals, i.e. every function $f\in L^p$ can be identified (one-to-one) with a continuous functional on $L^q$.
    \end{property}

    \newdef{Essentially bounded function}{
        Let $f$ be a measurable function satisfying $\esssup|f|<+\infty$. The function $f$ is said to be essentially bounded and the set of all such functions is denoted by $L^\infty$ (again after quotienting out all functions that are equal a.e.).
    }

    \begin{formula}\index{supremum}
        A norm on $L^\infty$ is given by
        \begin{gather}
            \|f\|_\infty := \esssup|f|.
        \end{gather}
        This norm is called the \textbf{supremum norm} and it induces the supremum metric \ref{topology:supremum_distance}.
    \end{formula}
    \begin{property}
        Equipped with the above norm the space $L^\infty$ becomes a Banach space.
    \end{property}

\section{Product measures}
\subsection{Real hyperspace \texorpdfstring{$\mathbb{R}^n$}{Rn}}

    The notions of intervals and lengths from the one dimensional case can be generalized to higher dimensions in the following way:
    \newdef{Hypercube}{\index{hypercube}
        Let $I_1,\ldots,I_n$ be a sequence of intervals. The hypercube spanned by them is defined as the following set:
        \begin{gather}
            \mathbf{I} := I_1\times\cdots\times I_n.
        \end{gather}
    }
    \newdef{Generalized length}{\index{volume}
        Let $\mathbf{I}$ be a hypercube induced by the set of intervals $I_1,\ldots,I_n$. The generalized length (or \textbf{volume}) of $\mathbf{I}$ is defined as
        \begin{gather}
            l(\mathbf{I}) := \prod_{i=1}^{n}l(I_i).
        \end{gather}
    }

\subsection{Construction of the product measure}

    In this section we will work with the general notation $(\Omega,\mathcal{F},P)$ to denote a measure space. The general condition for multi-dimensional Lebesgue measures is given by the following equation which should hold for all $A_1\in\mathcal{F}_1$ and $A_2\in\mathcal{F}_2$:
    \begin{gather}
        \label{lebesgue:product_measure:general_condition}
        P(A_1\times A_2) = P_1(A_1)P_2(A_2).
    \end{gather}

    \newdef{Section}{\index{section}
        Let $A=A_1\times A_2$. The following two sets are called sections:
        \begin{align*}
            A_{\omega_1} &:= \{\omega_2\in\Omega_2:(\omega_1,\omega_2)\in A\}\subset\Omega_2,\\
            A_{\omega_2} &:= \{\omega_1\in\Omega_1:(\omega_1,\omega_2)\in A\}\subset\Omega_1.
        \end{align*}
    }
    \begin{property}
        Let $\mathcal{F} = \mathcal{F}_1\times\mathcal{F}_2$. If $A\in\mathcal{F}$, then $A_{\omega_1}\in\mathcal{F}_2$ for each $\omega_1$ and $A_{\omega_2}\in\mathcal{F}_1$ for each $\omega_2$. Equivalently, the sets $\mathcal{G}_1 = \{A\in\mathcal{F}\,|\,\forall\omega_1:A_{\omega_1}\in\mathcal{F}_2\}$ and $\mathcal{G}_2 = \{A\in\mathcal{F}\,|\,\forall\omega_2: A_{\omega_2}\in\mathcal{F}_1\}$ coincide with the product $\sigma$-algebra $\mathcal{F}$.
    \end{property}

    \begin{property}
        The function $A_{\omega_2}\mapsto P(A_{\omega_2})$ is a step function:
        \begin{gather*}
            P(A_{\omega_2}) =
            \begin{cases}
                P_1(A_1)&\omega_2\in A_2\\
                0&\omega_2\not\in A_2.
            \end{cases}
        \end{gather*}
    \end{property}

    \begin{formula}[Product measure]\index{product!measure}
        From the previous property it follows that the product measure $P(A)$ can be written in the following way:
        \begin{gather}
            P(A) = \int_{\Omega_2} P_1(A_{\omega_2})dP_2(\omega_2).
        \end{gather}
    \end{formula}
    \begin{property}
        Let $P_1, P_2$ be finite measures. If $A\in\mathcal{F}$, the functions
        \[\omega_1\mapsto P_2(A_{\omega_1}) \qquad\text{and}\qquad \omega_2\mapsto P_1(A_{\omega_2})\]
        are measurable with respect to $\mathcal{F}_1$ and $\mathcal{F}_2$ respectively and
        \begin{gather}
            \int_{\Omega_2} P_1(A_{\omega_2})dP_2(\omega_2) = \int_{\Omega_1} P_2(A_{\omega_1})dP_1(\omega_1).
        \end{gather}
        Furthermore, the set function $P$ is countably additive and if any other product measure coincides with $P$ on all rectangles, it coincides with $P$ on the whole product $\sigma$-algebra.
    \end{property}

\subsection{Fubini's theorem}

    \begin{property}
        Let $f:\Omega_1\times\Omega_2\rightarrow\mathbb{R}$ be a non-negative function. If $f$ is measurable with respect to $\mathcal{F}_1\times\mathcal{F}_2$, then for each $\omega_1\in\Omega_1$ the function $\omega_2\mapsto f(\omega_1,\omega_2)$ is measurable with respect to $\mathcal{F}_2$ (and vice versa). Their integrals with respect to $P_1$ and $P_2$ respectively are also measurable.
    \end{property}
    \newdef{Section}{\index{section}
        The functions $\omega_1\mapsto f(\omega_1,\omega_2)$ and $\omega_2\mapsto f(\omega_1,\omega_2)$ are called sections of $f$.
    }

    \begin{theorem}[Tonelli]\index{Tonelli}
        Let $f:\Omega_1\times\Omega_2\rightarrow\mathbb{R}$ be a non-negative function. The following equalities hold:
        \begin{gather}
            \label{lebesgue:tonelli_theorem}
            \begin{split}
                \int_{\Omega_1\times\Omega_2}f(\omega_1,\omega_2)d(P_1\times P_2)(\omega_1,\omega_2) = \int_{\Omega_1}\left(\int_{\Omega_2}f(\omega_1,\omega_2)dP_2(\omega_2)\right)dP_1(\omega_1)\\ = \int_{\Omega_2}\left(\int_{\Omega_1}f(\omega_1,\omega_2)dP_1(\omega_1)\right)dP_2(\omega_2).
            \end{split}
        \end{gather}
    \end{theorem}

    \begin{result}[Fubini]\index{Fubini}
        Let $f\in L^1(\Omega_1\times\Omega_2)$. The sections of $f$ are integrable in the appropriate spaces. Furthermore, the functions $\omega_1\mapsto\int_{\Omega_2} fdP_2$ and $\omega_2\mapsto\int_{\Omega_1}fdP_1$ are in $L^1(\Omega_1)$ and $L^1(\Omega_2)$ respectively and equality \eqref{lebesgue:tonelli_theorem} holds.
    \end{result}
    \remark{The previous construction and theorems also apply to higher dimensional product spaces. These theorems provide a way to construct higher-dimensional Lebesgue measures $m_n$ by defining them as the completion of the product of $n$ one-dimensional Lebesgue measures.}
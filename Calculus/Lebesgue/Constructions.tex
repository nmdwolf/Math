\section{Space of integrable functions}
\subsection{Distance}\index{distance}
	To define a distance between functions, we first have to define some notion of length of a function. Normally this would not be a problem, because we know how to integrate integrable functions, however the fact that two functions differing on a null set have the same integral carries problems with it, i.e. a nonzero function could have a zero length. Therefore we will define the 'length' function on a restricted vector space:\par
    
    \noindent Define the following set of equivalence classes $L^1(E) = \mathcal{L}^1(E)_{/\equiv}$ by introducing the equivalence relation: $f\equiv g$ if and only if $f=g$ a.e.
    \begin{property}
		$L^1(E)$ is a Banach space\footnotemark.
	\end{property}
    \footnotetext{See definition \ref{linalgebra:banach_space}.}
    
    \begin{formula}
		A norm on $L^1(E)$ is given by:
        \begin{equation}
			\label{lebesgue:L1_norm}
            ||f||_1 = \int_E |f|dm
		\end{equation}
	\end{formula}
    
\subsection{Hilbert space \texorpdfstring{$L^2$}{L2}}\index{Hilbert!space|see{L$^2$}}
	\label{lebesgue:section:hilbert_space}
    
    \begin{property}
    	\label{lebesgue:L2_hilbert_space}
		$L^2$ is a Hilbert space\footnotemark.
	\end{property}
    \footnotetext{See definition \ref{hilbert:hilbert_space}.}
	\begin{formula}
		A norm on $L^2(E)$ is given by:
        \begin{equation}
			\label{lebesgue:L2_norm}
            ||f||_2 = \left(\int_E |f|^2dm\right)^{\frac{1}{2}}
		\end{equation}
        This norm is induced by the following inner product:
        \begin{equation}
			\label{lebesgue:L2_inner_product}
            \boxed{\langle f|g \rangle = \int_E f\overline{g}dm}
		\end{equation}
	\end{formula}
    Now instead of deriving $L^2$ from $\mathcal{L}^2$ we do the opposite. We define $\mathcal{L}^2$ as the set of measurable functions for which equation \ref{lebesgue:L2_norm} is finite.
    
    \newdef{Orthogonality}{\index{orthogonality}
    	As $L^2$ is a Hilbert space and thus has an inner product $\langle\cdot|\cdot\rangle$, it is possible to introduce the concept of orthogonality of functions in the following way:
        \begin{equation}
			\label{lebesgue:orthogonal_functions}
            \langle f|g \rangle = 0\implies\text{f and g are orthogonal}
		\end{equation}
        Furthermore it is also possible to introduce the angle between functions in the same way as equation \ref{linalgebra:angle}.
    }
    
    \begin{formula}[Cauchy-Schwarz inequality]\index{Cauchy-Schwarz}
		Let $f,g\in L^2(E,\mathbb{C})$. We have that $fg\in L^1(E\mathbb{C})$ and:
        \begin{equation}
			\label{lebesgue:schwarz_inequality}
            \boxed{\left|\int_E f\overline{g}dm\right|\leq||fg||_1\leq||f||_2||g||_2}
		\end{equation}
	\end{formula}
    \sremark{This follows immediately from formula \ref{lebesgue:holders_inequality}.}
    
    \begin{property}
		If $E$ has finite Lebesgue measure then $L^2(E)\subset L^1(E)$.
	\end{property}
    
\subsection{\texorpdfstring{$L^p$}{Lp} spaces}
	Generalizing the previous two Lebesgue function classes leads us to the notion of $L^p$ spaces with the following norm:
    
    \begin{property}For all $1\leq p\leq+\infty$ $L^p(E)$ is a Banach space with a norm given by:
    	\begin{equation}
			\label{lebesgue:Lp_norm}
            ||f||_p = \left(\int_E |f|^p\ dm\right)^{\frac{1}{p}}
		\end{equation}
    \end{property}
    \remark{Note that $L^2$ is the only $L^p$ space that is also a Hilbert space. The other $L^p$ spaces do not have a norm induced by an inner product.}
    
    \newformula{H\"{o}lder's inequality}{\index{H\"older's inequality}
    	Let $\frac{1}{p} + \frac{1}{q} = 1$ with $p\geq1$. For every $f\in L^p(E)$ and $g\in L^q(E)$ we have that $fg\in L^1(E)$ and:
        \begin{equation}
        	\label{lebesgue:holders_inequality}
			||fg||_1\leq||f||_p||g||_q
		\end{equation}
    }
    \newformula{Minkowski's inequality}{\index{Minkowski!inequality}
    	For every $p\geq1$ and $f,g\in L^p(E)$ we have
        \begin{equation}
			\label{lebesgue:minkowskis_inequality}
            ||f+g||_p\leq||f||_p + ||g||_p
		\end{equation}
    }
    \begin{property}
		If $E$ has finite Lebesgue measure then $L^q(E)\subset L^p(E)$ when $1\leq p\leq q<+\infty$.
	\end{property}
    
\subsection{\texorpdfstring{$L^\infty$}{L-infinity} space of essentially bounded measurable functions}
	\newdef{Essentially bounded function}{
    	Let $f$ be a measurable function satisfying $\esssup |f| <+\infty$. The function $f$ is said to be essentially bounded and the set of all such functions is denoted by $L^\infty(E)$.
    }
    
    \begin{formula}\index{supremum}
		A norm on $L^\infty$ is given by:
        \begin{equation}
			||f||_\infty = \esssup|f|
		\end{equation}	
        This norm is called the \textbf{supremum norm} and it induces the supremum metric \ref{topology:supremum_distance}.
	\end{formula}
    \begin{property}
		$L^\infty$ is a Banach space.
	\end{property}
	
\section{Product measures}
\subsection{Real hyperspace \texorpdfstring{$\mathbb{R}^n$}\ }
	
    The notions of intervals and lengths from the one dimensional case can be generalized to more dimensions in the following way:
    \newdef{Hypercube}{\index{hypercube}
    	Let $I_1, ..., I_n$ be a sequence of intervals.
    	\begin{equation}
			\mathbf{I} = I_1\times...\times I_n
		\end{equation}
    }
    \newdef{Generalized length}{
    	Let $\mathbf{I}$ be a hypercube induced by the sequence of intervals $I_1,...,I_n$. The length of $\mathbf{I}$ is given by:
        \begin{equation}
			l(\mathbf{I}) = \prod_{i=1}^{n}l(I_i)
		\end{equation}
    }
    
\subsection{Construction of the product measure}

    \newprop{General condition}{
    	The general condition for multi-dimensional\newline Lebesgue measures is given by following equation which should hold for all $A_1\in\mathcal{F}_1$ and $A_2\in\mathcal{F}_2$:
    	\begin{equation}
        	\label{lebesgue:product_measure:general_condition}
			\boxed{P(A_1\times A_2) = P_1(A_1)P_2(A_2)}
		\end{equation}
    }

	\newdef{Section}{\index{section}
    	Let $A=A_1\times A_2$. The following two sets are called sections:
        \[
        	A_{\omega_1} = \{\omega_2\in\Omega_2:(\omega_1,\omega_2)\in A\}\subset\Omega_2
        \]
        \[
        	A_{\omega_2} = \{\omega_1\in\Omega_1:(\omega_1,\omega_2)\in A\}\subset\Omega_1
        \]
    }
    \begin{property}
		Let $\mathcal{F} = \mathcal{F}_1\times\mathcal{F}_2$. If $A\in\mathcal{F}$ then for each $\omega_1$, $A_{\omega_1}\in\mathcal{F}_2$ and for each $\omega_2$, $A_{\omega_2}\in\mathcal{F}_1$. Equivalently the sets $\mathcal{G}_1 = \{A\in\mathcal{F}:\forall \omega_1,A_{\omega_1}\in\mathcal{F}_2\}$ and $\mathcal{G}_2 = \{A\in\mathcal{F}:\forall \omega_2, A_{\omega_2}\in\mathcal{F}_1\}$ coincide with the product $\sigma$-algebra $\mathcal{F}$.
	\end{property}
    
    \begin{property}
		The function $A_{\omega_2}\mapsto P(A_{\omega_2})$ is a step function:
        \[
        	P(A_{\omega_2}) = \left\{
            \begin{array}{ccc}
				P_1(A_1)&\text{if}&\omega_2\in A_2\\
                0&\text{if}&\omega_2\not\in A_2
			\end{array}
            \right.
        \]
	\end{property}
    
    \begin{formula}[Product measure]\index{product!measure}
		From previous property it follows that we can write the product measure $P(A)$ in the following way:
        \begin{equation}
			\boxed{P(A) = \int_{\Omega_2} P_1(A_{\omega_2})dP_2(\omega_2)}
		\end{equation}
	\end{formula}
    \begin{property}
		Let $P_1, P_2$ be finite. If $A\in\mathcal{F}$ then the functions
        \[
        	\omega_1\mapsto P_2(A_{\omega_1}) \qquad\qquad \omega_2\mapsto P_1(A_{\omega_2})
        \]
        are measurable with respect to $\mathcal{F}_1$ and $\mathcal{F}_2$ respectively and
        \begin{equation}
			\boxed{\int_{\Omega_2} P_1(A_{\omega_2})dP_2(\omega_2) = \int_{\Omega_1} P_2(A_{\omega_1})dP_1(\omega_1)}
		\end{equation}
        Furthermore the set function $P$ is countably additive and if any other product measure coincides with $P$ on all rectangles, it is equal to $P$ on the whole product $\sigma$-algebra.
	\end{property}

    
\subsection{Fubini's theorem}
	\begin{property}
		Let $f:\Omega_1\times\Omega_2\rightarrow\mathbb{R}$ be a non-negtaive function. If $f$ is measurable with respect to $\mathcal{F}_1\times\mathcal{F}_2$ then for each $\omega_1\in\Omega_1$ the function $\omega_2\mapsto f(\omega_1,\omega_2)$ is measurable with respect to $\mathcal{F}_2$ (and vice versa). There integrals with respect to $P_1$ and $P_2$ respectively are also measurable.
	\end{property}
    \newdef{Section of a function}{\index{section}
    	The functions $\omega_1\mapsto f(\omega_1,\omega_2), \omega_2\mapsto f(\omega_1,\omega_2)$ are called sections of $f$.
	}
    
    \begin{theorem}[Tonelli's theorem]\index{Tonelli's theorem}
		Let $f:\Omega_1\times\Omega_2\rightarrow\mathbb{R}$ be a non-negative function. The following equalities apply:
        \begin{equation}
        	\label{lebesgue:tonelli_theorem}
        	\begin{split}
			\int_{\Omega_1\times\Omega_2}f(\omega_1,\omega_2)d(P_1\times P_2)(\omega_1,\omega_2) = \int_{\Omega_1}\left(\int_{\Omega_2}f(\omega_1,\omega_2)dP_2(\omega_2)\right)dP_1(\omega_1)\\ = \int_{\Omega_2}\left(\int_{\Omega_1}f(\omega_1,\omega_2)dP_1(\omega_1)\right)dP_2(\omega_2)
            \end{split}
		\end{equation}
	\end{theorem}
    
    \begin{result}[Fubini's theorem]\index{Fubini's theorem}
		Let $f\in L^1(\Omega_1\times\Omega_2)$. The sections are integrable in the appropriate spaces. Furthermore the functions $\omega_1\mapsto\int_{\Omega_2} fdP_2$ and $\omega_2\mapsto\int_{\Omega_1}fdP_1$ are in $L^1(\Omega_1)$ and $L^1(\Omega_2)$ respectively and equality \ref{lebesgue:tonelli_theorem} holds.
	\end{result}
    \remark{The previous construction and theorems also apply for higher dimensional product spaces. These thereoms provide a way to construct higher-dimensional Lebesgue measures $m_n$ by defining them as the completion of the product of $n$ one-dimensional Lebesgue measures.}

\section{Connections}
\subsection{Vertical vectors}

    Because smooth fibre bundles (which include smooth principal $G$-bundles) are also smooth manifolds, we can define the traditional notions such as the tangent bundle. We use these to construct the horizontal and vertical (sub)bundles:
    \newdef{Vertical vector}{\index{bundle!vertical}
        Let $\bundle$ be a smooth fibre bundle. The subbundle $\text{Vert}(TE):=\ker(\pi_\ast)$ of $TE$ is called the vertical (sub)bundle over $E$. Elements of the vertical space $\text{Vert}(T_pE)$ are called vertical vectors.
    }

    For principal $G$-bundles we can use an equivalent definition:
    \begin{adefinition}
        Consider a smooth principal $G$-bundle $\prb$. We first construct a map $\iota_p$ for every element $p\in P$:
        \begin{gather}
            \iota_p:G\rightarrow P: g\mapsto p\cdot g\equiv pg.
        \end{gather}
        We then define a tangent vector $v\in T_p P$ to be vertical if it lies in the image of $\iota_{p,\ast}$, i.e. $\text{Vert}(T_pP) := \text{im}(\iota_{p,\ast})$. This definition is equivalent to the previous one because of the short exact sequence:
        \begin{gather}
            0\rightarrow\mathfrak{g}\xrightarrow{\iota_{p,\ast}}T_pP\xrightarrow{\pi_\ast}T_pM\rightarrow0.
        \end{gather}
    \end{adefinition}

    \begin{property}[Dimension of vertical bundle]\label{diff:vertical_dimension}
        It follows from the second definition that the vertical vectors of a principal $G$-bundle are nothing but the pushforward of the Lie algebra $\mathfrak{g}$ under the right action of $G$ on $P$. Furthermore, the exactness of the sequence implies that $\iota_{p,\ast}:\mathfrak{g}\rightarrow\text{Vert}(T_pP)$ is an isomorphism of vector spaces. In particular, it implies that
        \begin{gather}
            \dim\text{Vert}(T_pP) = \dim\mathfrak{g} = \dim G.
        \end{gather}
    \end{property}

    \newdef{Fundamental vector field}{\index{vector field!fundamental}
        Consider a principal $G$-bundle. Let $A\in\mathfrak{g}$, where $\mathfrak{g}$ is the Lie algebra corresponding to $G$. The vertical vector field $A^\#:P\rightarrow TP$, given by
        \begin{gather}
            \label{manifolds:fundamental_vector_field}
            A^\#(p) = \iota_{p,\ast}(A)\in\text{Vert}(T_pP),
        \end{gather}
        is called the fundamental vector field associated to $A$. We can calculate the action of the vector field $A^\#$ as follows:
        \begin{gather}
            A^\#_p(f) = \left.\deriv{}{t}f(p\cdot\exp(tA))\right|_{t=0}
        \end{gather}
        where $f\in C^\infty(P)$.
    }

    \begin{property}
        The map $(\cdot)^\#:\mathfrak{g}\rightarrow\Gamma(TP)$ is a Lie algebra morphism:
        \begin{gather}
            [A, B]^\# = [A^\#, B^\#]
        \end{gather}
        where the Lie bracket on the left is the one in $\mathfrak{g}$ and the Lie bracket on the right is the one in $\mathfrak{X}(M)$ given by \ref{manifolds:lie_bracket}.
    \end{property}

    \begin{property}
        The vertical bundle satisfies the following $G$-equivariance condition:
        \begin{gather}
            \label{diff:vert_g_equivariance}
            R_{g, \ast}(\text{Vert}(T_pP)) = \text{Vert}(T_{pg}P).
        \end{gather}
        By differentiating the equality \[R_g\circ\iota_p = \iota_{pg}\circ\text{ad}_{g^{-1}}\] and using \ref{lie:adjoint_representation} and \ref{manifolds:fundamental_vector_field} we obtain the following algebraic formulation of the $G$-equivariance condition:
        \begin{gather}
            R_{g, \ast}\left(A^\#(p)\right) = \left(\text{Ad}_{g^{-1}}A\right)^\#(pg).
        \end{gather}
    \end{property}

\subsection{Ehresmann connections}

    \newdef{Ehresmann connection}{\index{connection!Ehresmann}\index{horizontal!vector}\label{manifolds:connection}
        Consider a smooth fibre bundle $E$. An (Ehresmann) connection on $E$ is the selection of a subspace $\text{Hor}(T_eE)\leq T_eE$ for every $e\in E$ such that:
        \begin{enumerate}
            \item The horizontal and vertical bundles are complementary: $\text{Vert}(T_eE)\oplus\text{Hor}(T_eE) = T_eE$.
            \item The choice of subspace depends smoothly on $e\in E$.\footnote{See the definition of a (smooth) distribution \ref{manifolds:distribution}.}
        \end{enumerate}
        The vectors in $\text{Hor}(T_eE)$ are said to be \textbf{horizontal} (with respect to the connection).
    }
    \newdef{Horizontal bundle}{
        The horizontal (sub)bundle $\text{Hor}(TE)$ is defined as $\bigsqcup_{e\in E}\text{Hor}(T_eE)$.
    }

    \newdef{Principal connection}{\index{connection!principal}\label{manifolds:principal_connection}
        A principal connection on a smooth principal $G$-bundle $P$ is a $G$-equivariant Ehresmann connection, i.e. an Ehresmann connection for which the horizontal subspaces satisfy the following $G$-equivariance condition:
        \begin{gather}
            R_{g, \ast}(\text{Hor}(T_pP)) = \text{Hor}(T_{pg}P).
        \end{gather}
    }
    \begin{remark}
        Note that this condition was automatically satisfied for vertical bundles (see equation \ref{diff:vert_g_equivariance}).
    \end{remark}

    \begin{property}[Dimension]\label{manifolds:connection_dimensions}
        Properties \ref{diff:principal_bundle_dimension} and \ref{diff:vertical_dimension}, together with the direct sum decomposition of $T_pP$, imply the following relation $\forall p\in P$:
        \begin{gather}
            \dim\text{Hor}(T_pP) = \dim M.
        \end{gather}
        We briefly summarize all dimensional relations between the data of a principal bundle $\prb$:
        \begin{align}
            \dim P &= \dim M + \dim G\nonumber\\
            \dim M &= \dim\text{Hor}(T_pP)\\
            \dim G &= \dim\text{Vert}(T_pP)\nonumber
        \end{align}
        for all $p\in P$.
    \end{property}

    \newdef{Dual connection}{\index{dual!connection}
        First we define the dual of the horizontal bundle:
        \begin{gather}
            \text{Hor}(T_p^*P) := \big\{h\in T_p^*P:h(v)=0, v\in\text{Vert}(T_pP)\big\}.
        \end{gather}
        It is the set of 1-forms that vanish on the vertical subspace. A dual connection can then be defined as the selection of a vertical covector bundle $\text{Vert}(T_p^*P)$ satisfying the conditions of definition \ref{manifolds:connection} and \ref{manifolds:principal_connection} (where $\text{Vert}$ and $\text{Hor}$ should now be interchanged). Note that here the horizontal bundle is canonically defined.
    }

    \newdef{Horizontal and vertical forms}{\index{horizontal!form}\index{vertical!form}\label{forms:horizontal_form}
        Let $\theta\in\Omega^k(P)$ be a differential $k$-form.
        \begin{itemize}
            \item $\theta$ is said to be horizontal if
            \begin{gather}
                \theta(v_1,\ldots,v_k) = 0
            \end{gather}
            whenever at least one of the $v_i$ is in $\text{Vert}(T_pP)$.
            \item $\theta$ is said to be vertical if
            \begin{gather}
                \theta(v_1,\ldots,v_k) = 0
            \end{gather}
            whenever at least one of the $v_i$ is in $\text{Hor}(T_pP)$.
        \end{itemize}
        For functions $f\in\Omega^0(P)$ it is vacuously true that they are both vertical and horizontal.
    }
    \newdef{Tensorial form}{\index{tensorial}\label{diff:tensorial_form}
        Consider a differential form on a principal $G$-bundle $P$ with values in a vector space $V$ equipped with a representation $\rho:G\rightarrow V$. This form is said to be \textbf{tensorial of type $(V, \rho)$} if it is horizontal and if it satisfies the equivariancy condition
        \begin{gather}
            R_g^*\theta = \rho(g^{-1})\theta.
        \end{gather}
    }

\subsection{Connection forms}

    \newdef{Connection one-form}{\index{connection!form}
        Let $P$ be a principal bundle $G$-bundle. A connection one-form, associated to a given principal connection, is a $\mathfrak{g}$-valued 1-form $\omega\in\Omega^1(P; \mathfrak{g})$ that satisfies the following two conditions:
        \begin{enumerate}
            \item \textbf{Cancellation of fundamental vector fields}:
            \begin{gather}
                \omega(A^\#) = A,
            \end{gather}
            and
            \item \textbf{$G$-equivariance}:
            \begin{gather}
                \omega\circ R_{g, \ast} = \text{Ad}_{g^{-1}}\circ\omega.
            \end{gather}
        \end{enumerate}
        The horizontal subspaces are then recovered as $\text{Hor}(T_pP) = \ker\omega|_p$.
    }
    \begin{formula}
        Consider a principal $G$-bundle $P$. Given a principal connection on $P$, the associated connection one-form is given by the following map:
        \begin{gather}
            \omega = (\iota_{p,\ast})^{-1}\circ\pr_V
        \end{gather}
        where $\pr_V$ is the projection $TP\rightarrow\text{Vert}(TP)$ associated to the decomposition in definition \ref{manifolds:connection}.
    \end{formula}

    \begin{property}\index{connection!pullback}
        Consider two principal $G$-bundles $P_1,P_2$. Let $\omega$ be a connection one-form on $P_1$ and let $F:P_1\rightarrow P_2$ be a bundle map. The map $F^*\omega$ defines an principal connection on $P_2$, called the \textbf{pullback connection}.
    \end{property}

\subsection{Maurer-Cartan form}

    \newdef{Maurer-Cartan form}{\index{Maurer-Cartan!form}\index{Cartan!(connection) form|see{Maurer-Cartan}}
        For every $g\in G$ we know that the tangent space $T_gG$ is isomorphic to $T_eG\equiv\mathfrak{g}$. A canonical isomorphism $T_gG\rightarrow\mathfrak{g}$ is given by the Maurer-Cartan form
        \begin{gather}
            \Omega := L_{g^{-1},\ast}.
        \end{gather}
    }
    \begin{construct}
        Consider the one-point manifold $M=\ast$. When constructing a principal $G$-bundle over $M$ we see that the total space $P=\ast\times G$ can be identified with the structure group $G$. From the relations in property \ref{manifolds:connection_dimensions} it follows that the horizontal spaces are null-spaces (this trivially defines a smooth distribution and thus a connection according to \ref{manifolds:connection}) and that the vertical spaces are equal to the tangent spaces, i.e. $\text{Vert}(T_gG)=T_gG$ (where we used the association $P\cong G$).

        The simplest way to define a connection form $\omega$ on this bundle would be the trivial projection $\mathbbm{1}_{TP}:TP\rightarrow TP\equiv\text{Vert}(TP)$. However, the image of this map would be $T_gG$ and not $\mathfrak{g}$ as required. This can be solved by using the Maurer-Cartan form $\Omega:T_gG\rightarrow\mathfrak{g}$:
        \begin{gather}
            \omega(v) := \Omega(v).
        \end{gather}
    \end{construct}
    \begin{property}
        The Maurer-Cartan form is the unique principal connection on the bundle $G\hookrightarrow G\rightarrow\ast$.
    \end{property}

    \newdef{Darboux derivative}{\index{Darboux!derivative}\index{integral}\index{primitive}
        Consider a smooth function $f:M\rightarrow G$ between a smooth manifold and a Lie group. The Darboux derivative of $f$ is defined as follows:
        \begin{gather}
            \omega_f := f^*\Omega.
        \end{gather}
        The function $f$ is said to be an \textbf{integral} or \textbf{primitive} of $\omega_f$.
    }
    \begin{property}
        If two functions $f,f':M\rightarrow G$ (where $M$ is assumed to be connected) have the same Darboux derivative, then there exists an element $g\in G$ such that $f(x)=g\cdot f'(x)$ for all $x\in M$.
    \end{property}

    \begin{theorem}[Fundamental theorem of calculus]\index{fundamental theorem!of calculus}\index{Maurer-Cartan!equation}
        Consider a smooth manifold $M$ and a Lie group $G$ with Lie algebra $\mathfrak{g}$. If $\omega:TM\rightarrow\mathfrak{g}$ satisfies the Maurer-Cartan equation
        \begin{gather}
            d\omega + \frac{1}{2}[\omega\wedge\omega] = 0,
        \end{gather}
        then (locally) there exists a smooth function $f:M\rightarrow G$ such that $\omega = f^*\Omega$.
    \end{theorem}

\subsection{Local representations}

    \newdef{Yang-Mills field}{\index{Yang-Mills!field}\label{diff:prin:yang_mills_field}
        Consider a principal $G$-bundle $P\rightarrow M$ and an open subset $U\subseteq M$. Given a principal connection $\omega$ on $P$ and a local section $\sigma:U\rightarrow P$, we define the Yang-Mills field $\omega^U\in\Omega^1(U; \mathfrak{g})$ as follows:
        \begin{gather}
            \omega^U := \sigma^*\omega.
        \end{gather}
    }
    \newdef{Local representation}{
        Consider a principal bundle $P\rightarrow M$ and let $(U,\varphi)$ be a bundle chart on $P$. The local representation of a principal connection $\omega$ on $P$ with respect to the chart $(U,\varphi)$ is defined as $(\varphi^{-1})^*\omega$.
    }

    \begin{formula}
        Consider a principal connection $\omega$ on a principal $G$-bundle $P\rightarrow M$. Because of property \ref{diff:prin_section_triv} every local section $\sigma:U\rightarrow P$ induces both a Yang-Mills field $\omega^U$ and a local representation of $\omega$. These two forms are related by the following equation:
        \begin{gather}
            \sigma^*\omega|_{(m, g)}(v, X) = \text{Ad}_{g^{-1}}(\omega^U_m(v)) + \Omega_g(X)
        \end{gather}
        where $v\in T_mU$, $X\in\mathfrak{g}$ and $\Omega$ is the Maurer-Cartan form on $G$.
    \end{formula}

    \begin{formula}[Compatibility condition]
        Consider a principal $G$-bundle $P\rightarrow M$ and two open subsets $U,V$ of $M$. Given two local sections $\sigma_U:U\rightarrow P$, $\sigma_V:V\rightarrow P$ and a principal connection $\omega$ on $P$, we can define two Yang-Mills field $\omega^U$ and $\omega^V$.

        On the intersection $U\cap V\subset M$ we can find a (unique) gauge transformation $\xi:U\cap V\rightarrow G$ such that $\sigma_V(m) = \sigma_U(m)\cdot\xi(m)$. Using this gauge transformation we can relate $\omega^U$ and $\omega^V$ as follows:
        \begin{gather}
            \label{diff:prin:local_compatibility}
            \omega^V|_m = \text{Ad}_{\xi(m)^{-1}}\omega^U|_m + \xi^*\Omega|_m
        \end{gather}
        where $\Omega$ is the Maurer-Cartan form on $G$.
    \end{formula}

    \begin{example}[General linear group\footnotemark]
        \footnotetext{A derivation can be found in lecture 22 of \cite{schuller}.}
        Let $G=\text{GL}(\mathbb{R}^n)$. The second term in equation \ref{diff:prin:local_compatibility} can be written as follows:
        \begin{gather}
            (\xi^*\Omega)^i_{\ j} = (\xi(m)^{-1})^i_{\ k}\pderiv{}{x^\mu}\xi(p)^k_{\ j}dx^\mu
        \end{gather}
        at every point $m\in M$. Formally this can be written coordinate-independently as
        \begin{gather}
            \label{diff:prin:mc_pullback}
            \xi^*\Omega = \xi^{-1}d\xi.
        \end{gather}
    \end{example}

    \begin{example}[Christoffel symbols]\index{Christoffel symbols}
        Let $\Gamma^i_{\ j\mu}, \overline{\Gamma}^k_{\ l\nu}$ be the Yang-Mills fields corresponding to a connection on the frame bundle of some manifold $M$, where the sections are induced by a choice of coordinates ($x^i$ and $y^i$ respectively). In this case, the expansion coefficients of the Yang-Mills field are called the \textbf{Christoffel symbols}\footnote{See also equation \ref{diff:christoffel_symbol}.}. Using equations \ref{diff:prin:local_compatibility} and \ref{diff:prin:mc_pullback} this becomes:
        \begin{gather}
            \overline{\Gamma}^i_{\ j\mu} = \pderiv{y^\nu}{x^\mu}\left(\pderiv{x^i}{y^k}\Gamma^k_{\ l\nu}\pderiv{y^l}{x^j} + \pderiv{x^i}{y^k}\frac{\partial^2y^k}{\partial x^j\partial x^\nu}\right).
        \end{gather}
    \end{example}

\subsection{Parallel transport}

    \begin{definition}[Horizontal lift]\index{horizontal!lift}
        Consider a principal bundle $\prb$ and a curve $\gamma:[0,1]\rightarrow M$. Given an Ehresmann connection $\text{Hor}$, for every point $p_0\in \pi^{-1}(\gamma(0))$ there exists a unique curve $\widetilde{\gamma}_{p_0}:[0,1]\rightarrow P$ satisfying the following conditions:
        \begin{enumerate}
            \item $\widetilde{\gamma}_{p_0}(0) = p_0$,
            \item $\pi\circ\widetilde{\gamma}_{p_0} = \gamma$, and
            \item $\widetilde{\gamma}_{p_0}'(t)\in\text{Hor}(T_{\widetilde{\gamma}_{p_0}(t)}P)$ for all $t\in[0,1]$.
        \end{enumerate}
        The curve $\widetilde{\gamma}_{p_0}$ is called the \textbf{horizontal lift} of $\gamma$ starting at $p_0$. When it is clear from the context what the basepoint $p_0$ is, the subscript is often omitted and we write $\widetilde{\gamma}$ instead of $\widetilde{\gamma}_{p_0}$.
    \end{definition}
    \begin{remark}[Horizontal curve]\index{horizontal!curve}
        Curves satisfying the last condition in the above property are said to be horizontal.
    \end{remark}

    \begin{method}
        Consider a principal bundle $\prb$. Let $\gamma(t)$ be a curve in $M$ and let $\omega$ be a principal connection on $P$. For general structure groups $G$, the horizontal lift can be found as follows:

        \qquad Let $\delta(t)$ be a curve in $P$ that projects onto $\gamma(t)$, i.e. $\pi\circ\delta=\gamma$, such that $\widetilde\gamma_{p_0}(t)=\delta(t)\cdot g(t)$ for some curve $g(t)$ in $G$. The curve $g(t)$ can then be found as the unique solution of the following first order ODE:
        \begin{gather}
            \label{diff:prin:horizontal_ode}
            \text{Ad}_{g(t)^{-1}}\omega_{\delta(t)}(X_{\delta, \delta(t)}) + \Omega_{g(t)}(Y_{g, g(t)}) = 0
        \end{gather}
        where $X_\delta, Y_g$ are tangent vectors to respectively the curves $\delta(t)$ and $g(t)$ and where $\Omega$ is the Maurer-Cartan form on $G$. As initial value condition we use $\delta(0)\cdot g(0) = p_0$.
    \end{method}
    \begin{remark}
        When given a local section $\sigma:U\rightarrow P$ we can rewrite the ODE in a more explicit form. First, we remark that the section induces a curve $\delta = \sigma\circ\gamma$. Taking the derivative then yields $X_\delta = \sigma_*(X_\gamma)$. Using this we can rewrite the ODE as
        \begin{gather}
            \text{Ad}_{g(t)^{-1}}\omega_{\delta(t)}(\sigma_*X_{\gamma, \gamma(t)}) + \Omega_{g(t)}(Y_{g, g(t)}) = 0.
        \end{gather}
        By using the equality $f^*\omega = \omega\circ f_*$ and introducing the Yang-Mills field $A = \sigma^*\omega$ this becomes
        \begin{gather}
            \text{Ad}_{g(t)^{-1}}A(X_{\gamma, \gamma(t)}) + \Omega_{g(t)}(Y_{g, g(t)}) = 0.
        \end{gather}
    \end{remark}

    \begin{example}
         For matrix Lie groups the above ODE can be reformulated as follows: Given the trivial section $s:U\rightarrow U\times G:x\mapsto (x, e)$, where $U$ is an open subset of $M$, the horizontal lift of $\gamma(t)$ can locally be parametrized as \[\widetilde{\gamma}(t) = \underbrace{(s\circ\gamma)(t)}_{\delta(t)}\cdot g(t) = (\gamma(t), g(t))\] where $g(t)$ is a curve in $G$. To determine $\widetilde{\gamma}(t)$ it is thus sufficient to find $g(t)$. The ODE \ref{diff:prin:horizontal_ode} then becomes
        \begin{gather}
            \label{diff:prin:horizontal_ode_matrix}
            g'(t) = -\omega(\gamma(t), e, \gamma'(t), 0)g(t).
        \end{gather}
        Using the trivial section $s$ we can rewrite this formula. First, we consider the action of the Yang-Mills field $s^*\omega$ on the derivative $\gamma_* = (\gamma(t), \gamma'(t))$. Using the fact that it is linear in the second argument we can write \[s^*\omega(\gamma(t), \gamma'(t)) = A(\gamma(t))\gamma'(t)\] where $A:M\rightarrow\text{Hom}(\mathbb{R}^{\dim M}, \mathfrak{g})$ gives a linear map for each point $\gamma(t)\in M$. The action can also be rewritten using the relation $f^*\omega = \omega\circ f_\ast$ as\[s^*\omega(\gamma(t), \gamma'(t)) = \omega\Big(s_\ast(\gamma(t), \gamma'(t))\Big) = \omega(\gamma(t), e, \gamma'(t), 0).\] Combining these relations with the ODE \ref{diff:prin:horizontal_ode_matrix} gives
        \begin{gather}
            \label{diff:prin:horizontal_ode_derivative}
            \left(\deriv{}{t} + A(\gamma(t))\gamma'(t)\right)g(t) = 0
        \end{gather}
        where $\deriv{}{t}$ is the matrix given by element-wise multiplication of the derivative $\deriv{}{t}$ and the identity matrix $I$.
    \end{example}

    \begin{method}
        The ODE \ref{diff:prin:horizontal_ode} can now be solved. We explicitly assume that $G$ is a matrix Lie group such that we can start from equation \ref{diff:prin:horizontal_ode_derivative}. Direct integration and iteration gives us
        \begin{gather}
            g(t) = \left[I - \int_0^tdt_1A(\gamma'(t_1)) + \int_0^tdt_1\int_0^{t_1}dt_2A(\gamma'(t_1))A(\gamma'(t_2))-\ldots\right]g(0)
        \end{gather}
        where $A$ is the Yang-Mills field associated to the local section $\sigma$. This can be rewritten using the standard ''square integration'' trick\footnote{Well-known from the Dyson series \ref{QM:dyson_series}.} as
        \begin{gather}
            g(t) = \left[I - \int_0^tdt_1A(\gamma'(t_1)) + \frac{1}{2!}\int_0^tdt_1\int_0^tdt_2\mathcal{T}\Big(A(\gamma'(t_1))A(\gamma'(t_2))\Big)-\ldots\right]g(0).
        \end{gather}
        By noting that this formula is equal to the path-ordered exponential series we find
        \begin{gather}
            \label{diff:g0_to_gt}
            g(t) = \mathcal{T}\exp\left(-\int_0^tdt'A(\gamma'(t'))\right)g(0).
        \end{gather}
    \end{method}

    \newdef{Parallel transport}{\index{parallel transport!on principal bundles}
        \nomenclature[O_Par]{$\text{Par}_t^\gamma$}{parallel transport map with respect to the curve $\gamma$}
        The parallel transport map along the curve $\gamma$ is defined as follows:
        \begin{gather}
            \text{Par}_t^\gamma:\pi^{-1}(\gamma(0))\rightarrow\pi^{-1}(\gamma(t)):p_0\mapsto \widetilde{\gamma}_{p_0}(t).
        \end{gather}
        This map is $G$-equivariant and it is an isomorphism of fibres. The group element given by the path-ordered exponential in equation \ref{diff:g0_to_gt} is generally called the holonomy along the curve $\gamma$.
    }

    Using the above constructions that assign Lie group elements to paths we can give an alternative definition of principal connections:
    \newadef{\difficult{Principal connection}}{\index{connection!principal}\label{diff:holonomy_functor}
        Let $M$ be a smooth manifold and consider its path groupoid\footnote{See definition \ref{hdg:path_groupoid} for a rigorous exposition.} $\mathcal{P}_1(M)$ which has the points of $M$ as objects and homotopy classes of smooth paths in $M$ as morphisms. Let $\prb$ be a principal $G$-bundle over $M$ and denote the delooping \ref{cat:group_delooping} of $G$ by $\mathbf{B}G$. The assignment of holonomies to smooth paths locally defines a functor
        \begin{gather}
            \text{hol}_i:\mathcal{P}_1(U_i)\rightarrow\mathbf{B}G
        \end{gather}
        for every chart $U_i\subset M$. Globally these can be glued together using the transition cocycles $g_{ij}$ (in there incarnation as natural isomorphisms) to obtain a functor
        \begin{gather}
            \text{hol}:\mathcal{P}_1(M)\rightarrow\mathbf{Trans}_1(P)\subset G\mathbf{Torsor}
        \end{gather}
        where $\text{Trans}_1(P)$ is the full subcategory of the category of $G$-torsors on the fibres of $P$ (see also remark \ref{diff:fibre_torsor}).

        It can be shown that any functor of this type gives rise to a principal connection on $P$ and, conversely, every principal connection gives rise to a holonomy functor through the parallel transport constructions as given in this section.
        ?? COMPLETE ??
    }

\subsection{Holonomy group}

    \newdef{Holonomy group}{\index{holonomy}
        \nomenclature[S_Hol]{$\text{Hol}_p(\omega)$}{holonomy group at $p$ with respect to the connection $\omega$}
        Consider a principal bundle $\prb$ and choose a point $m\in M$. Let $\Omega^{ps}_mM\subset\Omega_m M$ be the subset of the based loop space consisting of piecewise smooth loops with basepoint $m\in M$. The holonomy group $\text{Hol}_p(\omega)$ based at $p\in\pi^{-1}(m)$ with respect to the connection form $\omega$ is given by
        \begin{gather}
            \text{Hol}_p(\omega) := \{g\in G: p \sim p\cdot g\}
        \end{gather}
        where two points $p, q\in P$ are equivalent if there exists a loop $\gamma\in\Omega_m^{ps}M$ such that the horizontal lift $\widetilde{\gamma}$ connects $p$ and $q$.
    }
    \newdef{Reduced holonomy group}{
        The reduced holonomy group $\text{Hol}_p^0(\omega)$ is defined as the subset of $\text{Hol}_p(\omega)$ consisting of contractible loops.
    }

    \newdef{Holonomy bundle}{\index{holonomy!bundle}
        Let $M$ be a smooth path-connected manifold. Consider a principal bundle $P$ over $M$ with principal connection $\omega$. We can equip $P$ with an equivalence relation $\sim$ such that $p\sim q$ if and only if there exists a horizontal curve connecting $p$ and $q$. For every point $p\in P$ one can then construct the following set:\footnote{Path-connectedness of the base manifold implies that $H(p)$ and $H(q)$ are isomorphic for all $p,q\in P$.}
        \begin{gather}
            H(p) := \{q\in P: p\sim q\}.
        \end{gather}
        It can be shown that this set is in fact a principal bundle itself with structure group $\text{Hol}_p(\omega)$.
    }

\section{Covariant derivatives}\label{section:covariant_derivatives}
\subsection{Koszul connections}

    \newdef{Horizontal lifts on associated bundles}{\index{horizontal!lift}
        Let $P_F := P\times_G F$ be an associated bundle of a principal bundle $\prb$ and let $\gamma$ be a curve in $M$ with horizontal lift $\widetilde{\gamma}_p$ in $P$. The horizontal lift of $\gamma$ to $P_F$ through the point $[p, f]\in P_F$ is defined as follows:
        \begin{gather}
            \widetilde{\gamma}^{P_F}_{[p, f]}(t) := [\widetilde{\gamma}_p(t), f].
        \end{gather}
        Although the element $f$ seems to stay constant along the horizontal lift, it in fact changes according to formula \ref{diff:prin:associated_bundle_equivalence}.
    }
    \newdef{Parallel transport}{
        Similar to the case of principal bundles $P$, the parallel transport map on an associated bundle $P_F$ is defined as
        \begin{gather}
            \text{Par}_t^\gamma:\pi_F^{-1}(\gamma(0))\rightarrow\pi_F^{-1}(\gamma(t)):[p, f]\mapsto \widetilde{\gamma}^{P_F}_{[p, f]}(t).
        \end{gather}
    }

    \begin{example}[Vector bundles]
        Consider a principal bundle $\prb$. Suppose that the Lie group $G$ acts on a vector space $V$ through a representation $\rho:G\rightarrow\text{GL}(V)$ . We can then construct an associated vector bundle $\pi_1:P\times_{GL(V)} V\rightarrow M$. Moreover, assume that we work on a chart $(U, \varphi)$ such that we can locally write $P$ and $P_V$ as product bundles. Parallel transport on this vector bundle is then defined as follows:

        \qquad Let $\gamma(t)$ be a curve in $M$ such that $\gamma(0)=x_0$ and $\gamma(1) = x_1$. Furthermore, let the horizontal lift $\widetilde{\gamma}(t) = (\gamma(t), g(t))$ satisfy $\widetilde{\gamma}(0)=(x_0, h)$ as initial condition. Parallel transport of the point $(x_0, v_0)\in U\times V$ along $\gamma$ is given by the following map:
        \begin{gather}
            \text{Par}^\gamma_t:\pi^{-1}_1(x_0)\rightarrow\pi^{-1}_1(\gamma(t)):(x_0, v_0)\mapsto \big(\gamma(t), \rho\big(g(t)h^{-1}\big)v_0\big).
        \end{gather}
        It should be noted that this map is independent of the initial element $h\in G$ (despite the presence of the factor $h^{-1}$). Moreover, $\text{Par}^\gamma_t$ is an isomorphism of vector spaces and can thus be used to identify distant fibres (as long as they lie in the same path-component).
    \end{example}
    \begin{remark}
        For every vector bundle one can construct the frame bundle and use the parallel transport map on this bundle to define parallel transport of vectors. We conclude that the previous construction is applicable to any vector bundle.
    \end{remark}

    \newdef{Covariant derivative}{\index{covariant!derivative}
        Consider a vector bundle $\bundle$ with model fibre space $V$ and its associated principal GL$(V)$-bundle with principal connection $\omega$ (both over a base manifold $M$). Let $\sigma:M\rightarrow E$ be a section of the vector bundle and let $X$ be a vector field on $M$. The covariant derivative of $\sigma$ with respect to $X$ is defined as
        \begin{gather}
            \nabla_X\sigma|_{x_0} := \lim_{t\rightarrow0}\stylefrac{(\text{Par}_t^\gamma)^{-1}\sigma(\gamma(t)) - \sigma(x_0)}{t}
        \end{gather}
        where $\gamma(t)$ is any curve satisfying $\gamma(0) = x_0$ and $\gamma'(0) = X(x_0)$.

        One can also rephrase the above definition in terms of the horizontal vector field associated to the lift $\widetilde{\gamma}$ (akin to definition \ref{manifolds:lie_derivative_functions}). By property \ref{diff:prin:section_bijection} every section $\sigma$ of an associated bundle corresponds to a $G$-equivariant map $\phi(\sigma):P\rightarrow V$. In terms of this map we obtain:
        \begin{gather}
            \phi(\nabla_X\sigma) = X^H(\phi(\sigma))
        \end{gather}
        where $X^H$ acts componentwise on $V$.
    }

    \begin{property}\index{Koszul!connection}
        The map
        \begin{gather}
            \Gamma(TM)\times\Gamma(E)\rightarrow\Gamma(E):(X, \sigma)\mapsto\nabla_X\sigma
        \end{gather}
        gives a Koszul connection \ref{manifolds:koszul_connection}. It follows that every principal connection on a principal bundle induces a Koszul connection on all of its associated vector bundles.
    \end{property}

\subsection{Exterior covariant derivative}\label{section:exterior_covariant_derivative}

    \newdef{Exterior covariant derivative}{\index{exterior!covariant derivative}
        Let $P$ be a principal bundle equipped with a principal connection $\omega$ and let $\theta\in\Omega^k(P)$ be a differential $k$-form. The exterior covariant derivative $D\theta$ is defined as follows:
        \begin{gather}
            D\theta(v_0,\ldots,v_k) := d\theta(v_0^H,\ldots,v_k^H)
        \end{gather}
        where $d$ is the exterior derivative \ref{forms:def:exterior_derivative} and $v_i^H$ is the projection of $v_i$ on the horizontal subspace $\text{Hor}(T_pP)$. From this definition it follows that the exterior covariant derivative $D\theta$ is a horizontal form \ref{forms:horizontal_form}.
    }
    \begin{remark}
        The exterior covariant derivative can also be defined for general vector-valued $k$-forms. This can be done by defining it component-wise with respect to a given basis. Afterwards one can prove that the choice of basis plays no role.

        For tensorial forms of type $(V,\rho)$ this is given by the following expression:
        \begin{gather}
            \label{diff:prin:derivative_horizontal_form}
            D\theta = d\theta + \omega\barwedge\theta
        \end{gather}
        where $\barwedge$ denotes the combination of the wedge product and the action $rho$.
    \end{remark}

    \begin{property}
        If $\Phi$ is an equivariant form then $D\Phi$ is a tensorial form.
    \end{property}

    \begin{formula}
        Using the Koszul connection on the tangent bundle $TP$ we can rewrite the action of the exterior covariant derivative as follows:
        \begin{gather}
            \begin{aligned}
                D\theta(v_0, ..., v_k) = \sum_i^k(-1)^i&\nabla_{v_i}\theta(v_0, ..., \hat{v}_i, ..., v_k)\\
                &+ \sum_{i<j}^k(-1)^{i+j}\theta([v_i, v_j], v_0, ..., \hat{v}_i, ..., \hat{v}_j, ..., v_k)
            \end{aligned}
        \end{gather}
        where as usual  $\hat{v}_i$ means that this vector is omitted. As an example we explicitly give the formula for a one-form $\Phi$:
        \begin{gather}
            D\Phi(X, Y) = \nabla_X(\Phi(Y)) - \nabla_Y(\Phi(X)) - \Phi([X, Y]).
        \end{gather}
        This formula should remind the reader of the analogous formula for the ordinary exterior derivative \ref{forms:k_form_exterior_derivative}.
    \end{formula}

    By property \ref{diff:prin:section_bijection} we can use the following construction to find an explicit expression for the covariant derivative on an associated vector bundle:
    \begin{construct}\index{covariant!derivative}
        Let $\prb$ be a principal bundle and let $P_V := P\times_G V$ be an associated vector bundle. Given a section $\sigma:M\rightarrow P_V$ we can construct a $G$-equivariant map $\phi:P\rightarrow V$ using formula \ref{diff:prin:section_bijection_phi}.

        The exterior covariant derivative of $\phi$ is given by formula \ref{diff:prin:derivative_horizontal_form}:
        \begin{gather}
            D\phi(X) = d\phi(X) + \omega\triangleright\phi(X)
        \end{gather}
        where $X\in T_pP$. Now, given an additional (local) section $\varphi:U\subseteq M\rightarrow P$, we can pull back this derivative to the base manifold $M$. This gives
        \begin{gather}
            (\varphi^*D\phi)(Y) = d(\varphi^*\phi)(Y) + \varphi^*\omega\triangleright\varphi^*\phi(Y)
        \end{gather}
        where $Y=\pi_*X\in T_mM$. After introducing the notations $S:=\varphi^*\phi$ and $\nabla_YS:=(\varphi^*D\phi)(Y)$ and remembering the definition of the Yang-Mills field \ref{diff:prin:yang_mills_field}, this becomes
        \begin{gather}
            \label{diff:prin:local_covariant_derivative}
            \nabla_YS = dS(Y) + \omega^U(Y)\triangleright S.
        \end{gather}
    \end{construct}
    \begin{example}
        Let $G=\text{GL}(\mathbb{R}^n)$. In local coordinates equation \ref{diff:prin:local_covariant_derivative} can be rewritten as follows:
        \begin{gather}
            (\nabla_YS)^i = \pderiv{S^i}{x^k}Y^k + \Gamma^i_{\ jk}S^jY^k.
        \end{gather}
        This is exactly the formula known from classic differential geometry and relativity.
    \end{example}

\subsection{Curvature}

    \newdef{Curvature}{\index{curvature}
        Let $\omega$ be a principal connection on a principal bundle $\prb$. The curvature $\Omega$ of $\omega$ is defined as the exterior covariant derivative $D\omega$.
    }
    \newdef{Flat connection}{\index{connection!flat}
        A principal connection $\omega$ is said to be flat if its curvature $\Omega$ vanishes everywhere.
    }
    \begin{example}
        Let $\omega_G$ be the Maurer-Cartan form on a Lie group $G$. Because the only horizontal vector field on the bundle $\prin{G}{G}{\{x\}}$ is the zero vector, the curvature of $\omega_G$ is 0. Hence the Maurer-Cartan form is a flat connection.
    \end{example}

    \begin{property}[Second Bianchi identity]\index{Bianchi identity}
        Let $\omega$ be a principal connection with curvature $\Omega$. The curvature is covariantly constant:
        \begin{gather}
            D\Omega = 0.
        \end{gather}
    \end{property}
    \begin{remark}
        One should pay attention to the fact that this result\mnote{\dbend} does not generalize to arbitrary differential forms. Only the exterior derivative satisfies the coboundary condition $d^2 \equiv 0$, the exterior covariant derivative does not.
    \end{remark}

    \newformula{Cartan structure equation}{\index{Cartan!structure equation}\label{cartan_structure_equation}
        Let $\omega$ be a principal connection and let $\Omega$ be its curvature form. The curvature can be expressed in terms of the connection as follows:
        \begin{gather}
            \Omega = d\omega + \frac{1}{2}[\omega\wedge\omega].
        \end{gather}
    }

    The following property is an immediate consequence of the Frobenius' integrability theorem \ref{manifolds:frobenius} and the fact that a connection vanishes on the horizontal subbundle:
    \begin{property}\index{integrable}
        Let $\omega$ be a principal connection. The associated horizontal distribution\footnote{See definition \ref{manifolds:distribution}.} \[p\mapsto\text{Hor}(T_pP)\] is integrable if and only if the connection $\omega$ is flat. However, the vertical distribution is always integrable.
    \end{property}

    Similar to definition \ref{diff:prin:yang_mills_field} we can also define the Yang-Mills field strength:
    \newdef{Yang-Mills field strength}{\index{Yang-Mills!field strength}
        Let $\prb$ be a principal bundle equipped with a principal connection $\omega$ and associated curvature $\Omega$. Given a local section $\sigma:U\subseteq M\rightarrow P$ we define the Yang-Mills field strength $F$ as the pullback $\sigma^*\Omega$.
    }

\subsection{Torsion}

    \newdef{Solder form}{\index{solder form}
        Let $\prb$ be a principal bundle and let $V$ be a $\dim M$-dimensional vector space equipped with a representation\footnote{In general this will be $V=\mathbb{R}^{\dim M}$ and $G=\text{GL}(n, \mathbb{R})$.} $\rho:G\rightarrow\text{GL}(V)$ such that $TM\cong P\times_G V$ as associated bundles. A solder(ing) form $\theta$ on $P$ is a tensorial one-form \ref{diff:tensorial_form} of type $(V, \rho)$.
    }

    \newdef{Torsion}{\index{torsion}
        Let $\prb$ be a principal bundle equipped with a principal connection $\omega$ and a solder form $\theta$. The torsion $\Theta$ is defined as the exterior covariant derivative $D\theta$.
    }

    \begin{formula}[Cartan structure equation]\index{Cartan!structure equation}
        Let $\omega$ be a principal connection, $\theta$ a solder form and $\Theta$ its torsion form.
        \begin{gather}
            \Theta = d\theta + \omega\barwedge\theta
        \end{gather}
        where the wedge product is defined analogously to \ref{forms:vector_valued_wedge} and \ref{forms:lie_algebra_valued_wedge} using the representation of $\mathfrak{g}$ on $V$ induced by the representation $\rho:G\rightarrow\text{GL}(V)$:
        \begin{gather}
            \omega\barwedge\theta(v, w) := \omega(v)\triangleright\theta(w) - \omega(w)\triangleright\theta(v).
        \end{gather}
    \end{formula}

    \begin{property}[First Bianchi identity]\index{Bianchi identity}
        Let $\omega$ be a principal connection, $\Omega$ its curvature, $\theta$ a solder form and $\Theta$ its torsion.
        \begin{gather}
            D\Theta = \Omega\barwedge\theta
        \end{gather}
    \end{property}

    \begin{property}\label{diff:prin:integrable_torsion_free}
        Consider a smooth manifold $M$ equipped with a $G$-structure. If this structure is integrable then it admits a torsion-free connection.
    \end{property}

\section{Characteristic classes}

    \newdef{Characteristic class}{\index{characteristic!class}
        Let $M$ be a smooth manifold. A characteristic class is a map\footnote{The coefficient ring is often assumed to be the base field ($\mathbb{R}$ or $\mathbb{C}$) but this is not always the case (e.g. Stiefel-Whitney classes).} from each isomorphism class of vector bundles or principal bundles $E\rightarrow M$ to a cohomology class $c(E)\in H^*(M)$ such that if there exists a morphism $f:N\rightarrow M$ then $c(f^*E) = f^*c(E)\in H^*(N)$.
    }
    Using the classification property \ref{diff:prin:classification} one can give a concise construction of characteristic classes in the case of principal bundles:
    \begin{construct}
        Consider a principal bundle $\prb$ with classifying map $\varphi\in[M, BG]$. For every $c\in H^*(BG)$ we define a characteristic class $c(P)\in H^*(M)$ as the pullback of $c$ under $\varphi$.
    \end{construct}

    As the definition implies, both vector bundles and principal bundles admit a theory of characteristic classes. However, in the literature most authors always focus on either one of them and hence it is not always easy to see which theorems can be translated and how to this if possible. The relation between the two theories is given by the associated bundle construction \ref{diff:prin:associated_bundle} (see \cite{sorensen} for more information). It can be shown that every vector bundle\footnote{In fact every fibre bundle, but we are not interested in the general case.} can be obtained as an associated bundle to its frame bundle. The characteristic classes of a vector bundle are then defined as the ones of its frame bundle. Because of this duality we will freely switch between the language of vector bundles and principal bundles, depending on where we want to apply the results.

    Because the statement of the ''splitting principle'' is quite different when given in the language of principal bundles or that of vector bundles, we will give it twice. First we need an additional construction:
    \newdef{Flag bundle}{
        Let $\bundle$ be vector bundle. Using the definition of the flag manifold \ref{linalgebra:flag_manifold} one can construct for every fibre $E_p, p\in M$ a space $Fl(E_p)$ that has the complete flags of $E_p$ as points (expressed as a sequence of one-dimensional subspaces). Using the bundle construction theorem we can then obtain the flag bundle $\pi_{Fl}:Fl(E)\rightarrow M$ that has the flag manifolds as fibres.
    }
    \begin{theorem}[Splitting principle]\index{splitting principle}
        Consider a vector bundle $\bundle$. Its flag bundle has the following properties:
        \begin{itemize}
            \item The pullback bundle $\pi_{Fl}^*E$ can be decomposed as a Whitney sum of line bundles.
            \item The induced cohomology map $\pi_{Fl}^*:H^*(M)\rightarrow H^*(Fl(E))$ is injective.
        \end{itemize}
    \end{theorem}
    For the following form of the splitting principle, see \cite{may_splitting, debray_characteristic}.
    \begin{theorem}[Splitting principle\footnotemark]
        \footnotetext{Sometimes called the \textbf{generalized splitting principle}.}
        Consider a principal bundle $\prin{G}{P}{M}$ where the structure group $G$ is compact. Every compact Lie group contains a maximal torus $T\cong\mathbb{T}^n$ where $\mathbb{T}$ is the standard 1-torus $S^1\cong\text{U}(1)$. The inclusion $\iota:T\hookrightarrow G$ induces a $G$-bundle\footnote{The total space $EG$ clearly admits a free $T$-action and hence $BT:=EG/T$ can serve as a classifying space for $T$.} $B\iota:BT\rightarrow BG$ with fibre $G/T$ and the pullback of $B\iota$ along the classifying map $p\in[M, BG]$ of $P$ defines another $G$-bundle $\rho:p^*B\iota\rightarrow M$ (also with fibre $G/T$). This fibre bundle has the following properties:
        \begin{itemize}
            \item $\rho^*p$ admits a reduction of the structure group to $T$ (see section \ref{section:G-structure} further below).
            \item The induced cohomology map $\rho^*:H^*(M)\rightarrow H^*(\rho^*P)$ is injective.
        \end{itemize}
    \end{theorem}
    Since $B\mathbb{T}^n\cong(B\mathbb{T})^n$ one can use the fibration $B\iota$ to pull any class $c\in H^*(BG)$ back to a tuple of classes in $H^*(B\text{U}(1))$. Hence every characteristic class of $\rho^*P$ is a tuple of characteristic classes of circle bundles. The injectivity of $\rho^*$ then implies that every characteristic class of $P$ can also be characterized by such a tuple.

    \begin{remark}
        The splitting principle allows us to prove general statements or formulas involving (polynomial) expressions in the characteristic classes only in the case of direct sums of line bundles.
    \end{remark}

\subsection{Chern-Weil theory}

    The characteristic classes of a vector bundle can be constructed from the connection and curvature forms on the vector bundle. This is done using a class of polynomials on the Lie algebra $\mathfrak{g}$ of the structure group.

    \newdef{Chern-Weil morphism}{\index{Chern-Weil}
        Let $\bundle$ be a vector bundle with connection one-form $A$ and curvature two-form $F$. There exists a morphism of algebras $K[\mathfrak{g}]^G\rightarrow H^*_{dR}(M):P\mapsto P(F)$ satisfying:
        \begin{itemize}
            \item $P(F)$ is closed.
            \item $P(F)$ pulls back uniquely to a (closed) form $\overline{P}(F) := \pi^* P(F)$ on $M$.
            \item $\overline{P}(F)$ does not depend on the connection $A$, i.e. for connections $A, A'$ the difference $\overline{P}(F_A) - \overline{P}(F_{A'})$ is exact.
        \end{itemize}
    }

\subsection{Complex bundles}

    In this section we only consider complex bundles such that their connection one-forms are $\mathfrak{u}(n)$-valued. (See chapter \ref{chapter:complex_geometry} for more information.)

    \newdef{Chern class}{\index{Chern!class}
        Consider a rank-$n$ vector bundle (or principal bundle) $\bundle$ with curvature two-form $F$. Using Chern-Weil theory we define the Chern classes $c_k(E)$ as follows
        \begin{gather}
            \det\left(1 + \frac{it}{2\pi}F\right) =: \sum_{k=1}^nc_k(E)t^k.
        \end{gather}
        The $i^{th}$ Chern class is a cohomology class in $H^{2i}(M)$.
    }

    \newdef{Chern polynomial}{
        Let $c_k(P)$ denote the $k^{th}$ Chern class of $P$. The Chern polynomial is defined as follows:
        \begin{gather}
            c_t(P) := \sum_{i=1}^\infty c_i(P)t^i.
        \end{gather}
        The total Chern class is recovered by taking $t=1$.
    }

    \begin{formula}[Whitney product formula\footnotemark]\index{Whitney!product formula}
        \footnotetext{Also called the \textbf{Whitney sum formula}.}
        The following equality holds for all bundles $P_1, P_2$:
        \begin{gather}
            c_t(P_1\oplus P_2) = c_t(P_1)c_t(P_2).
        \end{gather}
    \end{formula}
    \begin{result}[Chern root]\index{Chern!root}
        The product formula and the splitting principle imply that the Chern polynomial of any rank-$n$ vector bundle can be decomposed as follows:
        \begin{gather}
            c_t(E) = \prod_{i=1}^n(1+x_it)
        \end{gather}
        where, in the case of decomposable vector bundles $E\equiv\oplus_{i=1}^n L_i$, the $x_i$ are the first Chern classes $c_1(L_i)$. The factors $x_i$ are called the \textbf{Chern roots}.

        By working out the above formula we see that the coefficient in degree $k$, i.e. the $k^{th}$ Chern class, is given by the $k^{th}$ elementary symmetric polynomial:
        \begin{gather}
            c_k(E) = \sum_{i_1<\cdots<i_k}x_{i_1}\cdots x_{i_k}.
        \end{gather}
    \end{result}

    \newdef{Canonical class}{\index{canonical!class}
        Consider a smooth manifold $M$. The first Chern class of the canonical bundle $\bigwedge^nT^*M$ is called the canonical class of $M$.
    }
    \newdef{Theta characteristic}{\index{theta characteristic}
        Consider a smooth manifold $M$ together with its canonical class $K_M$. The theta characteristic, if it exists, is a characteristic class $\Theta$ such that $\Theta\cup\Theta=K_M$ where $\cup$ is the cup-product in cohomology (see formula \ref{forms:cup_product}).
    }

    After finding the Chern roots of a vector bundle, we can us them to define more advanced classes:
    \begin{construct}[Genus]\index{genus}
        Let $f\in K[[t]]$ be a formal power series with constant term 1. For any $k\in\mathbb{N}$ we can easily see that $f(x_1)\cdots f(x_k)$ is a symmetric power series (also with constant term 1). For every such $f$ we then define the $f$-genus by the formula\footnote{In the case that $E$ splits as a sum for line bundles then we simply obtain the product $f(x_1)\cdots f(x_k)$.}
        \begin{gather}
            G_f(E) := \det f\left(\frac{it}{2\pi}F\right).
        \end{gather}
        The coefficients of this power series induce characteristic classes in cohomology.
    \end{construct}

    \begin{example}[Chern class]
        The total Chern class is recovered as the genus of $f=1+x$.
    \end{example}

    The following genus is very important, especially in the context of the Atiyah-Singer index theorem (see further below):
    \begin{example}[Todd genus]\index{Todd!class}\index{Bernoulli!number}
        Consider the function
        \begin{gather}
            Q(x) := \frac{x}{1-e^{-x}} = 1 \frac{x}{2} + \sum_{i=1}^\infty\frac{(-1)^{i-1}B_i}{(2i)!}x^{2i}
        \end{gather}
        where $B_i$ is the $i^{th}$ \textit{Bernoulli number}. Let $\pi:E\rightarrow M$ be rank-$n$ vector bundle with curvature two-form $F$. If $x_i$ are the Chern roots of $E$ then the Todd class is defined as
        \begin{gather}
            \text{td}(E) := \prod_{i=1}^nQ(x_i).
        \end{gather}
        The characteristic function of the Todd genus is the unique power series with constant term 1 that has the property that for all $n\in\mathbb{N}$ the $n^{th}$ degree term in $f(x)^{n+1}$ has coefficient 1.
    \end{example}
    Another genus that is used in the context of the index theorems is the following one:
    \begin{example}[$\hat{A}$-genus\footnotemark]\label{diff:prin:a_roof_genus}
        \footnotetext{This is pronounced as \textit{A-roof genus}.}
        The $\hat{A}$-genus is defined through the following function:
        \begin{gather}
            Q(x) := \frac{\sqrt{x}/2}{\sinh(\sqrt{x}/2)} = 1 - \frac{x}{24} + \frac{7x^2}{5760} - \cdots.
        \end{gather}
    \end{example}

    ?? COMPLETE ??

\subsection{Real bundles}

    In the case of real vector bundles\footnote{Let us assume that they come equipped with a fibre metric, such that the connection one-form is $\mathfrak{o}(n)$-valued.} one can also define a set of characteristic classes.

    \newdef{Pontryagin class}{\index{Pontryagin!class}
        Consider a vector bundle $\bundle$. The Pontryagin classes of $E$ are defined as follows:
        \begin{gather}
            p_i(E) := (-1)^ic_{2i}(E^{\mathbb{C}})\in H^{4i}(M)
        \end{gather}
        where $E^{\mathbb{C}}$ is the complexification of $E$.
    }

    When the vector bundles in question are orientable we can further reduce the structure group to $\text{SO}(n)$ as explained in section \ref{section:G-structure} further below. If the rank is even then we can define the following characteristic class:
    \newdef{Euler class}{\index{Euler!class}
        Let $\bundle$ be an orientable vector bundle of rank $2k$. The Euler class of $E$ is defined as follows:
        \begin{gather}
            e(E) := p_k(E)\smile p_k(E).
        \end{gather}
    }
    \begin{property}
        Using the fact that we can write the total Pontryagin class using Chern-Weil theory as
        \begin{gather}
            p(E) = \det\left(1 - \frac{1}{2\pi}F\right)
        \end{gather}
        and that the determinant is the square of the Pfaffian, we can equivalently define the Euler class as follows:
        \begin{gather}
            e(E) := \text{Pf}\left(-\frac{1}{2\pi}F\right).
        \end{gather}
    \end{property}

\subsection{Cohomology of Lie groups}\index{cohomology!Lie group}

    Using the language of characteristic classes we can find a concise description of the (continuous) group cohomology of Lie groups. First of all we use the isomorphism between continuous group cohomology and cohomology of classifying spaces:
    \begin{gather}
        H^*(BG; \mathbb{Z})\cong H^*_c(G; \mathbb{Z}).
    \end{gather}

\section{Cartan connections}\label{section:cartan_geometry}

    In the first part of this section we will give a short overview of Klein's \textit{Erlangen program} which unifies (and generalizes) Euclidean and non-Euclidean geometries. In the second part of this section we will give Cartan's generalization in terms of bundle theory. A reference for this section is \cite{sharpe} (there the author also gives a definition of Cartan geometries using charts and atlases similar to the definition of smooth manifolds).

\subsection{Klein geometry}

    \newdef{Klein geometry}{\index{Klein!geometry}
        Consider a Lie group $G$ together with a closed subgroup $H$. The orbit space $G/H$ is called a Klein geometry (if it is connected). If the associated Lie algebras are denoted by $\mathfrak{g}, \mathfrak{h}$ then we call the pair $(\mathfrak{g}, \mathfrak{h})$ a \textbf{Klein pair}.\footnote{In fact one calls any pair $(\mathfrak{g}, \mathfrak{h}\leq\mathfrak{g})$ a Klein pair.} The group $G$ is called the \textbf{principal group}. If the principal space is also connected then the Klein geometry is said to be \textbf{geometrically oriented}.

        It is clear that every Klein geometry gives a homogeneous space and hence a principal bundle (of dimension $\dim(G)-\dim(H)$).
    }
    \newdef{Effective Klein pair}{
        The action of $G$ on $X\equiv G/H$ is not necessarily effective, i.e. the kernel of $\rho:G\rightarrow G/H$,
        \begin{gather}
            \text{ker}(\rho)=\{x\in G: g^{-1}xg\in H, \forall g\in G\},
        \end{gather}
        is not necessarily trivial. If it is, we call the Klein geometry effective. In terms of the associated Klein pair this means that $\mathfrak{h}$ contains no nontrivial ideals of $\mathfrak{g}$. A Klein geometry is said to be locally effective if the kernel is discrete.
    }
    \newdef{Reductive Klein pair}{
        A Klein pair $(\mathfrak{g}, \mathfrak{h})$ is said to be reductive if $\mathfrak{g}$ admits a decomposition of the form
        \begin{gather}
            \mathfrak{g} = \mathfrak{h} + \mathfrak{m}
        \end{gather}
        where $\mathfrak{m}$ is an $\text{Ad}_H$-module.
    }

    Some examples are in order:
    \begin{example}[Euclidean space]
        Consider the Euclidean space $\mathbb{R}^n$. Now, consider the Euclidean group $\text{Euc}(n)\equiv\mathbb{R}^n\rtimes\text{O}(n)$, i.e. the symmetry group of the Euclidean space. This group clearly acts transitively and, furthermore, the subgroup $\text{O}(n)$ can be seen to leave the origin fixed. We conclude that $\mathbb{R}^n$ is a homogenous space and even a Klein geometry of the form $\text{Euc}(n)/\text{O}(n)$.
    \end{example}

    An extension of Klein geometries is given by the following concept:
    \newdef{Model geometry}{\index{model!geometry}
        A model geometry consists of the following data:
        \begin{enumerate}
            \item an effective Klein pair $(\mathfrak{g},\mathfrak{h})$,
            \item a Lie group $H$ such that $\text{Lie}(H)=\mathfrak{h}$, and
            \item a representation $\text{Ad}:H\rightarrow\text{Aut}(\mathfrak{g})$ that restricts to the adjoint representation $\text{Ad}_H:H\rightarrow\text{Aut}(\mathfrak{h})$.
        \end{enumerate}
    }

    \newdef{Local Klein geometry}{
        A local Klein geometry consists of the following data:
        \begin{enumerate}
            \item a Lie group $G$,
            \item a closed subgroup $H\subset G$, and
            \item a subgroup $\Gamma\subset G$ acting by covering transformations on $G/H$ such that the left coset space $\Gamma\backslash G/H$ is connected.
        \end{enumerate}
    }

\subsection{Cartan geometry}

    The definition of a Klein geometry can be rephrased in the language of bundle theory. First we will give an alternative characterization of Lie groups in terms of the Maurer-Cartan connection:
    \begin{property}[Lie group]\index{complete!connection}
        Let $M$ be a smooth manifold and let $\mathfrak{g}$ be a Lie algebra. Assume that $M$ comes equipped with a $\mathfrak{g}$-valued one-form $\omega$ satisfying the following conditions:
        \begin{enumerate}
            \item \textbf{Maurer-Cartan equation}: $d\omega + \frac{1}{2}[\omega,\omega]=0$,
            \item \textbf{Soldering}: $\omega$ restricts to an isomorphism on every fibre, and
            \item \textbf{Completeness}: $\omega$ is complete, i.e. every vector field that maps constantly to $\mathfrak{g}$ complete.
        \end{enumerate}
        The universal cover $p:\widetilde{G}\rightarrow M$ has the structure of a $G$-torsor, where $G$ is a Lie group with Lie algebra $\mathfrak{g}$. Furthermore, the pullback $p^*\omega$ coincides with the Maurer-Cartan form on $G$.
    \end{property}

    In a similar way we can characterize Klein geometries as follows:
    \begin{property}
        The bundle $\pi:P\rightarrow M$ of a Klein geometry $G/H$ admits a one-form $\omega:TP\rightarrow\mathfrak{g}$ that satisfies the following conditions:
        \begin{enumerate}
            \item $\omega$ restricts to a linear isomorphism on each fibre.
            \item $\omega$ is $H$-equivariant: $R_h^*\omega = \text{Ad}(h^{-1})\omega$.
            \item $\omega$ cancels $\mathfrak{h}$-fundamental vector fields: $\omega(A^\#)=A$ for all $A\in\mathfrak{h}$.
            \item $\omega$ satisfies the Maurer-Cartan equation.
            \item $\omega$ is complete.
        \end{enumerate}
    \end{property}
    The second and third conditions show that $\omega$ defined as connection on $G/H$, while the fourth condition states that connection is flat. (It should be clear that this defining one-form is exactly the Maurer-Cartan form on $G$, where conditions 3 and 4 are obtained by restricting to the subgroup $H\subset G$.)

    By dropping the flatness and completeness conditions we obtain the notion of Cartan connections:
    \newdef{Cartan geometry}{\index{Cartan!geometry}
        Consider a principal $H$-bundle $\pi:P\rightarrow M$ that we are given a Lie algebra $\mathfrak{g}$ such that $\text{Lie}(H)=\mathfrak{h}\leq\mathfrak{g}$ (in general we will asumme these to be given by a model geometry). A Cartan geometry is defined by a one-form $\omega:TP\rightarrow\mathfrak{g}$ satisfying the following conditions:
        \begin{enumerate}
            \item $\omega$ restrict to an isomorphism on each fibre.
            \item $\omega$ is $H$-equivariant.
            \item $\omega$ cancels $\mathfrak{h}$-fundamental vector fields: $\omega(A^\#)=A$ for all $A\in\mathfrak{h}$.
        \end{enumerate}
        The form $\omega$ is called the Cartan connection.
    }
    \newdef{Curvature}{\index{curvature}
        By analogy with the Maurer-Cartan condition and the Cartan structure equation \ref{cartan_structure_equation} we define the curvature of a Cartan connection as follows:
        \begin{gather}
            \Omega := d\omega + \frac{1}{2}[\omega\wedge\omega].
        \end{gather}
    }

    If we restrict to reductive model spaces then we obtain an important decomposition of the Cartan connection.
    \begin{property}
        Consider a Cartan geometry $\pi:P\rightarrow M$ with a reductive model space $(\mathfrak{g}, \mathfrak{h})$ such that the Cartan connection can be decomposed as $\omega=\omega_{\mathfrak{h}}+\omega_{\mathfrak{m}}$. This decomposition has the following important properties:
        \begin{itemize}
            \item The form $\omega_{\mathfrak{h}}$ defines a principal connection on the Cartan geometry $P$.
            \item The form $\omega_{\mathfrak{m}}$ defines a soldering of $M$.
            \item The decomposition of the associated curvature form $\Omega$ gives the curvature and torsion of the induced principal connection and solder forms respectively.
        \end{itemize}
        Furthermore, the Cartan geometry $\pi:P\rightarrow M$ gives a reduction of the frame bundle $FM$ (induced by the solder form $\omega_{\mathfrak{m}}$).
    \end{property}
    ?? COMPLETE ??

\section{Reduction of the structure group}\label{section:G-structure}

    \newdef{Reduction}{\index{reduction}
        Consider a principal bundle $\prin{G}{P}{M}$ and let $H$ be a subgroup of $G$. If the transition functions of $P$ can be chosen to take values in $H$, we say that the structure group $G$ can be reduced to $H$.

        More generally, a principal bundle $\prin{H}{\widetilde{P}}{M}$ with structure group $H$ is an $H$-reduction of $P$ if there exists a vertical bundle morphism $\widetilde{P}\rightarrow P$. This allows for morphisms besides inclusions, such as covering maps $\lambda:H\rightarrow G$. (See for example the definition of spinor bundles in section \ref{section:spinor_bundles}.) As such the name ''reduction'' is not the best choice of terminology. For covering maps the term \textbf{lift(ing)} is sometimes used.
    }

    \newdef{$G$-structure}{\index{G!structure}
        Consider a manifold $M$. A $G$-structure on $M$ is the reduction of the structure group GL$(n)$ of the frame bundle $F(M)$ to the group $\iota:G\rightarrow\text{GL}(n)$.
    }
    \newdef{Integrability}{\index{integrable!$G$-structure}
        Consider a $G$-structure $\prin{G}{\widetilde{P}}{M}$. It is said to be integrable if for every point $m\in M$ there exists a chart $U\ni m$ such that the associated holonomic frame $\{\partial_i\}_{i\leq\dim(M)}$ induces a local section of $P$.
    }

    \begin{example}[Orientable manifold]\label{diff:orientable_structure}\index{orientation}
        An $n$-dimensional manifold is orientable if and only if the structure group can be reduced to $\text{GL}^+(n)$, the group of invertible matrices with positive determinant. Furthermore, this structure is always integrable if it exists.
    \end{example}
    \begin{example}[Riemannian manifold]
        An $\text{O}(n)$-structure turns $M$ into a Riemannian manifold \ref{riemann:riemannian_manifold}. Because the cotangent bundle $T^*M$ transforms under the contragredient representation\footnote{which coincides with the regular representation in the case of $\text{O}(n)$} of the transition maps of the tangent bundle $TM$, these two bundles are equivalent. The isomorphism is given by the musical isomorphism(s) \ref{riemann:musical_isomorphisms}.
    \end{example}

    The following property gives a classification of reductions in terms of equivariant morphisms:
    \begin{property}\label{diff:prin:reduction_classification}
        Consider a principal $G$-bundle $P$ and let $F$ be a space that admits a transitive action $\varphi:G\rightarrow\text{Aut}(F)$. For every $f\in F$ and every equivariant morphism $\psi:P\rightarrow F$, there exists a reduction of $G$ to the isotropy subgroup $G_f$ defined by
        \begin{gather}
            P_f := \{p\in P:\psi(p) = f\}.
        \end{gather}
        We can generalize this definition to arbitrary Lie group actions by restricting to the equivariant morphisms that take value in a single orbit.\footnote{Since transitive actions have a unique orbit this is a well-defined generalization.} Furthermore, we can restrict to the case where $F$ is a vector space without loss of generality (at least in the finite-dimensional case).
    \end{property}

    \newdef{Reducible connection}{\index{connection!reducible}\label{diff:prin:reducible_connection}
        Consider a principal $G$-bundle $P$ equipped with a connection one-form $\omega$. If a bundle map $F$ induces an $H$-reduction of $P$, then the connection $\omega$ is said to be reducible (and to be compactible with the given reduction) if $F^*\omega$ takes values in $\mathfrak{h}$.
    }
    \begin{property}\label{diff:prin:connection_reducibility}
        Consider a principal bundle $P$ together with a reduction $P_f$ induced by an equivariant morphism $\psi:P\rightarrow F$ (where $f\in F$). A principal connection on $P$ is reducible to $P_f$ if and only if $\psi$ is parallel with respect to this connection, i.e. $D\psi = 0$.
    \end{property}

    The following two properties characterize bundle reductions in terms of holonomy bundles:
    \begin{property}[Holonomy bundles and reductions]
        The holonomy bundle $H(p)$ is a reduction of $P$. Furthermore, the connection $\omega$ is reducible to $H(p)$ and one can prove that this reduction is minimal, i.e. there exists no further reduction of $H(p)$ (and hence of $\omega$).
    \end{property}
    \begin{result}\label{diff:prin:reducible_holonomy}
        From the above construction and property we can conclude that a principal bundle (and any associated connection) is irreducible to a subgroup of the structure group\footnote{Lifts as in the case of Spin-structures do not fall under the holonomy classification.} if and only if it is equivalent to its holonomy bundle.
    \end{result}
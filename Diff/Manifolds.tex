\chapter{Manifolds}\label{chapter:manifolds}

References for this chapter (and Part \ref{part:diffgeom} in general) are \cite{AMP1, AMP2, diffgeom_physics, kms, sen_nash, schuller}.

\section{Charts}

    \newdef{Chart}{\index{chart}\label{diff:chart}
        Consider a topological space  $M$ and consider an open subset of $U\subseteq M$ such that there exists a homeomorphism $\varphi:U\rightarrow O$, where $O$ is an open subset of $\mathbb{R}^n$. The pair $(U,\varphi)$ is called a chart on $M$.
    }
    \newdef{Transition map}{
        Let $(U_1,\varphi_1)$ and $(U_2,\varphi_2)$ be two charts on $M$. The mapping $\varphi_1^{-1}\circ\varphi_2$, defined on the intersection $U_1\cap U_2$, is called the transition map between the charts.

        If $\varphi_1^{-1}\circ\varphi_2$ is continuous, the charts are said to be $C^0$-compatible. However, because the composition of any two continuous functions is also continuous, every two charts on a topological space are automatically $C^0$-compatible.
    }

    \newdef{Atlas}{\index{atlas}
        Let $M$ be a topological space and let $\{(U_i,\varphi_i)\}_{i}$ be a collection of pairwise compatible charts covering $M$. This collection of charts is called an atlas on $M$. From the above remark on $C^0$-compatibility it follows that every atlas is a $C^0$-atlas. By requiring the transition functions to satisfy additional conditions, other types of atlases can be defined.
    }
    \newdef{Maximal atlas}{\index{compatible}
        Let $\mathcal{A}_1$ and $\mathcal{A}_2$ be two atlases on the same topological space. If $\mathcal{A}_1\cup\mathcal{A}_2=\mathcal{A}$ is again an atlas, the atlases are said to be \textbf{equivalent} or \textbf{compatible}. A maximal union of compatible atlases is called a maximal atlas.
    }

    \newdef{Manifold}{\index{manifold}
        A topological space equipped with a maximal $C^0$-atlas is called a \textbf{topological} manifold. An alternative definition (often used in topology) is that of a locally Euclidean Hausdorff space. The topology is generated by the collection of charts.
    }
    \begin{remark*}\index{smooth!manifold}\index{PL manifold}
        \nomenclature[S_Man]{$\textbf{Man}^p$}{category of $C^p$-manifolds}
        \nomenclature[S_Diff]{$\textbf{Diff}$}{category of smooth manifolds}
        In the literature second-countability is often added to the definition of a topological manifold. This ensures that the space has (among others) the property of paracompactness \ref{topology:paracompact} and, hence, lends itself to the construction of partitions of unity (which are for example necessary for the introduction of integration theory as in Section \ref{section:integration_manifolds}).

        For an alternative definition of manifolds in the context of \textit{smooth spaces} see Section \ref{section:smooth_spaces}.

        If all transition maps are $C^k$-diffeomorphisms, the manifold is called a $C^k$-manifold. The limiting case, a $C^\infty$-manifold, is also called a \textbf{smooth manifold}. If the transition maps are not only smooth, but even analytic \ref{calculus:analytic}, the manifold is called an \textbf{analytic} or $C^\omega$-manifold. A topological manifold equipped with a maximal atlas for which the transition maps are piecewise linear is called a \textbf{PL manifold}.
    \end{remark*}

    \newdef{\difficult{Structure sheaf}}{\index{structure!sheaf}
        Let $M$ be a $C^k$-manifold. The structure sheaf $\mathcal{O}_M$ is defined as the sheaf \ref{sheaf:def} that assigns to every open set $U\subseteq M$ the set of $C^k$-functions $f:U\rightarrow\mathbb{R}$.

        Generally, one can define for all $j\leq k$ the sheaf $\mathcal{O}^j_M$ as the sheaf that assigns to every open set $U\subseteq M$ the set of $C^j$-functions $f:U\rightarrow\mathbb{R}$.

        From the ``sheafy'' point of view one can equivalently define a smooth manifold as a locally ringed space \ref{sheaf:locally_ringed_space} that is locally isomorphic to $\mathbb{R}^n$ equipped with its standard space of differentiable functions. (This is an extension of the algebro-geometric constructions from Sections \ref{section:varieties} and \ref{section:schemes}.)
    }

    \begin{theorem}[Whitney]\index{Whitney}
        Every $C^k$-atlas on a paracompact space contains a $C^\infty$-atlas. Furthermore, two $C^k$-atlases are equal if and only if they contain the same $C^\infty$-atlas. It follows that every differentiable manifold is automatically smooth.
    \end{theorem}

    \begin{theorem}[Rad\'o-Moise]\index{Rad\'o-Moise}\label{diff:rado_moise}
        In dimensions $1,2$ and $3$ there exists for every topological manifold a unique smooth structure.
    \end{theorem}
    \begin{theorem}
        For dimensions higher than $4$ there exist only finitely many distinct smooth structures on compact manifolds. In fact, for \textit{PL} manifolds the number of smooth structures is fixed for each dimension (except for $4$).
    \end{theorem}
    \sremark{In dimension 4 there only exist partial results. For noncompact manifolds there uncountably many distinct smooth structures exist, while for compact manifolds no complete characterization has been found.}

    \newdef{Smooth function}{\index{smooth!function}\index{local!representation}\label{manifolds:smooth_function}
        Let $f:M\rightarrow N$ be a function between two smooth manifolds. It is said to be smooth if there exist charts $(U,\varphi)$ and $(V,\psi)$ for $M$ and $N$ with $f(U)\subseteq V$ such that the function
        \begin{gather}
            \label{diff:local_representation}
            f_{\varphi\psi} = \psi\circ f\circ\varphi^{-1}
        \end{gather}
        is smooth on $\mathbb{R}^n$. This function is called a \textbf{local representation} of $f$.
    }

    \newdef{Diffeomorphism}{\index{diffeomorphism}\label{diff:diffeomorphism}
        A homeomorphism $f$ such that both $f$ and $f^{-1}$ are smooth.
    }

    \begin{notation}
        \nomenclature[S_Cinfty]{$C^\infty_p(M)$}{ring of smooth functions $f:M\rightarrow\mathbb{R}$ on a neighbourhood of $p\in M$}
        The set of all $C^\infty$-functions on a manifold $M$, defined on a neighbourhood of $p\in M$, is denoted by $C^\infty_p(M)$. This set forms a commutative ring when equipped with the usual sum and product (composition) of functions.
    \end{notation}

    \remark{Depending on the choice of chart one can define other types of functions in the same way, e.g. $C^k$-functions or piecewise linear functions.}

    \newdef{Differentiably good cover}{\index{cover}\index{finite!type}\label{diff:good_cover}
        A good cover \ref{topology:good_cover} for which the intersections are diffeomorphic to $\mathbb{R}^n$ for some $n\in\mathbb{N}$.

        If a manifold admits a finite (differentiably) good cover, it is said to be of \textbf{finite type}.
    }

    \begin{property}
        Every paracompact smooth manifold admits a (differentiably) good cover. Furthermore, if the manifold is compact, it admits a finite good cover.
    \end{property}

\section{Tangent vectors}\label{section:tangent_space}

    \newdef{Tangent vector}{\index{tangent!vector}\index{derivation}\label{diff:derivation}
        Let $M$ be a smooth manifold and consider a point $p\in M$. A tangent vector to $M$ at $p$ is a differential operator on the germs of smooth functions at $p$, i.e. a map $v_p:C^\infty_p(M)\rightarrow\mathbb{R}$ satisfying the properties
        \begin{enumerate}
            \item \textbf{Linearity}: $v_p(\lambda f+g) = \lambda v_p(f) + v_p(g)$, and
            \item \textbf{Leibniz property}: $v_p(fg) = f(p)v_p(g) + g(p)v_p(f)$
        \end{enumerate}
        for all $f,g\in C^\infty_p(M)$ and $\lambda\in\mathbb{R}$. Maps with these properties are also called \textbf{derivations}\footnote{More generally, every operation that satisfies the Leibniz property is called a derivation.}.
    }
    \begin{property}[Constant functions]
        Constant functions $c:p\mapsto c$ lie in the kernel of all tangent vectors:
        \begin{gather}
            v_p(c)=0.
        \end{gather}
    \end{property}

    \newdef{Tangent space}{\index{tangent!space}\index{basis}\label{diff:tangent_vector_partial}
        The set of all tangent vectors at a point $p\in M$ admits the structure of a vector space $T_pM$. A canonical choice of basis vectors is given by
        \begin{gather}
            \left.\ds\pderiv{}{x^i}\right|_{p}:C^\infty_p(M)\rightarrow\mathbb{R}:f\mapsto\pderiv{}{x^i}\left(f\circ\varphi^{-1}\right)(\varphi(p)),
        \end{gather}
        where $(U,\varphi)$ is a coordinate chart such that $p\in U$ with local coordinates $(x^1,\ldots,x^n)$. The above basis vector are also often denoted by $\partial_i$.
    }
    Due to the explicit dependence of the tangent vectors on the point $p\in M$, it is clear that for curved manifolds the tangent spaces belonging to different points are not the same. However, they are related through the following property:
    \begin{property}
        For a smooth connected manifold, the tangent spaces satisfy
        \begin{gather}
            \dim(T_p M)=\dim(M)
        \end{gather}
        for all $p\in M$. Theorem \ref{linalgebra:dimension_isomorphism} then implies that the tangent spaces over two distinct points $p,q\in M$ are isomorphic. A way to relate distinct tangent spaces will be presented in Sections \ref{section:linear_connections} and \ref{section:covariant_derivatives}.
    \end{property}

    \newadef{Tangent space $\dag$}{\label{diff:alternative_definition}
        Let $(U,\varphi)$ be a chart around the point $p\in M$. Two smooth curves $\gamma_1,\gamma_2$ through $p\in M$ are said to be tangent at $p$ if their local representations are tangent at 0:
        \begin{gather}
            \label{diff:equal_derivative}
            \deriv{(\varphi\circ\gamma_1)}{t}(0) = \deriv{(\varphi\circ\gamma_2)}{t}(0).
        \end{gather}
        This defines an equivalence relation\footnote{The relation is well-defined because the transition maps (and their Jacobian matrices) are invertible and thus nonsingular.} on the set of smooth curves through $p$. The tangent space at $p$ is then defined as the set of equivalence classes of tangent curves through $p$. These equivalence classes can be explicitly constructed as follows. The tangent vector to the curve $c(t)$ through $p$ is defined by the following formula:
        \begin{gather}
            v_p(f) := \left.\deriv{(f\circ c)}{t}\right|_{t=0}.
        \end{gather}
        Applying the chain rule gives
        \begin{gather}
            \label{diff:tangent_vector_chain_rule}
            v_p(f) = \pderiv{(f\circ\varphi^{-1})}{x^i}(\varphi(p))\deriv{x^i}{t}(0),
        \end{gather}
        where $x^i:=(\varphi\circ c)^i$. The first factor depends only on the point $p$, while the second factor is equal for all tangent curves through $p$. It is thus clear that curves satisfying equation \eqref{diff:equal_derivative} define the same tangent vector.
    }

\section{Submanifolds}
\subsection{Immersions and submersions}

    In this section the tangent map induced by a smooth function $f:M\rightarrow N$ is denoted by $T_pf:T_pM\rightarrow T_{f(p)}N$. A formal definition is given in equation \eqref{diff:T_function}. For now this will be the map that is locally represented by the Jacobian of $f$.

    \newdef{Immersion}{\index{immersion}
        A differentiable function $f:M\rightarrow N$ between smooth manifoldsfor which the derivative is everywhere injective or, equivalently, such that its derivative has maximal rank everywhere:
        \begin{gather}
            \text{rk}(T_pf)=\dim(M)\qquad\qquad\forall p\in M.
        \end{gather}
    }

    \newdef{Critical point}{\index{critical!point}\label{diff:nondegenerate_critical_point}
        A point $p\in\dom(f)$ is said to be critical if the rank of the Jacobian $T_pf$ is not maximal. The image of a critical point is called a \textbf{critical value}.

        At a critical point $p\in M$ the Hessian of $f$ gives a well-defined quadratic form. A critical point is said to be \textbf{nondegenerate} if the Hessian is nonsingular there.
    }
    \begin{property}[Criticality]\label{diff:critical_point}
        A point $p\in\dom(f)$ is critical if and only if there exists a chart $(U,\varphi)$ containing $p$ for which $\partial_if(p)=0$.
    \end{property}
    \begin{theorem}[Sard]\index{Sard}
        Consider a differentiable function $\psi:M\rightarrow N$, where $\dim M=m$ and $\dim N=n$ and let $k_0 = \max\{1, m-n+1\}$. If $\psi$ is of class $C^k$, with $k\geq k_0$, the set of critical values of $\psi$ has Lebesgue measure 0.
    \end{theorem}

    \newdef{Regular point}{
        A regular point of $f$ is a point $p\in M$ such that $T_pf$ is surjective.
    }
    \newdef{Regular value}{\index{regular!value}
        Let $f:M\rightarrow N$ be a differentiable function between smooth manifolds. A point $y\in N$ is called a \textbf{regular value} if every point in the preimage $f^{-1}(y)$ is a regular point or, equivalently, if it is not a critical value.
    }

    \begin{result}\label{diff:regular_point}
        It follows from Property \ref{diff:critical_point} that a point $p\in\dom(f)$ is regular if and only if $\partial_if(p)\neq0$ for all charts $(U,\varphi)$ containing $p$.
    \end{result}

    \newdef{Submersion}{\index{submersion}\label{diff:submersion}
        A differentiable function $f:M\rightarrow N$ between smooth manifolds such that all $p\in M$ are regular or, equivalently, such that
        \begin{gather}
            \text{rk}(T_pf)=\dim(N)\qquad\qquad\forall p\in M.
        \end{gather}
    }

    \newdef{Embedding}{\index{embedding}
        A differentiable function between smooth manifolds that is both an immersion and an embedding in the topological sense \ref{topology:embedding}. This implies that the submanifold topology coincides with the subspace topology \ref{topology:relative_topology}.
    }

\subsection{Submanifolds}

    \newdef{Embedded submanifold}{
        Let $M$ be a manifold. A smooth manifold $N$ is called an embedded or \textbf{regular submanifold} (of $M$) if there exists an embedding $f:M\hookrightarrow N$.
    }

    \newdef{Slice}{\index{slice}
        Consider two positive integers $m<n$. The space $\mathbb{R}^m$ can be canonically identified with a subspace of $\mathbb{R}^n$ as follows:
        \begin{gather}
            \mathbb{R}^m\cong\mathbb{R}^m\times\{0,\ldots, 0\}\hookrightarrow\mathbb{R}^m\times\mathbb{R}^{n-m}\cong\mathbb{R}^n,
        \end{gather}
        Subspaces obtained in this way, i.e. by setting a number of coordinates equal to 0 (or any other constant), are called slices.
    }
    \begin{adefinition}[Embedded submanifold]
        A subset of $M$ such that there exists a positive integer $k$ and such that for every point $p\in N$ there exists a chart $(U,\varphi)$ that satisfies
        \begin{gather}
            \varphi(U\cap N) = \varphi(U) \cap (\mathbb{R}^k\times\{\underbrace{0,\ldots,0}_{\text{dim}(M)-k}\}).
        \end{gather}
        The set $U\cap N$ is called a \textbf{slice} of $(U,\varphi)$ in analogy with the previous definition of a (standard) slice.
    \end{adefinition}

    \newdef{Immersed submanifold}{
        Let $M,N$ be smooth manifolds. $N$ is said to be an immersed submanifold of $M$ if there exists an immersion $i:N\hookrightarrow M$. Locally every immersed submanifold looks like a regular submanifold. Globally, however, the topology does not have to coincide with the subspace topology.
    }

    \begin{theorem}[Submersion theorem\footnotemark]\index{submersion!theorem}
        \footnotetext{Also called the \textbf{regular value theorem}.}
        Consider a smooth map $f:M_1\rightarrow M_2$ between smooth manifolds and let $y\in M_2$ be a regular value. Then $N=f^{-1}(y)$ is a submanifold of $M_1$ with codimension $\dim(M_2)$.
    \end{theorem}

    \newdef{Closed embedded manifold}{
        Let $N$ be an immersed submanifold of $M$. If the inclusion map $i:N\hookrightarrow M$ is closed (or, equivalently, proper), $N$ is in fact an embedded submanifold. It is called a closed embedded manifold.
    }

    \begin{example}[Stiefel manifold]\index{Stiefel!manifold}
        Let $V$ be an inner product space (Section \ref{linalgebra:innerproduct}) over a field $K$. The set of orthonormal $k$-frames can be embedded in $K^{n\times k}$. It is a compact embedded submanifold, called the Stiefel manifold of $k$-frames over $V$.
    \end{example}

    \newdef{Transversal intersection}{\index{transversality}
        Consider a smooth manifold $M$. Two submanifolds $X,Y\subset M$ are said to be transversal (or to intersect transversally) if at each intersection point $p$ the following relation holds:
        \begin{gather}
            T_pX + T_pY = T_pM.
        \end{gather}
        If the dimensions of $X$ and $Y$ are complementary (in $M$), the sum becomes a direct sum. If two submanifolds do not intersect at all, they are vacuously\mnote{\dbend} transversal (independent of their dimension).
    }
    \begin{property}[Codimension]
        The codimension of transversal intersections is equal to the sum of the codimensions of the intersecting submanifolds. It follows that if the submanifolds have complementary dimensions, the intersection consists of isolated points.
    \end{property}

\section{Manifolds with boundary}\label{section:manifold_boundary}

    \newdef{Manifold with boundary}{\index{boundary}\index{interior}
        Let $\mathbb{H}^n$ denote the upper half space:
        \begin{gather}
            \label{diff:upper_half_space}
            \mathbb{H}^n:=\mathbb{R}^{n-1}\times\mathbb{R}^+= \{(x_1,\ldots,x_n)\in\mathbb{R}^n\mid x_n \geq 0\}.
        \end{gather}
        An $n$-dimensional manifold with boundary is defined as a topological space $M$ equipped with a maximal atlas consisting of (regular) charts $(U,\varphi)$ such that $U$ is diffeomorphic to $\mathbb{R}^n$ (these points are called \textbf{interior points}) and \textbf{boundary charts} $(V,\phi)$ such that $V$ is diffeomorphic to $\mathbb{H}^n$ (these points are called \textbf{boundary points}).
    }
    \begin{remark}[Boundary]
        The boundary $\partial M$, consisting of all boundary points of $M$ as defined in the above definition, should not be confused with the topological boundary of $M$. In general these are different sets. Similarly, the interior $\text{Int}(M) = M \backslash\partial M$, in the sense of manifolds, should not be confused with the topological interior.
    \end{remark}

    \begin{property}
        Let $M$ be an $n$-dimensional manifold with boundary and let $(U,\varphi)$ be a chart for $p\in\partial M$.
        \begin{gather}
            \varphi(p) \in \partial\mathbb{H}^n = \{(x_1,\ldots,x_n)\in\mathbb{R}^n\mid x_n=0\}
        \end{gather}
    \end{property}

    \newdef{Manifold with corners}{
        Analogous to the definition of a manifold with boundaries one can define a manifold with corners using \textbf{corner charts} of the form \[\varphi:U\rightarrow\mathbb{R}^k\times(\mathbb{R}^+)^l.\] In contrast to the case of manifolds with boundary one does need to add an extra requirement when working with higher order corners. For every two charts $(U,\varphi)$ and $(V,\psi)$ the transition function should preserve the corners: \[\varphi\circ\psi^{-1}(V\cap \{0\}\times\mathbb{R}^k) \subset \{0\}\times\mathbb{R}^k.\]
    }
    \begin{remark}
        In the topological setting every manifold with corners (even higher order ones) is homeomorphic to a manifold with boundary. However, when working with smooth structures this result fails. There exists no such diffeomorphism and accordingly one has to make a distinction between the type of corners.
    \end{remark}

\subsection{\difficult{Cobordisms}}

    \newdef{Cobordism}{\index{cobordism}\label{diff:cobordism}
        Two manifolds $X, Y$ are said to be \textbf{(co)bordant} if there exists a manifold with boundary $M$ such that $\partial M = X\sqcup Y$. The manifold $M$ is said to be a (co)bordism between $X$ and $Y$.
    }
    \sremark{In the category of oriented manifolds one can also define a cobordism, but there the manifolds $X, Y$ should respect the orientation of $\partial M$.}

    \newdef{Cobordism group}{
        Under the operation of disjoint union the closed $n$-dimensional manifolds, modulo cobordisms, form a commutative group $\Omega_n$. Under Cartesian products these match together to form a commutative graded ring $\Omega=\bigoplus_{n=0}^\infty\Omega_n$.
    }

    ?? COMPLETE ??

\section{Morse theory}
\subsection{Morse functions}

    \newdef{Morse function}{\index{Morse!function}\label{diff:morse_function}
        Let $M$ be a smooth manifold. A smooth function is called a Morse function if it has no degenerate critical points \ref{diff:nondegenerate_critical_point}.
    }

    \begin{property}[Density]
        The set of Morse functions is open and dense in the $C^2$-topology (see Section \ref{section:jet_bundles} on jet spaces).
    \end{property}

    \newdef{Morse index}{\index{index}
        Consider a Morse function $f\in C^\infty(M)$. The number of negative eigenvalues at a critical point $p\in M$ is called the (Morse) index of $f$ at $p$. This is often denoted by $\lambda_p(f)$.

        To any Morse function one can associate a series called the \textbf{Morse counting-series}:
        \begin{gather}
            M_t(f) := \sum_{p\in\text{crit}(f)}t^{\lambda_p(f)}.
        \end{gather}
        If $M$ is compact, the nondegeneracy condition implies that the above sum only has a finite number of terms.
    }

    \begin{property}[Morse lemma]\index{Morse!lemma}
        Consider a Morse function $f:M\rightarrow\mathbb{R}$ and let $p\in M$ be a nondegenerate critical point of $f$. There exists a chart $(U,x_1,\ldots,x_n)$ around $p$ such that $x_i(p)=0$ and
        \begin{gather}
            f|_U(x) = f(p) - x_1^2-\cdots + x_k^2+\cdots,
        \end{gather}
        where $k$ is the Morse index of $f$.
    \end{property}
    \begin{result}
        The critical points of a Morse function are isolated.
    \end{result}

    ?? COMPLETE ??

\subsection{Morse-Bott functions}

    By the Morse lemma, the critical points of a Morse function are isolated. When this condition is relaxed, a more general class of functions is obtained (it is assumed that $M$ comes equipped with a covariant derivative):
    \newdef{Morse-Bott function}{\index{Morse-Bott function}
        A smooth function $f:M\rightarrow\mathbb{R}$ for which the critical set $\text{Crit}(f)$ is a submanifold of $M$ and at every point $p\in\text{Crit}(f)$ the tangent space is the kernel of the Hessian of $f$, i.e. its Hessian is nondegenerate in the normal directions at every critical point.
    }

\section{\difficult{Surgery theory}}

    \newdef{Dehn twist}{\index{Dehn twist}
        Consider an orientable surface $M$ together with a simple closed curve $c$. A tubular neighbourhood\footnote{See Definition \ref{diff:tubular_neighbourhood} for a formal definition.} $T$ of $c$ is homeomorphic to an annulus and hence allows a parametrization $(e^{i\alpha}, t)$ where $\alpha\in[0, 2\pi[$ and $t\in[0,1]$. A Dehn twist about $c$ is an automorphism that is given by $(e^{i\alpha}, t)\mapsto(e^{i(\alpha+2\pi t)}, t)$ on $T$ and restricts to the identity outside of it.
    }

    ?? COMPLETE ??
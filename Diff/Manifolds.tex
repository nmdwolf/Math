\chapter{Manifolds}\label{chapter:manifolds}

References for this chapter (and \autoref{part:diffgeom} in general) are \cite{AMP1, AMP2, diffgeom_physics, kms, sen_nash, schuller}.

\section{Charts}

    \newdef{Chart}{\index{chart}\label{manifolds:chart}
        Consider a set $M$. Let $U$ be an open subset of $M$ and let $O$ be an open subset of $\mathbb{R}^n$. Let $\varphi:U\rightarrow O$ be a homeomorphism. The pair $(U, \varphi)$ is called a chart on $M$.
    }
    \newdef{Transition map}{
        Let $(U_1, \varphi_1)$ and $(U_2, \varphi_2)$ be two charts in $\mathcal{A}$. The mapping $\varphi_1^{-1}\circ\varphi_2$ is called a transition map.

        If $\varphi_1^{-1}\circ\varphi_2$ is continuous then the charts are said to be $C^0$-compatible. However the composition of any two continuous functions is also continuous so it follows that every two charts on a topological manifold are $C^0$-compatible.
    }

    \newdef{Atlas}{\index{atlas}
        Let $M$ be a set. Let $\{(U_i, \varphi_i)\}_{i}$ be a set of (pairwise) $\diamond$-compatible charts (where $\diamond$ denotes any compatibility relation) such that $\bigcup_{i} U_i = M$. This set of charts is called a $\diamond$-atlas on $M$. From the remark on $C^0$-compatibility of charts above it follows that every atlas is a $C^0$-atlas.
    }
    \newdef{Maximal Atlas}{
        Let $\mathcal{A}_1$ and $\mathcal{A}_2$ be two atlases covering the same set $M$. If $\mathcal{A}_1 \cup \mathcal{A}_2 = \mathcal{A}$ is again an atlas then the atlases are said to be equivalent or compatible. The largest such union is called a maximal atlas.
    }

    \newdef{Manifold}{\index{manifold}\index{Hausdorff!space}
        A set $M$ equipped with a maximal $C^0$-atlas $\mathcal{A}$ is called a (\textbf{topological}) manifold. An alternative definition (often used in topology) is that of a locally Euclidean Hausdorff space. The topology on $M$ is generated by the collection of open sets contained in the charts.
    }
    \begin{remark*}
        In the literature second-countability is often added to the definition of a topological manifold. This ensures that the space has (among others) the property of paracompactness and hence lends itself to the construction of partitions of unity (necessary for the introduction of integration theory as in chapter \ref{chapter:integration_manifolds}).

        For an alternative definition of manifolds in the context of \textit{diffeological spaces} see section \ref{section:smooth_spaces}.
    \end{remark*}

    \newdef{$C^k$-manifold}{\index{smooth!manifold}
        \nomenclature[S_Man]{$\textbf{Man}^p$}{Category of $C^p$-manifolds.}
        \nomenclature[S_Diff]{$\textbf{Diff}$}{Category of smooth manifolds.}
        If all transition maps are $C^k$-diffeomorphisms then the manifold is called a $C^k$-manifold. A $C^\infty$-manifold is also called a \textbf{smooth manifold}.
    }

    \newdef{Structure sheaf}{\index{structure!sheaf}
        Let $M$ be a $C^k$-manifold. The structure sheaf $\mathcal{O}_M$ is defined as the sheaf\footnote{See definition \ref{sheaf:def}.} that assigns to every open set $U\subseteq M$ the set of $C^k$-functions $f:U\rightarrow\mathbb{R}$.

        Generally we define for all $j\leq k$ the sheaf $\mathcal{O}^j_M$ as the sheaf that assigns to every open set $U\subseteq M$ the set of $C^j$-functions $f:U\rightarrow\mathbb{R}$.

        From the sheafy point of view one can then define a smooth manifold as a ringed space that is locally isomorphic to $\mathbb{R}^n$ equipped with its standard space of differentiable functions. (This is an extension of the constructions in algebraic geometry.)
    }

    \begin{theorem}[Whitney]\index{Whitney}
        Every $C^k$-atlas contains a $C^\infty$-atlas. Furthermore, if two $C^k$-atlases contain the same $C^\infty$-atlas then they are identical. It follows that every differentiable manifold is automatically smooth.
    \end{theorem}

    \begin{theorem}[Rad\'o-Moise]\index{Rad\'o-Moise}\label{manifolds:rado_moise}
        In dimensions $1, 2$ and 3 there exists for every topological manifold a unique smooth structure.
    \end{theorem}
    \begin{theorem}
        For dimensions higher than 4 there exist only finitely many distinct smooth structures.
    \end{theorem}
    \sremark{In $\dim M = 4$ there exist only partial results. For noncompact manifolds there exist uncountably many distinct smooth structures. For compact manifolds there exists no complete characterization.}

    \newformula{Smooth\footnotemark\ function}{\index{smooth!function}\index{local!representation}
        \footnotetext{In this definition one can replace ''smooth'' by ''$C^k$-differentiable''.}
        Let $f:M\rightarrow N$ be a function between two smooth manifolds. $f$ is said to be smooth if there exist charts $(U, \varphi)$ and $(V, \psi)$ for $M$ and $N$ with $f(U)\subseteq V$ such that the function
        \begin{gather}
            \label{diff:manifolds:local_representation}
            f_{\varphi\psi} = \psi\circ f \circ\varphi^{-1}
        \end{gather}
        is smooth on $\mathbb{R}^n$. This function is said to be the \textbf{local representation} of $f$.
    }

    \begin{notation}
        \nomenclature[S_Cinfty]{$C^\infty_p(M)$}{Ring of all smooth functions $f:M\rightarrow\mathbb{R}$ defined on a neighbourhood of $p\in M$.}
        The set of all $C^\infty$-functions on a manifold $M$, defined on a neighbourhood of $p\in M$, is denoted by $C^\infty_p(M)$. This set forms a commutative ring when equipped with the usual sum and product (composition) of functions.
    \end{notation}

    \newdef{Good cover\footnotemark}{\index{cover}\index{finite!type}\label{diff:good_cover}
        \footnotetext{Sometimes called a \textbf{nice cover}.}
        Let $M$ be an $n$-dimensional manifold with an open cover $\mathcal{U} = \{U_i\}_{i\in I}$. The cover $\mathcal{U}$ is called a good cover if every nonempty finite intersection $U_{i_1}\cap\ldots\cap U_{i_k}$ is diffeomorphic to $\mathbb{R}^n$. If $M$ admits a finite good cover then $M$ is said to be of \textbf{finite type}.
    }

    \begin{property}
        Every smooth manifold admits a good cover. Furthermore, if the manifold is compact, it admits a finite good cover.
    \end{property}

\section{Tangent vectors}\label{diff:section:tangent_space}

    \newdef{Tangent vector}{\index{tangent!vector}\index{derivation}\label{manifolds:derivation}
        Let $M$ be a smooth manifold and consider a point $p\in M$. Let $f, g:M\rightarrow\mathbb{R} \in C^\infty_p(M)$. A tangent vector to $M$ at $p$ is a differential operator $v_p$ satisfying the following properties:
        \begin{enumerate}
            \item \textbf{Linearity}: $v_p(af + g) = av_p(f) + v_p(g)$
            \item \textbf{Leibniz property}: $v_p(fg) = f(p)v_p(g) + g(p)v_p(f)$
        \end{enumerate}
        Maps with these properties are also called \textbf{derivations}\footnote{In general, every operation that satisfies the Leibniz property is called a derivation.}.
    }
    \begin{property}
        For every constant function $c:p\mapsto c$ we have:
        \begin{gather}
            v_p(c) = 0.
        \end{gather}
    \end{property}

    \newdef{Tangent space}{\index{tangent!space}\index{basis}\label{diff:manifolds:tangent_vector_partial}
        Using the previous definition we can construct a tangent (vector) space $T_pM$ at each point $p\in M$. The basis vectors are given by
        \begin{gather}
            \left.\ds\pderiv{}{q^i}\right|_{p}:C^\infty_p(M, \mathbb{R})\rightarrow\mathbb{R}:f\mapsto \pderiv{}{q^i}\left(f\circ\varphi^{-1}\right)(\varphi(p))
        \end{gather}
        where $(U, \varphi)$ is a coordinate chart such that $p\in U$ and $(q^1,\ldots, q^n)$ are local coordinates.
    }
    \remark{Due to the explicit dependence of the tangent vectors on the point $p\in M$, it is clear that for curved manifolds the tangent spaces belonging to different points will not (necessarily) be the same. However, they are related:}
    \begin{property}
        From the above construction it follows that
        \begin{gather}
            \dim(T_p M) = \dim(M).
        \end{gather}
        This also implies that the tangent spaces over two distinct points $p, q\in M$ are isomorphic.
    \end{property}

    \newdef{Curve}{\index{curve}
        A smooth function $\gamma:\mathbb{R}\rightarrow M$ with $\gamma(0) = p$ is called a smooth curve through $p\in M$.
    }
    \newadef{Tangent space}{\label{manifolds:alternative_definition}
        Let $(U, \varphi)$ be a chart around the point $p\in M$. Two smooth curves $\gamma_1, \gamma_2$ through $p\in M$ are said to be tangent at $p$ if
        \begin{gather}
            \label{diff:manifolds:equal_derivative}
            \deriv{(\varphi\circ\gamma_1)}{t}(0) = \deriv{(\varphi\circ\gamma_2)}{t}(0)
        \end{gather}
        or equivalently, if their local representations are tangent at 0. This relation imposes an equivalence relation\footnote{The relation is well-defined (under a change of chart) because the transition maps (and their Jacobian matrices) are invertible and thus nonsingular.} on the set of smooth curves through $p$. One then defines the tangent space at $p$ as the set of equivalence classes of thse tangent curves. Explicitly these equivalence classes are constructed as follows:

        We can define the following tangent vector to the curve $c(t)$ through $p$:
        \begin{gather}
            v_p(f) = \left.\deriv{(f\circ c)}{t}\right|_{t=0}.
        \end{gather}
        Applying the chain rule gives us
        \begin{gather}
            \label{diff:manifolds:tangent_vector_chain_rule}
            v_p(f) = \pderiv{(f\circ\varphi^{-1})}{q^i}(\varphi(p))\deriv{q^i}{t}(0)
        \end{gather}
        where $q^i = (\varphi\circ c)^i$. The first factor depends only on the point $p$ and the second factor is equal for all tangent curves through $p$. We thus see that curves satisfying equation \ref{diff:manifolds:equal_derivative} define the same tangent vector.
    }

    $\boldsymbol{(\dag)}$ The proof that both definitions of the tangent space are in fact equivalent is given in the appendices.

\section{Submanifolds}
\subsection{Immersions and submersions}

    In this section we denote by $T_pf:T_pM\rightarrow T_{f(p)}N$ the tangent map induced by a smooth function $f:M\rightarrow N$. We give a formal definition in \ref{diff:manifolds:T_function} when we have introduced enough mathematical background. For now this is the map that is locally represented by the Jacobian matrix of $f$.

    \newdef{Immersion}{\index{immersion}
        Let $f:M\rightarrow N$ be a differentiable function between smooth manifolds. $f$ is called an immersion if its derivative is everywhere injective, or equivalently if its derivative has maximal rank everywhere:
        \begin{gather}
            \text{rk}_p(f) = \dim(M), \forall p\in M.
        \end{gather}
    }

    \newdef{Critical point}{\index{critical!point}
        A point $p\in\dom(f)$ is said to be critical if the rank of the Jacobian $T_pf$ is not maximal. The image of a critical point is called a \textbf{critical value}.
    }
    \newdef{Nondegenerate critical point}{\label{diff:nondegenerate_critical_point}
        At a critical point $p\in M$ the Hessian of $f$ gives a well-defined quadratic form. The critical point $p\in M$ is said to be nondegenerate if the Hessian of $f$ is nonsingular at $p$. Around $p$ one can locally express the Hessian as the matrix of second-order derivatives and hence nondegeneracy is equivalent to the invertibility of this matrix.
    }
    \begin{property}\label{manifolds:critical_point}
        A point $p\in\dom(f)$ is critical if and only if there exists a chart $U\ni p$ for which $\pderiv{f}{x^i}(p) = 0$.
    \end{property}
    \begin{theorem}[Sard]\index{Sard!theorem on critical sets}
        Consider a map $\psi:M\rightarrow N$, where $\dim M=m$ and $\dim N=n$. Set $k_0 = \max\{1, m-n+1\}$. If $\psi$ is of class $C^k$ with $k\geq k_0$ then the set of critical values of $\psi$ has Lebesgue measure 0.
    \end{theorem}

    \newdef{Regular point}{
        A regular point of $f$ is a point $p\in M$ such that $T_pf$ is surjective.
    }
    \newdef{Regular value}{\index{regular!value}
        Let $f:M\rightarrow N$ be a differentiable map between smooth manifolds. A point $y\in N$ is called a \textbf{regular value} if every point in the preimage $f^{-1}(y)$ is a regular point or equivalently if it is not a critical value.
    }

    \begin{result}\label{manifolds:regular_point}
        It follows from property \ref{manifolds:critical_point} that a point $p\in\dom(f)$ is regular if and only if $\pderiv{f}{x^i}(p)\neq0$ in all charts $U\ni p$.
    \end{result}

    \newdef{Submersion}{\index{submersion}\label{manifolds:submersion}
        Let $f:M\rightarrow N$ be a differentiable map between smooth manifolds. A map $f$ is called a submersion if all $p\in M$ are regular, or equivalently, if
        \begin{gather}
            \text{rk}(T_pf) = \dim(N), \forall p\in M.
        \end{gather}
    }

    \newdef{Embedding}{\index{embedding}
        A differentiable function between smooth manifolds is called a smooth embedding if its both an immersion and an embedding in the topological sense \ref{topology:embedding}. This implies that the submanifold topology coincides with the subspace topology \ref{topology:relative_topology}.
    }

\subsection{Submanifolds}

    \newdef{Submanifold}{\index{sub!manifold}
        Let $M$ be a manifold. A subset $N\subset M$ is called a submanifold of $M$ if $N$, equipped with the subspace topology, is a topological manifold on its own.
    }

    \newdef{Embedded submanifold}{
        Let $M$ be a smooth manifold. A smooth manifold $N$ is called an embedded or \textbf{regular submanifold} (of $M$) if there exists a smooth embedding $f:M\hookrightarrow N$.
    }

    \newdef{Slice}{\index{slice}
        Let $m<n$ be two positive integers. The space $\mathbb{R}^m$ can be viewed as a subspace of $\mathbb{R}^n$ by identifying them in the following way:
        \begin{gather}
            \mathbb{R}^m\cong\mathbb{R}^m\times\{\underbrace{0,\ldots, 0}_{n-m}\}\overset{\iota}{\hookrightarrow}\mathbb{R}^m\times\mathbb{R}^{n-m}\cong\mathbb{R}^n
        \end{gather}
        where $\iota:(x_1,\ldots,x_m)\mapsto(x_1,\ldots,x_m,\underbrace{0,\ldots,0}_{n-m})$ is the canonical inclusion map. Subspaces obtained by setting a number of coordinates equal to 0 (or any other constant) are called slices.
    }
    \begin{adefinition}
        A $k$-dimensional embedded manifold $N$ of $M$ can be defined equivalently as a subset of $M$ such that there exists a positive integer $k$ and such that for every point $p\in N$ there exists a chart $(U,\varphi)$ that satisfies
        \begin{gather}
            \varphi(U\cap N) = \varphi(U) \cap (\mathbb{R}^k\times\{\underbrace{0,\ldots,0}_{\text{dim}(M)-k}\}).
        \end{gather}
        The set $U\cap N$ is called a \textbf{slice} of $(U,\varphi)$ in analogy with the previous definition of a (standard) slice.
    \end{adefinition}

    \newdef{Immersed submanifold}{
        Let $M, N$ be smooth manifolds. $N$ is said to be an immersed submanifold of $M$ if there exists an immersion $i:N\hookrightarrow M$. Locally every immersed submanifold looks like a regular submanifold. Globally, however, the topology does not have to coincide with the subspace topology.
    }

    \begin{theorem}[Submersion theorem\footnotemark]\index{submersion!theorem}
        \footnotetext{Also called the \textbf{regular value theorem}.}
        Consider a smooth map $f:M_1\rightarrow M_2$ between smooth manifolds and let $y\in M_2$ be a regular value. Then $N=f^{-1}(y)$ is a submanifold of $M_1$ with codimension $\dim(M_2)$.
    \end{theorem}

    \newdef{Closed embedded manifold}{
        Let $N$ be an immersed submanifold of $M$. If the inclusion map $i:N\hookrightarrow M$ is closed, $N$ is in fact an embedded submanifold and hence we call it a closed embedded manifold.
    }

    \newdef{Transversal intersection}{\index{transversality}
        Consider a smooth manifold $M$. Two submanifolds $X, Y$ are said to be transversal (or to intersect transversally) if at each intersection point $p$ the following relation holds:
        \begin{gather}
            T_pX + T_pY = T_pM.
        \end{gather}
        If the dimensions of $X$ and $Y$ are complementary (in $M$) then the sum becomes a direct sum. If two submanifolds do not intersect at all then they are vacuously\mnote{\dbend} transversal (independent of their dimension).
    }
    \begin{property}
        The codimension of the transversal intersection of two submanifolds is equal to the sum of the codimensions of the intersecting submanifolds. It follows that if the submanifolds have complementary dimensions the intersection consists of isolated points.
    \end{property}

    \begin{example}[Stiefel manifold]\index{Stiefel!manifold}
        Let $V$ be an inner product space\footnote{See section \ref{linalgebra:innerproduct}.} over a field $K$ (e.g. real, complex or quaternionic numbers). The set of orthonormal $k$-frames can be embedded in $K^{n\times k}$. It becomes a compact embedded submanifold, called the Stiefel manifold of $k$-frames over $V$.
    \end{example}

\section{Manifolds with boundary}\label{section:manifold_boundary}

    \newdef{Manifold with boundary}{\index{boundary}\index{interior}
        Let $\mathbb{H}^n$ denote the upper half space, i.e.:
        \begin{gather}
            \label{manifolds:upper_half_space}
            \mathbb{H}^n:=\mathbb{R}^{n-1}\times\mathbb{R}^+= \{(x_1,\ldots,x_n):x_n \geq 0\}\subset\mathbb{R}^n.
        \end{gather}
        An $n$-dimensional manifold with boundary is then given by a set $M$ together with a maximal atlas consisting of (regular) charts $(U, \varphi)$ such that $U$ is diffeomorphic to $\mathbb{R}^n$ (these points are called \textbf{interior points}) and \textbf{boundary charts} $(V, \phi)$ such that $V$ is diffeomorphic to $\mathbb{H}^n$ (these points are called \textbf{boundary points}).
    }
    \begin{remark}[Manifold boundary]
        The boundary $\partial M$, consisting of all boundary points of $M$ as defined in the above definition, should not be confused with the topological boundary of $M$. In general these are different sets. Similarly, the interior $\text{Int}(M) = M \backslash\partial M$, in the sense of manifolds, should not be confused with the topological interior.
    \end{remark}

    \begin{property}
        Let $M$ be an $n$-dimensional manifold with boundary. Let $(U, \varphi)$ be a chart for $p\in\partial M$.
        \begin{gather}
            \varphi(p) \in \partial\mathbb{H}^n = \{(x_1, ..., x_n):x_n=0\}
        \end{gather}
    \end{property}

    \newdef{Manifold with corners}{
        Analogous to the definition of a manifold with boundaries one can define a manifold wih corners using \textbf{corner charts} of the form \[\varphi:U\rightarrow\mathbb{R}^k\times(\mathbb{R}^+)^l.\] In contrast to the case of manifolds with boundary one does need to add an extra requirement when working with higher order corners: For every two charts $(U, \varphi)$ and $(V, \psi)$ the transition function should preserve the corners: \[\varphi\circ\psi^{-1}(V\cap \{0\}\times\mathbb{R}^k) \subset \{0\}\times\mathbb{R}^k.\]
    }
    \begin{remark}
        In the topological setting every manifold with corners (even higher order ones) is homeomorphic to a manifold with boundary. However, when working with smooth structures this result fails. There exists no such diffeomorphism and accordingly one has to make a distinction between the type of corners.
    \end{remark}

\subsection{Cobordisms}

    \newdef{Cobordism}{\index{cobordism}\label{manifolds:cobordism}
        Two manifolds $X, Y$ are said to be \textbf{cobordant} if there exists a manifold with boundary $M$ such that $\partial M = X\sqcup Y$. The manifold $M$ is said to be a cobordism\footnote{Some authors use the terms \textit{bordism} and \textit{bordant} in this context.} between $X$ and $Y$.
    }
    \sremark{In the category of oriented manifolds one can also define a cobordism, but there the manifolds $X, Y$ should respect the orientation of $\partial M$. In the general literature this is the case one mainly considers.}

    \newdef{Cobordism group}{
        Under the operation of disjoint union the closed $n$-dimensional manifolds, modulo cobordisms, form a commutative group $\Omega_n$. Under Cartesian products these match together to form a commutative graded ring $\Omega=\bigoplus_{n=0}^\infty\Omega_n$.
    }

\section{Morse theory}
\subsection{Morse functions}

    \newdef{Morse function}{\index{Morse!function}
        Let $M$ be a smooth manifold. A smooth function $f\in C^\infty(M)$ is called a Morse function if it has no degenerate critical points (see definition \ref{diff:nondegenerate_critical_point}).
    }
    \begin{property}
        The set of Morse functions is open and dense in the $C^2$-topology\footnote{See section \ref{section:jet_bundles} on jet spaces.}.
    \end{property}

    \newdef{Morse index}{\index{index}
        Consider a Morse function $f\in C^\infty(M)$. The number of negative eigenvalues at a critical point $p\in M$ is called the (Morse) index of $f$ at $p$. This is often denoted by $\lambda_p(f)$.

        To any Morse function we can associate a series called the \textbf{Morse counting-series}:
        \begin{gather}
            M_t(f) := \sum_{p\in\text{crit}(f)}t^{\lambda_p(f)}.
        \end{gather}
        If $M$ is compact then the nondegeneracy condition implies that the above sum only has a finite number of terms.
    }
    ?? COMPLETE ??

\section{Surgery theory}

    \newdef{Dehn twist}{\index{Dehn twist}
        Consider an orientable surface $M$ together with a simple closed curve $c$. A \textit{tubular neighbourhood} $T$ of $c$ is homeomorphic to an annulus and hence allows a parametrization $(e^{i\alpha}, t)$ where $\alpha\in[0, 2\pi[$ and $t\in[0, 1]$. A Dehn twist about $c$ is an automorphism which is given by $(e^{i\alpha}, t)\mapsto(e^{i(\alpha+2\pi t)}, t)$ on $T$ and restricts to the identity outside of it.
    }

    ?? COMPLETE ??

\section{\texorpdfstring{\u{Cech} cohomology}{Cech cohomology}}

    \newdef{\u{C}ech cohomology}{\index{Cech!cohomology}
        Consider a smooth manifold $M$ with a good open cover\footnote{See definition \ref{diff:good_cover}.} $\{U_\alpha\}_{\alpha\in I}$ and let $\mathcal{F}$ be a sheaf defined on $M$. The \u{C}ech cohomology of $\mathcal{F}$ with respect to the open cover is defined as follows: Let the cochain complex $C^\bullet(M,\mathcal{F})$ be defined through
        \begin{gather}
            C^n(M,\mathcal{F}) := \bigsqcup_{\alpha_0\neq...\neq\alpha_n}\mathcal{F}(U_{\alpha_0}\cap...\cap U_{\alpha_n}).
        \end{gather}
        The coboundary operator is defined as
        \begin{gather}
            (\delta\sigma)_{\alpha_0...\alpha_{n+1}} := \sum_{i=0}^{n+1}(-1)^i\sigma_{\alpha_0...\hat{\alpha}_i...\alpha_{n+1}}|_{U_{\alpha_0}\cap...\cap U_{\alpha_{n+1}}}.
        \end{gather}
    }

    \begin{example}[Zeroth cohomology]
        From the general definition of cohomology groups and the specific form of the coboundary operator we find that \[\sigma_{\alpha_0}|_{U_{\alpha_0}\cap U_{\alpha_1}}=\sigma_{\alpha_1}|_{U_{\alpha_0}\cap U_{\alpha_1}}\] for all $\alpha_0\neq\alpha_1$. This is exactly the defining relation for the (global) sections of $\mathcal{F}$ and hence we obtain (as usual)
        \begin{gather}
            H^0(M,\mathcal{F})=\mathcal{F}(M).
        \end{gather}
    \end{example}

    ?? COMPLETE ??

\section{\texorpdfstring{Smooth spaces $\clubsuit$}{Smooth spaces}}\label{section:smooth_spaces}
\subsection{Smooth algebras}

    \newdef{Smooth algebra}{\index{smooth!algebra}
        \nomenclature[S_SmAlgebra]{$\textbf{C}^\infty\textbf{Ring}$}{The category of smooth algebras. A less common (but clearer) notation is $C^\infty$\textbf{Alg}.}
        For a smooth manifold we have that \[C^\infty(M) \equiv C^\infty(M, \mathbb{R}) = \hom_{\mathbf{Diff}}(X, \mathbb{R}).\] Since hom-functors are (finite) product-preserving, we see that the multiplication $C^\infty(M)\times C^\infty(M)\rightarrow C^\infty(M)$ is induced by the multiplication on $\mathbb{R}$: $C^\infty(M, \mathbb{R}\times\mathbb{R})\cong C^\infty(M)\times C^\infty(M)$. At the same time the hom-functor is covariant in the second argument and hence we obtain a copresheaf on the category \textbf{CartSp}$_{\textbf{diff}}$ of Euclidean spaces and smooth morphisms. Generalizing this we define smooth algebras as finite product-preserving copresheaves on \textbf{CartSp}$_{\textbf{diff}}$. This functor category is denoted by $\textbf{C}^\infty$\textbf{Alg}.
    }

    \newdef{Finitely generated smooth algebra}{\index{smooth!locus}
        Since ordinary $R$-algebras are finitely generated if and only if they are of the form $R[x_1,\ldots,x_k]/J$ for some integer $k\in\mathbb{N}$ and some ideal $J$, we define a finitely generated smooth algebra if it is of the form $C^\infty(\mathbb{R}^n)/J$ for some $n\in\mathbb{N}$ and some ideal $J$ in the ordinary ring underlying the smooth algebra.

        If we denote the category of finitely generated smooth algebras by $\textbf{C}^\infty\mathbf{Alg}^{\textbf{fin}}$ then we define the category of \textbf{smooth loci} as $(\textbf{C}^\infty\mathbf{Alg}^{\textbf{fin}})^{op}$.
    }

\subsection{Diffeological spaces}

    \newdef{Diffeological space}{\index{diffeology}\index{plot}
        Let $X$ be a set. A diffeology $\mathcal{D}$ on $X$ is defined as a collection of maps $f:U\subseteq\mathbb{R}^n\rightarrow X$, called \textbf{plots}, satisfying the following conditions ($U, V$ and $W$ are open sets):
        \begin{enumerate}
            \item If $f$ is constant then $f\in\mathcal{D}$.
            \item If every point in $\dom(f)$ has a neighbourhood $V$ on which $f|_V\in\mathcal{D}$ then $f\in\mathcal{D}$.
            \item If $g\in\mathcal{D}$ and $h:W\subseteq\mathbb{R}^m\rightarrow\dom(g)$ is smooth then $g\circ h\in\mathcal{D}$.
        \end{enumerate}
        The set $X$ can be turned into a topological space by equipping it with the \textbf{D-topology}, i.e. the final topology with respect to $\mathcal{D}$.
    }
    \remark{The domain of different plots can be subsets of different Euclidean spaces $\mathbb{R}^m$ and $\mathbb{R}^n$.}

    \newdef{Differentiable map}{\index{differentiable}
        \nomenclature[S_DiffSp]{$\mathbf{DiffSp}$}{Category of diffeological spaces and their differentiable morphisms.}
        Let $(X, \mathcal{D})$ and $(Y, \mathcal{D}')$ be diffeological spaces. A map $g:X\rightarrow Y$ is said to be differentiable if for every $f\in\mathcal{D}$ the composition $g\circ f\in\mathcal{D}'$.

        The diffeological spaces together with their differentiable morphisms form a category $\mathbf{DiffSp}$.
    }

    \begin{adefinition}\index{manifold}
        Let $M$ be a diffeological space. $M$ is called an $n$-manifold if it is locally diffeomorphic to $\mathbb{R}^n$.
    \end{adefinition}

\section{\texorpdfstring{Path groupoid $\clubsuit$}{Path groupoid}}

    \newdef{Thin homotopy}{\index{homotopy!thin}
        Let $M$ be a smooth manifold. A homotopy $H:[0, 1]^2\rightarrow M$ is said to be thin if it is smooth and if it pulls back\footnote{See section \ref{diff:section:forms}.} every two-form to 0:
        \begin{gather}
            \forall \omega\in\Omega^2(M): H^*\omega = 0.
        \end{gather}
    }
    \newdef{Lazy path\footnotemark}{\index{path!lazy}\index{sitting instants}
        \footnotetext{Also called a path with \textbf{sitting instants}.}
        Let $M$ be a smooth manifold. A path $f:[0, 1]\rightarrow M$ is said to be lazy if it is locally constant on some neighbourhoods of $0$ and $1$.
    }

    \newdef{Path groupoid}{\index{groupoid!path}
        Let $M$ be a smooth manifold. The path groupoid $P_1(M)$ is the groupoid which has the points of $M$ as objects and the thin homotopy classes of lazy paths with fixed endpoints on $M$ as morphisms.
    }
    \sremark{The restriction to lazy paths is required to ensure the smoothness of composite paths. The quotient by thin homotopies is required to ensure the validity of the associativity and invertibility properties.}

    ?? COMPLETE ??
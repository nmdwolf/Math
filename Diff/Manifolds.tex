\chapter{Manifolds}

\section{Charts}
	\newdef{Chart}{\index{chart}\label{manifolds:chart}
    	Let $M$ be a set. Let $U$ be an open subset of $M$. Let $\varphi:U\rightarrow \mathbb{R}^n$ be at least a $C^1$-diffeomorphism. The pair $(U, \varphi)$ is called a chart.
	}
	\newdef{Atlas}{\index{atlas}
		Let $M$ be a set. Let $\{(U_i, \varphi_i)\}_{i}$ be a set of charts such that $\bigcup_{i} U_i = M$. This set of charts is called an atlas.
	}
	\newdef{Maximal Atlas}{
    		Let $\mathcal{A}_1$ and $\mathcal{A}_2$ be two atlasses covering the same set $M$. If $\mathcal{A}_1 \cup \mathcal{A}_2 = \mathcal{A}$ is also an atlas, the atlasses are said to be equivalent. The largest such union is called a \textbf{maximal} atlas.
	}
    
    \newdef{Manifold}{\index{manifold}\index{Hausdorff!space}
    	A set $M$ equipped with a maximal atlas $\mathcal{A}$ is called a topological manifold. An alternative definition (often used in topology) is that of a locally Euclidean Hausdorff space.
    }
	\begin{remark*}
		In the previous definition second-countability is also often mentioned in the literature. This ensures that the space has certain 'desirable' properties.
	\end{remark*}
    
    \newdef{Transition map}{
    	Let $\mathcal{A}$ be an atlas for a set $M$. Let $(U_1, \varphi_1)$ and $(U_2, \varphi_2)$ be two charts in $\mathcal{A}$. The mapping $\varphi_1^{-1}\circ\varphi_2$ is called a transition map. If all transition maps are $C^k$-diffeomorphisms than the manifold is called a $C^k$-manifold.
    }
    \newdef{Smooth manifold}{\index{smooth!manifold}
    	A $C^\infty$-manifold is also called a smooth manifold.
    }
    
    \newformula{Smooth function}{\index{smooth!function}\index{local representation}
    	Let $f:M\rightarrow N$ be a function between two smooth manifolds. Let $(U, \varphi)$ and $(V, \psi)$ be charts for $M$ and $N$ such that $f(U)\subseteq V$. If the function
        \begin{equation}
        	\label{diff:manifolds:local_representation}
        	f_{\varphi\psi} = \psi\circ f \circ\varphi^{-1}
        \end{equation}
        is of class $C^\infty$ then the function $f$ is also said to be smooth.
    }
    \sremark{
    	The function \ref{diff:manifolds:local_representation} is called the \textbf{local representation} of $f$.
    }
    
    \begin{notation}
    	The set of all $C^\infty$ functions on a manifold $M$ defined on a neighbourhood of $m\in M$ is denoted by $\mathcal{F}_m(M)$. This set forms a commutative ring when equipped with the usual sum and product (composition) of functions.
    \end{notation}

\section{Tangent vectors}\label{diff:section:tangent_space}

	\newdef{Tangent vector}{\index{tangent!vector}\index{derivation}\label{manifolds:derivation}
    	Let $M$ be a smooth manifold and $p\in M$. Let $f, g:M\rightarrow\mathbb{R} \in \mathcal{F}_p(M)$. A tangent vector on $M$ is a differential operator $v_p$ satisfying the following properties:
        \begin{enumerate}
	\item Linearity: $v_p(af + g) = av_p(f) + v_p(g)$
	\item Leibniz property: $v_p(fg) = f(p)v_p(g) + g(p)v_p(f)$
        \end{enumerate}
        Maps with these properties are also called \textbf{derivations}\footnote{Generally, every operation that satisfies the Leibniz property is called a derivation.}.
    }
    \begin{property}
    	For every constant function $c:p\mapsto c$ we have:
    	\begin{equation}
        	v_p(c) = 0
        \end{equation}
    \end{property}
    
    \newdef{Tangent space}{\index{tangent!space}\index{basis}
    	Following from the previous definition, we can construct a tangent (vector) space $T_pM$ in each point $p\in M$. First we construct a tangent vector:
        \begin{equation}
        	\label{diff:manifolds:tangent_vector_partial}
        	\boxed{\left.\ds\pderiv{}{q^i}\right|_{p}:\mathcal{F}_p(M, \mathbb{R})\rightarrow\mathbb{R}:f\mapsto \pderiv{}{q^i}\left(f\circ\varphi^{-1}\right)(\varphi(p))}
        \end{equation}
        where $(U, \varphi)$ is a coordinate chart such that $p\in U$ and $(q^1, ..., q^n)$ are local coordinates. These tangent vectors $\pderiv{}{q^i}|_{p}$ form a basis for $T_pM$.
    }
    \remark{Due to the explicit dependence of the tangent vectors on the point $p\in M$, it is clear that for curved manifolds the tangent spaces belonging to different points will not be the same.}
    
    \newdef{Curve}{\index{curve}
    	A smooth function $\gamma:\mathbb{R}\rightarrow M$ with $\gamma(0) = m$ is called a smooth curve through $m\in M$.
    }
    \newadef{Tangent space}{
    	The alternative construction goes as follows. Two smooth curves $\gamma_1, \gamma_2$ through $p\in M$ are said to be tangent at $p$ if:
    	\begin{equation}
    		\deriv{(\varphi\circ\gamma_1)}{t}(0) = \deriv{(\varphi\circ\gamma_2)}{t}(0)
    	\end{equation}
    	equivalently, if there local representatives are tangent in 0. Furthermore, these formulae transform as follows:
    	\begin{equation}
    		\label{diff:manifolds:tangent_curve_transformation}
    		\deriv{(\psi\circ\gamma)}{t}(0) = D(\psi\circ\varphi^{-1})(\varphi(p))\deriv{(\varphi\circ\gamma)}{t}(0)
    	\end{equation}
	This relation in fact imposes an equivalence relation on the set of smooth curves through $p$. One then defines the tangent space at $p$ as the set of equivalence classes of tangent curves through $p$. Explicitly these equivalence classes are constructed as follows:
    	
	We can define the following tangent vector to the curve $c$ through $p$:
    	\begin{equation}
    		v_p(f) = \left.\deriv{(f\circ c)}{t}\right|_{t=0}
    	\end{equation}
    	Applying the chain rule gives us
    	\begin{equation}
    		\label{diff:manifolds:tangent_vector_expansion}
    		v_p(f) = \pderiv{(f\circ\varphi^{-1})}{q^i}(\varphi(p))\deriv{q^i}{t}(0)
	\end{equation}
	where $q^i = (\varphi\circ c)^i$. The first factor depends only on the point $p$ and the second factor is equal for all tangent curves through $p$. We thus see that tangent curves define the same tangent vector.
    }
    
    Now we should prove that both definitions of the tangent space are in fact really equivalent.
    \newproof{
    	Using \ref{diff:manifolds:tangent_vector_partial} we can rewrite equation \ref{diff:manifolds:tangent_vector_expansion} as follows:
    	\begin{equation}
    		v_p(f) = \left.\pderiv{f}{q^i}\right|_p\deriv{q^i}{t}(0)
    	\end{equation}
	Because the partial derivatives \ref{diff:manifolds:tangent_vector_partial} are also basis vectors for the tangent space, we see that this equation is in fact an expansion in those basis vectors. So the representatives of the equivalence classes of tangent curves are indeed tangent vectors according to the first definition.
	
	To prove the other direction we have to show that the partial derivative operators can be constructed as tangent vectors to curves.
	
	A tangent vector (from the first definition) can be expanded as
	\begin{equation}
		\label{manifolds:tangent_vector_expansion}
		v_p = v^i\left.\pderiv{}{q^i}\right|_p
	\end{equation}
	with $v = (v^1, ..., v^n)$. By constructing the curve $\gamma: t\mapsto \varphi^{-1}(q_0+vt)$ we see that this tangent vector $v_p$ is indeed tangent to a curve. So we have an isomorphism between the tangent vectors from the first definition and the equivalence classes of tangent curves. Both definitions of the tangent space are thus equivalent.\qed
    }
    \begin{remark}\index{directional derivative}
    	From \ref{manifolds:tangent_vector_expansion} it follows that the tangent vectors can be viewed as directional derivatives.
    \end{remark}
    
	\newdef{Tangent bundle}{\index{tangent!bundle}
		The disjoint union\footnote{See definition \ref{topology:disjoint_union}.} of all tangent spaces
		\begin{equation}
			\label{diff:manifolds:tangent_bundle}
			TM = \bigsqcup_{p\in M}T_pM
		\end{equation}
		is called the tangent bundle on $M$.
	}

\section{Curvature}
	\newformula{Riemann Curvature Tensor}{\index{Riemann!curvature tensor}
    	Let $V\in TM$. Let $D_\mu$ be the covariant derivative.
        \begin{equation}
        	\label{diff:manifolds:riemann_tensor}
            \boxed{[D_\mu, D_\nu]V^\rho = R^\rho_{\ \kappa\mu\nu}V^\kappa}
        \end{equation}
    }
    
    \newformula{Ricci tensor}{\index{Ricci!tensor}
    	\begin{equation}
    		\label{diff:manifolds:ricci_tensor}
            R_{\mu\nu} = R^\lambda_{\ \mu\lambda\nu}
    	\end{equation}
    }
    
    \newformula{Ricci scalar}{\index{Ricci!scalar}\index{curvature!scalar}
    	\begin{equation}
    		\label{diff:manifolds:ricci_scalar}
            R = R^\mu_{\ \mu}
    	\end{equation}
        This scalar quantity is also called the \textbf{scalar curvature}.
    }
    
    \newformula{Einstein Tensor}{\index{Einstein!tensor}
    	\begin{equation}
    		\label{diff:manifolds:einstein_tensor}
            \boxed{G_{\mu\nu} = R_{\mu\nu} - \frac{1}{2}g_{\mu\nu}R}
    	\end{equation}
    }
    \begin{theorem}
    	For 4-dimensional manifolds the Einstein tensor $G_{\mu\nu}$ is the only tensor containing at most second derivatives of the metric $g_{\mu\nu}$ and satisfying:
        \begin{equation}
        	\nabla_\mu G^{\mu\nu} = 0
        \end{equation}
    \end{theorem}
    
\section{Submanifolds}
	\newdef{Immersion}{\index{immersion}
		Let $f:M\rightarrow N$ be a differentiable function between smooth manifolds. $f$ is called an immersion if its derivative is everywhere injective, or equivalently if its derivative has maximal rank\footnotemark\ everywhere:
		\footnotetext{See definition \ref{manifolds:rank}.}
		\begin{equation}
			\text{rk}_p(f) = \dim(M), \forall p\in M
		\end{equation}
	}
	\newdef{Submersion}{\index{submersion}\index{regular point}\label{manifolds:submersion}
		Let $f:M\rightarrow N$ be a differentiable map between smooth manifolds. A \textbf{regular point}\footnotemark\ of $f$ is a point $x\in M$ such that $T_xf$ is surjective. $f$ is called a submersion if its derivative is everywhere surjective, or equivalently if
		\footnotetext{$f(x)$ is then called a \textbf{regular value}.}
		\begin{equation}
			\text{rk}_p(f) = \dim(N), \forall p\in M
		\end{equation}
	}
	
	\newdef{Embedding}{\index{embedding}
		A differentiable function between smooth manifolds is called a (smooth) embedding if its both an injective immersion and an embedding in the general sense \ref{topology:embedding}. This implies that the submanifold topology coincides with the subspace (relative) topology \ref{topology:relative_topology}.
	}
	
	\newdef{Embedded submanifold}{\index{submanifold}
		Let $M$ be a manifold. A subset $N$ is an embedded\footnotemark\ submanifold if the inclusion map $f:M\hookrightarrow N$ is an embedding.
		\footnotetext{An immersed submanifold is defined analogously. The requirement of the inclusion map being an embedding is relaxed to it being an immersion. However the submanifold topology will no longer coincide with the relative topology.}
	}
	
	\newdef{Slice}{\index{slice}
		Let $m<n$ be two positive integers. The space $\mathbb{R}^m$ can be viewed as a subspace of $\mathbb{R}^n$ by identifying them in the following way:
		\begin{equation}
			\mathbb{R}^m\cong\mathbb{R}^m\times\{\underbrace{0, ..., 0}_{n-m}\}\overset{\iota}{\hookrightarrow}\mathbb{R}^m\times\mathbb{R}^{n-m}\cong\mathbb{R}^n
		\end{equation}
		where $\iota:(x_1, ..., x_m)\mapsto(x_1, ..., x_m, \underbrace{0, ..., 0}_{n-m})$ is the canonical inclusion map.
	}
	\begin{adefinition}
		A $k$-dimensional embedded manifold $N$ of $M$ can now be defined equivalently as a subset of $M$ such that there exists a positive integer $k$ and such that for every point $p\in N$ there exists a chart $(U, \varphi)$ with
		\begin{equation}
			\varphi(U\cap N) = \varphi(U) \cap (\mathbb{R}^k\times\{\underbrace{0, ..., 0}_{n-k}\})
		\end{equation}
		where $n=\text{dim}(M)$. The set $U\cap N$ is called a slice of $(U, \varphi)$ in analogy with the previous definition of a (standard) slice.
	\end{adefinition}
	
	\begin{theorem}[Submersion theorem\footnotemark]\index{regular value theorem}\index{submersion!theorem}
		\footnotetext{Also called the \textbf{regular value theorem}.}
		Consider a smooth map $f:M_1\rightarrow M_2$ between smooth manifolds. Let $y\in M_2$ be a regular value. Then $N=f^{-1}(y)$ is a submanifold of $M_1$ with codimension $\dim(M_2)$.
	\end{theorem}

\section{Manifolds with boundary}

	\newdef{Manifold with boundary}{\index{boundary}\index{interior}
		Let $\mathbb{H}^n$ denote the upper half space, i.e.:
		\begin{equation}
			\label{manifolds:upper_half_space}
			\mathbb{H}^n = \{(x_1, ..., x_n)|x_n \geq 0\}\subset\mathbb{R}^n
		\end{equation}
		An $n$-dimensional manifold with boundary is then given by a set $M$ together with a maximal atlas consisting of (regular) charts $(U, \varphi)$ such that $U$ is diffeomorphic to $\mathbb{R}^n$, these points are called \textbf{interior points}, and (boundary) charts $(V, \phi)$ such that $V$ is diffeomorphic to $\mathbb{H}^n$, these points are called \textbf{boundary points}.
	}
	\begin{remark}[Manifold boundary]
		The boundary $\partial M$, consisting of all boundary points of $M$ as defined in the above definition, should not be confused with the topological boundary of $M$. In general these are different sets. Similarly, the interior $\text{Int}(M) = M \\ \partial M$, in the sense of manifolds, should not be confused with the topological interior.
	\end{remark}
	
	\begin{property}
		Let $M$ be an $n$-dimensional manifold with boundary. Let $(U, \varphi)$ be a chart for $p\in\partial M$. Then
		\begin{equation}
			\varphi(p) \in \partial\mathbb{H}^n = \{(x_1, ..., x_n)|x_n=0\}
		\end{equation}
	\end{property}

\section{Measure}
\subsection{General definitions}

	\newdef{Measure}{\index{measure}\index{$\sigma$-additivity}
    	\label{lebesgue:measure}
		Let $X$ be a set. Let $\Sigma$ be a $\sigma$-algebra over $X$. A function $\mu:\Sigma\rightarrow\overline{\mathbb{R}}$ is called a measure if it satisfies the following conditions:
		\begin{enumerate}
			\item Non-negativity: $\forall E\in\Sigma:\mu(E) \geq0$
            \item Null empty set: $\mu(\emptyset) = 0$
            \item Countable-additivity\footnotemark\ : $\forall i\neq j:E_i\cap E_j=\emptyset\implies\mu\left(\bigcup_{i=1}^\infty E_i\right) = \sum_{i=1}^\infty \mu(E_i)$
		\end{enumerate} 
    }
    \footnotetext{also called $\sigma$-additivity}
    
    \newdef{Measure space}{
    	\label{lebesgue:measure_space}
    	The pair $(X, \Sigma)$ is called a measurable space. The elements $E\in\Sigma$ are called measurable sets. The triplet $(X, \Sigma, \mu)$ is called a measure space.
    }
    
	\newdef{Almost everywhere\footnotemark}{
		\footnotetext{In probability theory this is foten often called \textbf{almost surely}.}
		Let $(X, \Sigma, \mu)$ be a measure space. A property $P$ is said to hold on X almost everywhere (a.e.) if it satisfies the following equation:
	        \begin{equation}
		        \label{lebesgue:almost_everywhere}
        		\mu\left(\{x\in X:\neg P(x)\}\right) = 0
        	\end{equation}
	}
    
    \newdef{Complete measure space}{
    	The measure space $(X,\Sigma,\mu)$ is said to be complete if for every $E\in\Sigma$ with $\mu(E) = 0$ the following property holds for all $A\subset E$:
        \[
        	A\in\Sigma \quad\text{and}\quad \mu(A) = 0
		\]
    }
    \newdef{Completion}{
    	Let $\mathcal{F},\mathcal{G}$ be $\sigma$-algebras over a set $X$. $\mathcal{G}$ is said to be the completion of $\mathcal{F}$ if it is the smallest $\sigma$-algebra such that the measure space $(X,\mathcal{G},\mu)$ is complete.
    }
    
    \newdef{Regular Borel measure}{
    	Let $\mu$ be a non-negative countably additive set function defined on $\mathcal{B}$. $\mu$ is called a regular Borel measure if it satisifes following equations for every Borel set $B$:
    	\begin{equation}
			\label{lebesgue:regular_borel_measure}
            \begin{array}{ccl}
				\mu(B)& =& \inf\{\mu(O):O \text{ open}, O\supset B\}\\
                \mu(B)& =& \sup\{\mu(F):F \text{ closed}, F\subset B\}
			\end{array}
		\end{equation}
    }

	\newdef{\texorpdfstring{$\sigma$-}\ finite measure}{\index{$\sigma$-finite}
    	\label{lebesgue:sigma_finite_measure}
    	Let $(\Omega,\mathcal{F},P)$ be a measure space. The measure $P$ is said to be $\sigma$-finite if there exists a sequence $(A_i)_{i\in\mathbb{N}}$ of measurable sets such that $\bigcup_{i=1}^{+\infty}A_i = \Omega$ with $\forall A_i:P(A_i) < +\infty$.
    }
    
    \begin{method}
    	To show that two measures coincide on a $\sigma$-algebra, it suffices to show that they coincide on the generating sets and apply the monotone class theorem \ref{set:theorem:monotone_class}.
    \end{method}


	\subsection{Lebesgue measure}
    	\newformula{Length of an interval}{\index{length}
        	The length of an open interval $I=(a,b)$ is defined as:
            \begin{equation}
				\label{lebesgue:interval_length}
                l\left(I\right) = b-a
			\end{equation}
        }
        
        \newdef{Null set}{\index{null set}
        	A set $A\subset\mathbb{R}$ is called a null set if it can be covered by a sequence of intervals of arbitrarily small length: $\forall\varepsilon>0$ there exists a sequence $(I_n)_{n\in\mathbb{N}}$ such that
            \begin{equation}
				A \subseteq \bigcup_{n=1}^{+\infty}I_n
			\end{equation}
            with
            \begin{equation}
				\sum_{i=1}^{+\infty}l(I_n) < \varepsilon
			\end{equation}
        }
        \begin{theorem}
			Let $(E_i)_{i\in\mathbb{N}}$ be a sequence of null sets. The union $\bigcup_{i=1}^{+\infty}E_i$ is also null.
		\end{theorem}
        \result{
        	\label{lebesgue:theorem:countable_set_is_null}
            Any countable set is null.
		}
    
    	\newdef{Outer measure}{\index{outer measure}
        	Let $X\subseteq\mathbb{R}$ be an open set. The (Lebesgue) outer measure is defined as:
            \begin{equation}
				\label{lebesgue:outer_measure}
                \boxed{m^*(X) = \inf\left\{\sum_{i=1}^{+\infty} l(I_i)\text{ with }(I_i)_{i\in\mathbb{N}} \text{ a sequence of open intervals that covers }X\right\}}
			\end{equation}
        }
        
        \begin{property}
			Let $I$ be an interval. The outer measure equals the length: $m^*(I) = l(I)$.
		\end{property}
        \begin{property}
			The outer measure is translation invariant: $m^*(A + t) = m^*(A)\quad,\forall A,t$
		\end{property}
        \begin{property}
			$m^*(A) = 0$ if and only if $A$ is null.
		\end{property}
        \begin{property}
			If $A\subset B$ then $m^*(A)\leq m^*(B)$.
		\end{property}
        \begin{property}[Countable subadditivity]
        	For every sequence of sets $(E_i)_{i\in\mathbb{N}}$ the following inequality holds: 
			\begin{equation}
				m^*\left(\bigcup_{i=1}^{+\infty}E_i\right) \leq \sum_{i=1}^{+\infty}m^*(E_i)
			\end{equation}
		\end{property}
        
        \begin{theorem}[Carath\'eodory's criterion / Lebesgue measure]
        	\index{Carath\'eodory!criterion}\index{Lebesgue!measure}\index{measurable!set}
        	Let $X$ be a set. If $X$ satisfies the following equation, it is said to be Lebesgue measurable:
            \begin{equation}
				\label{lebesgue:lebesgue_measure}
                \forall E\subseteq\mathbb{R}:m^*(E) = m^*(E\cap X) + m^*(E\cap X^c)
			\end{equation}
            This is denoted by $X\in\mathcal{M}$ and the outer measure $m^*(X)$ is called the Lebesgue measure of $X$ denoted by $m(X)$.
        \end{theorem}
        \begin{property}
			All null sets and intervals are measurable.
		\end{property}
        \newprop{Countable additivity}{\index{countable!additivity}
        	For every sequence $(E_i)_{i\in\mathbb{N}}$ with $E_i\in\mathcal{M}$ satisfying $i\neq j:E_i\cap E_j = \emptyset$ the following equation holds:
        	\begin{equation}
				\boxed{m\left(\bigcup_{i=1}^{+\infty}E_i\right) = \sum_{i=1}^{+\infty}m(E_i)}
			\end{equation}
        }
        \sremark{Previous property, together with the properties of the outer measure, implies that the Lebesgue measure is indeed a proper measure as defined in \ref{lebesgue:measure}.}
        
        \begin{property}
			$\mathcal{M}$ is a $\sigma$-algebra\footnotemark\ over $\mathbb{R}$. 
		\end{property}
        \footnotetext{See definition \ref{set:sigma_algebra}.}
        
        \begin{theorem}
			For every $A\subset\mathbb{R}$ there exists a sequence $(O_i)_{i\in\mathbb{N}}$ of open sets such that:
            \begin{equation}
            	\label{lebesgue:theorem:open_cover_existence}
				A\subset\bigcap_iO_i\qquad\text{and}\qquad m\left(\bigcap_iO_i\right) = m^*(A)
			\end{equation}
		\end{theorem}
        \begin{theorem}
			For every $E\in\mathcal{M}$ there exists a sequence $(F_i)_{i\in\mathbb{N}}$ of closed sets such that:
            \begin{equation}
            	\label{lebesgue:theorem:closed_cover_existence}
				\bigcup_iF_i\subset E\qquad\text{and}\qquad m\left(\bigcup_iF_i\right) = m(E)
			\end{equation}
		\end{theorem}
        \sremark{The previous 2 theorems imply that the Lebesgue measure is a regular Borel measure \ref{lebesgue:regular_borel_measure}.}
        
        \begin{theorem}
			Let $E\subset\mathbb{R}$. $E\in\mathcal{M}$ if and only if for every $\varepsilon>0$ there exist an open set $O\supset E$ and a closed set $F\subset E$ such that $m^*(O\backslash E) < \varepsilon$ and $m^*(E\backslash F)<\varepsilon$.
		\end{theorem}
        
        \begin{property}
			Let $(A_i)_{i\in\mathbb{N}}$ be a sequence of sets with $\forall i:A_i\in\mathcal{M}$. The following two properties apply:
            \begin{equation}
            	\forall i: A_i\subseteq A_{i+1} \implies m\left(\bigcup_{i=1}^{+\infty}A_i\right) = \lim_{i\rightarrow+\infty}m(A_i)
			\end{equation}
            \begin{equation}
            	\forall i: A_i\supseteq A_{i+1} \land m(A_1)<+\infty\implies m\left(\bigcap_{i=1}^{+\infty}A_i\right) = \lim_{i\rightarrow+\infty}m(A_i)
			\end{equation}
		\end{property}
        \remark{This property is not only valid for the Lebesgue measure but for every countably additive set function.}
        \begin{property}
			The Lebesgue measure $m(X)$ is continuous at $\emptyset$, i.e. if $(A_i)_{i\in\mathbb{N}}\rightarrow\emptyset$ then $\displaystyle\lim_{i\rightarrow+\infty}m(A_i) = 0$.
		\end{property}
        
        \begin{theorem}
			$\mathcal{M}$ is the completion of $\mathcal{B}$.
		\end{theorem}
        \result{
        	\label{lebesgue:theorem:B_in_M}
        	$\mathcal{B}\subset\mathcal{M}\subset\mathcal{F}_{\mathbb{R}}$
		}
        
        \newdef{Restricted Lebesgue measure}{\index{Lebesgue!restricted measure}
        	Let $B\subset\mathbb{R}$ be a measurable set with measure $m(B)>0$. The restriction of the Lebesgue measure to the set $B$ is defined as follows:
            \begin{equation}
				\label{lebesgue:restricted_lebesgue_measure}
                \mathcal{M}_B = \left\{A\cap B:A\in\mathcal{M}\right\}\qquad\text{and}\qquad\forall E\in\mathcal{M}_B:m_B(E) = m(E)
			\end{equation}
            Furthermore, the measure space $(B,\mathcal{M}_B,m_B)$ is complete.
        }
        
    \subsection{Measurable functions}
    	\newdef{Measurable function}{\index{measurable!function}
        	\label{lebesgue:measurable_function}
        	A function $f$ is (Lebesgue) measurable if for every interval $I\subset\mathbb{R}:f^{-1}(I)\in\mathcal{M}$.
        }
        \newdef{Borel measurable function}{\index{Borel!measurable function}
        	\label{lebesgue:borel_measurable_function}
        	A function $f$ is called Borel measurable\footnotemark\ if for every interval $I\subset\mathbb{R}:f^{-1}(I)\in\mathcal{B}$.
        }
        \footnotetext{These functions are often simply called 'Borel functions'.}
        \remark{Inclusion \ref{lebesgue:theorem:B_in_M} implies that every Borel function is also Lebesgue measurable.}
        
        \begin{theorem}
			The class of Lebesgue measurable\footnotemark\ functions defined on $E\in\mathcal{M}$ is closed under multiplication and it forms a vector space.
		\end{theorem}
        \footnotetext{This property is also valid for Borel functions.}
        
        \begin{property}
			Following types of functions are measurable:
            \begin{itemize}
				\item monotone functions
                \item continuous functions
                \item indicator functions
			\end{itemize}
		\end{property}
		\begin{result}
			Let $f,g$ be measurable functions. Let $F:\mathbb{R}\times\mathbb{R}\rightarrow\mathbb{R}$ be a continuous function. The composition $F(f(x), g(x))$ is also measurable.
		\end{result}
        
        \begin{property}
			Let $f$ be a measurable function. The set\footnotemark\ $\{x:f(x) = a\}$ is also measurable for all $a\in\mathbb{R}$.
		\end{property}
        \footnotetext{This set is called the 'level set' of $f$.}

        \begin{theorem}
			Define following functions, which are measurable if $f$ is measurable as a result of previous properties:
            \begin{equation}
				\label{lebesgue:positive_part}
                f^+(x) = \left\{
                \begin{array}{ccc}
					f(x)&\text{if}&f(x)>0\\
                    0&\text{if}&f(x)\leq0
				\end{array}\right. = \max(f,0)
			\end{equation}
            \begin{equation}
				\label{lebesgue:negative_part}
                f^-(x) = \left\{
                \begin{array}{ccc}
					0&\text{if}&f(x)>0\\
                    -f(x)&\text{if}&f(x)\leq0
				\end{array}\right. = \max(-f,0)
			\end{equation}
            The function $f:E\rightarrow\mathbb{R}$ is measurable if and only if both $f^+$ and $f^-$ are measurable. Furthermore $f$ is measurable if $|f|$ is measurable, the converse is false.
		\end{theorem}

	\subsection{Limit operations}
    	\begin{property}
			Let $(f_i)_{i\in\mathbb{N}}$ be a sequence of measurable\footnotemark\ functions. The following operations are measurable:
            \begin{itemize}
				\item $\ds\min_{i\leq k}f_i$ and $\ds\max_{i\leq k}f_i$
                \item $\ds\inf_{i\in\mathbb{N}}f_i$ and $\ds\sup_{i\in\mathbb{N}}f_i$
                \item $\ds\liminf_{i\rightarrow+\infty}f_i$ and $\ds\limsup_{i\rightarrow+\infty}f_i$
			\end{itemize}
		\end{property}
        \footnotetext{This property is also valid for Borel functions.}
        \sremark{The measurability of the limit inferior and limit superior follows from their definitions and from the measurability of the $\inf/\sup$ and $\min/\max$.}
        
        \begin{property}
			Let $f$ be a measurable function. Let $g$ be a function such that $f=g$ almost everywhere. The function $g$ is measurable.
		\end{property}
        \result{A result of the previous two properties is the following: if a sequence of measurable functions converges pointwise a.e. then the limit is also a measurable function.}
	
        \newdef{Essential supremum}{\index{essential!supremum}
        	\begin{equation}
            	\label{lebesgue:essential_supremum}
                \esssup f = \sup\{z:f\geq z\text{ a.e.}\}
			\end{equation}
        }
        \newdef{Essential infimum}{\index{essential!infimum}
        	\begin{equation}
            	\label{lebesgue:essential_infimum}
                \essinf f = \inf\{z:f\leq z\text{ a.e.}\}
			\end{equation}
        }
        \begin{property}
			Let $f$ be a measurable function. $f\leq\esssup f\text{ a.e.}$ and $f\geq\essinf f\text{ a.e.}$ We also have that: $\esssup f\leq\sup f$ and $\essinf f\geq\inf f$, furthermore this last pair of inequalities becomes a pair of equalities if $f$ is continuous.
		\end{property}
        \begin{property}
			Let $f,g$ be measurable functions. $\esssup(f+g)\leq\esssup f + \esssup g$. An analogous inequality holds for the essential infimum.
		\end{property}

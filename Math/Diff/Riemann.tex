\chapter{Riemannian Geometry}\label{chapter:riemann}

    The main reference for this chapter is \cite{petersen}.

\section{Riemannian manifolds}
\subsection{Metric}

    \begin{definition}[Bundle metric]\index{metric!Riemannian}
        Consider the bundle of $(0,2)$-tensors. From Definition \ref{vector:tensor_product} it follows that every section $g$ of this bundle defines a bilinear map \[g_p:T_pM\times T_pM\rightarrow\mathbb{R}\] for all $p\in M$. If this map is symmetric and nondegenerate, it is called a \textbf{Lorentzian} or \textbf{pseudo-Riemannian metric}. If the map is also positive, it is called a \textbf{Riemannian metric}.\footnote{Recall Section \ref{section:innerproduct} about Hermitian forms and metric forms.} The collection $\{\langle\cdot|\cdot\rangle_p:p\in M\}$ is called a \textbf{bundle metric} or \textbf{fibre metric}.
    \end{definition}
    \newdef{Riemannian manifold}{\index{Riemann!manifold}\label{riemann:riemannian_manifold}
        A smooth manifold equipped with a Riemannian metric.
    }

    A Riemannian metric induces a duality between $TM$ and $T^*M$ (akin to the Riesz representation theorem \ref{functional:riesz}). This is given by the \textit{flat} and \textit{sharp} isomorphisms:
    \newdef{Musical isomorphisms}{\index{musical isomorphism}\label{riemann:musical_isomorphisms}
        Let $g:TM\times_MTM\rightarrow\mathbb{R}$ be a Riemannian metric on $M$. The \textbf{flat} isomorphism is defined as follows:
        \begin{gather}
            \label{riemann:flat_map}
            \flat:v\mapsto g(v,\cdot).
        \end{gather}
        The \textbf{sharp} isomorphism is defined as the inverse map. For an arbitrary covector field $\omega$ it is implicitly given by
        \begin{gather}
            \label{riemann:sharp_map}
            g(\omega^\sharp,v) = \omega(v).
        \end{gather}
        These \textbf{musical isomorphisms} can be used to raise and lower tensor indices. In index notation they are given by contraction with metric tensor:
        \begin{align*}
            \flat&:v^\mu\mapsto v_\lambda:=g_{\lambda\mu}v^\mu\\
            \sharp&:\omega_\mu\mapsto \omega^\lambda:=g^{\lambda\mu}\omega_\mu.
        \end{align*}
    }

    \newdef{Codifferential}{\index{co-!differential}
        Using the de Rham differential and the Hodge star operator \ref{vector:hodge_star}, one can define a boundary operator $\delta:\Omega^k(M)\rightarrow\Omega^{k-1}(M)$:
        \begin{gather}
            \label{riemann:codifferential}
            \delta := (-1)^k\ast^{-1}\dr\,\ast = (-1)^{n(k+1)+1}\ast\dr\ast.
        \end{gather}
        It is not hard to check that this is indeed a boundary operator in the sense of Definition \ref{homalg:chain_complex}.
    }
    \newdef{Hodge Laplacian\footnotemark}{\index{Hodge!Laplacian}\index{Laplace-de Rham|see{Hodge Laplacian}}\index{Hodge-de Rham operator}\label{riemann:hodge_laplacian}
        \footnotetext{Sometimes called the \textbf{Hodge-de Rham} or \textbf{Laplace-de Rham} operator.}
        Using the de Rham differential and codifferential one can define a derivation on $\Omega^k(M)$:
        \begin{gather}
            \Delta := \dr\delta + \delta\dr.
        \end{gather}
        It should be noted that, in contrast to the differential $d$, the Hodge Laplacian depends on the metric through the definition of the codifferential. The square root of this operator is the \textbf{Hodge-de Rham operator} $\dr+\delta$.
    }

    \newdef{Harmonic form}{\index{harmonic!form}
        An element of the kernel of the Hodge Laplacian $\Delta$. The space of harmonic $k$-forms is often denoted by $\mathcal{H}^k(M)$.
    }

    \begin{theorem}[Hodge decomposition]\index{Hodge!decomposition}
        Let $M$ be a closed Riemannian manifold. Every differential $k$-form admits a decomposition of the form
        \begin{gather}
            \omega = \dr\alpha+\delta\beta+h\,,
        \end{gather}
        where $h\in\mathcal{H}^k(M)$.
    \end{theorem}
    \begin{result}[Hodge theorem]
        The $k^{th}$ de Rham cohomology group is isomorphic (as an Abelian group/vector space) to the space of harmonic $k$-forms:
        \begin{gather}
            H^k(M)\cong\mathcal{H}^k(M).
        \end{gather}
    \end{result}

    \begin{remark}\label{bundle:vector_calculus}
        The gradient, rotor (curl) and divergence from standard vector calculus (Section \ref{section:nabla}) can be rewritten and generalized using exterior derivatives as follows. Consider a smooth function $f$ and a smooth vector field $X$.
        \begin{align}
            \nabla f &= \dr f\,^\sharp\\
            \nabla\times X &= \left(\ast\,\dr X^\flat\right)^\sharp\\
            \nabla\cdot X &= \left(\ast^{-1}\dr\ast X^\flat\right)^\sharp,
        \end{align}
        Property \ref{vector:mixed_properties} now follows from the nilpotency $\dr^2=0$.
        \begin{mdframed}[roundcorner=10pt, linecolor=blue, linewidth=1pt]
            \begin{proof}[Explanation]
                Looking at Equation \eqref{bundle:function_derivative} for the exterior derivative of a smooth function and remembering the definition of the gradient \ref{vector:gradient} in $\mathbb{R}^3$, one can see that these two definitions look very similar. The major difference lies in the fact that $\nabla f$ is a vector and $df$ is a covector. However, because of the nondegeneracy of the metric, there exists an isomorphism between these spaces: the musical isomorphisms.

                Similar relations hold for the divergence \ref{vector:divergence} and rotor \ref{vector:rotor}. However, here one has to use a different construction because the spaces $\Lambda^1$ and $\Lambda^2$ have to be used. The Hodge star \ref{vector:hodge_star} can be used to obtain the correct dimensions.

                For simplicity we will give a derivation in $\mathbb{R}^3$ with the Euclidean metric. Consider a vector field $X = (f_1,f_2,f_3)$ where the $f_i$ are smooth. Using these functions $f_i$ one can construct a one-form $X^\flat = f_1\drx_1 + f_2\drx_2 + f_3\drx_3$ and a two-form $\ast X^\flat = f_1\drx_2\wedge\drx_3 + f_2\drx_3\wedge\drx_1 + f_3\drx_1\wedge\drx_2$. After applying the exterior derivative one obtains
                \begin{align}
                    dX^\flat &= \left(\pderiv{f_3}{x_2} - \pderiv{f_2}{x_3}\right)\drx_2\wedge\drx_3 + \left(\pderiv{f_1}{x_3} - \pderiv{f_3}{x_1}\right)\drx_3\wedge\drx_1 + \left(\pderiv{f_2}{x_1} - \pderiv{f_1}{x_2}\right)\drx_1\wedge\drx_2\,,\nonumber\\
                    \dr\ast X^\flat &= \left(\pderiv{f_1}{x_1} + \pderiv{f_2}{x_2} + \pderiv{f_3}{x_3}\right)\drx_1\wedge\drx_2\wedge\drx_3.\nonumber
                \end{align}
            \end{proof}
        \end{mdframed}
    \end{remark}

\subsection{Riemannian manifolds}

    \newdef{Riemannian isometry}{\index{iso-!metry}
        Consider two pseudo-Riemannian manifolds $(M,g_M)$ and $(N,g_N)$. A smooth function $f:M\rightarrow N$ is called an isometry if $f^*g_N = g_M$, i.e.~if it preserves the metric tensor.
    }

    \begin{property}\index{index!of Riemannian manifold}
        Let $M$ be a pseudo-Riemannian manifold. For every $p\in M$ there exists a splitting $T_pM = P\oplus N$ where $P$ is a subspace on which the metric is positive-definite and $N$ is a subspace on which the metric is negative-definite. This splitting is not unique, only the dimensions of the two subspaces are well-defined invariants.
    \end{property}
    Due to the continuity of the metric, the dimensions of this splitting will be the same for all points in a connected neighbourhood. For connected manifolds this amounts to a global invariant:
    \newdef{Index and signature}{\index{index}\index{signature}
        Let $M$ be a connected pseudo-Riemannian manifold. The dimension of the ``negative'' subspace $N$ in the above splitting $T_pP = P\oplus N$ is called the index of the manifold. The \textbf{signature} is defined as the pair $(\dim(P),\dim(N))$.
    }
    \newdef{Hyperbolic manifold}{\index{hyperbolic!manifold}
        A pseudo-Riemannian manifold with index 1.
    }

    \begin{theorem}[Whitney's embedding theorem]\index{Whitney!embedding theorem}
        Every smooth paracompact manifold $M$ can be embedded in $\mathbb{R}^{2\dim(M)}$.
    \end{theorem}
    \begin{theorem}[Whitney's immersion theorem]\index{Whitney!immersion theorem}
        Every smooth paracompact manifold $M$ can be immersed in $\mathbb{R}^{2\dim(M)-1}$.
    \end{theorem}
    The following theorem is slightly stronger:
    \begin{theorem}[Immersion conjecture]\index{immersion!conjecture}
        Every smooth paracompact manifold $M$ can be immersed in $\mathbb{R}^{2\dim(M)-a(\dim(M))}$, where $a(n)$ is the number of 1's in the binary expansion of $n$.
    \end{theorem}

    \newdef{Riemannian cone}{\index{Riemann!cone}\label{riemann:riemannian_cone}
        Let $(M,g)$ be a Riemannian manifold and consider the product manifold $M\times\,]0,+\infty[$. This manifold can also be turned into a Riemannian manifold by equipping it with the metric $t^2g+\dr t\otimes\dr t$. This manifold is called the Riemannian cone or \textbf{metric cone} of $(M,g)$.
    }

\subsection{Levi-Civita connection}

    \newdef{Riemannian connection}{\index{Riemann!connection}\index{Levi-Civita!connection|see{Riemann connection}}\label{riemann:levi_civita_connection}
        An affine connection $\nabla$ on $(M,g)$ is said to be Riemannian if it satisfies the following two conditions:
        \begin{enumerate}
            \item\textbf{metric-compatibility}):
            \begin{gather}
                \nabla g = 0
            \end{gather}
            or, equivalently,
            \begin{gather}
                X(g(Y,Z)) = g(\nabla_XY,Z) + g(Y,\nabla_XZ)
            \end{gather}
            for all vector fields $X,Y$ and $Z$.
            \item\textbf{torsion-freeness}:
            \begin{gather}
                \nabla_XY - \nabla_YX = [X,Y]
            \end{gather}
            for all vector fields $X,Y$.
        \end{enumerate}
        A Riemannian connection is also often called a \textbf{Levi-Civita connection}.
    }

    Because the existence of a metric is equivalent to the integrability of an $\mathrm{O}(n)$-structure by Example \ref{bundle:riemannian_G_structure}, Properties \ref{bundle:integrable_torsion_free} and \ref{bundle:connection_reducibility} imply that there exists a torsion-free connection that preserves this structure. The following theorem gives an even sharper result:
    \begin{theorem}[Fundamental theorem]\index{fundamental theorem!of Riemannian geometry}\label{riemann:unique}
        Every pseudo-Riemannian manifold admits a unique Levi-Civita connection.
    \end{theorem}

    \newformula{Koszul formula}{\index{Koszul!formula}
        The Levi-Civita connection $\nabla$ on a pseudo-Riemannian manifold $(M,g)$ is implicitly defined by the following formulae:
        \begin{align}
            2g(\nabla_XY,Z) &= \mathcal{L}_Xg(Y,Z) + \dr(\iota_Xg)(Y,Z)\\
            &= X(g(Y,Z)) + Y(g(Z,X)) - Z(g(X,Y))\nonumber\\
            &\hspace{3cm}+ g([X,Y],Z) - g([Z,X],Y) - g([Y,Z],X).
        \end{align}
    }

    The following (local) formula is often useful in calculations (especially in general relativity, see Chapter \ref{chapter:GR}):
    \newformula{Divergence}{\index{divergence}\label{riemann:divergence}
        Consider the Riemannian volume form
        \begin{gather}
            \vol=\sqrt{\det(g)}\drx^1\wedge\cdots\wedge\drx^n.
        \end{gather}
        The divergence of a vector field $X$ is defined as follows:
        \begin{gather}
            \mathcal{L}_X\vol =: \mathrm{div}(X)\vol.
        \end{gather}
        With respect to an orthonormal frame field this is equivalent to
        \begin{gather}
            \mathrm{div}(X) = \frac{1}{2}\sum_{i=1}^n(\mathcal{L}_Xg)(e_i,e_i).
        \end{gather}
        Let $\nabla$ be the Levi-Civita connection. Using the Koszul formula one can show that the above formula implies the following equality
        \begin{gather}
            \mathrm{div}(X) = \tr(Y\mapsto\nabla_YX)\equiv\nabla_\mu X^\mu\,,
        \end{gather}
        where $\tr$ denotes the contraction (or trace) induced by $g$. This makes it clear that the covariant divergence is indeed a good generalization of the divergence \ref{vector:divergence} from vector calculus.

        Using the metric determinant one can locally write the divergence in terms of ordinary partial derivatives:
        \begin{gather}
            \label{riemann:divergence_partial}
            \nabla_\mu V^\mu = \frac{1}{\sqrt{\det(g)}}\partial_\mu(\sqrt{\det(g)}V^\mu).
        \end{gather}
    }
    \newdef{Laplace-Beltrami operator}{\index{Laplace-Beltrami operator}\index{Laplace!operator|seealso{Laplace-Beltrami}}\index{Bochner!Laplacian}
        Consider a Riemannian manifold $(M,g)$. The Laplace-Beltrami operator on $M$ is defined as the Laplace operator \ref{vector:laplace_operator}, i.e.~as the divergence of the gradient:
        \begin{gather}
            \Delta := \tr\nabla^2.
        \end{gather}
        This is, up to a sign\footnote{Some authors already include a minus sign in the definition of the Laplace-Beltrami operator.}, equal to the \textbf{Bochner Laplacian}:
        \begin{gather}
            \Delta = -\nabla^*\nabla.
        \end{gather}
    }

    The geodesic equation \ref{diff:geodesic_equation} can be generalized as follows:
    \newdef{Geodesic}{\index{geodesic}\label{riemann:geodesic}
        A curve $\gamma$ on a Riemannian manifold $(M,g)$ that is autoparallel with respect to the Levi-Civita connection:
        \begin{gather}
            \label{riemann:autoparallel_equation}
            \nabla_{\dot{\gamma}}\dot{\gamma} = 0.
        \end{gather}
    }

    ?? COMPLETE (HESSIAN, ...) ??

\subsection{Killing vectors}

    \newdef{Killing vector}{\index{Killing!vector}\label{riemann:killing_vector}
        Let $(M,g)$ be a pseudo-Riemannian manifold. A vector field $X$ satisfying
        \begin{gather}
            \mathcal{L}_Xg = 0
        \end{gather}
        is called a Killing vector field.
    }
    \begin{formula}
        Given a Levi-Civita connection $\nabla$ on $(M,g)$ one can rewrite the Killing condition as follows:
        \begin{gather}
            \nabla_{(\mu}X_{\nu)} = 0.
        \end{gather}
    \end{formula}

    \newdef{Killing tensor}{\index{Killing!tensor}
        Let $\nabla$ be the Levi-Civita connection on $(M,g)$. A tensor $T$ satisfying
        \begin{gather}
            \label{riemann:killing_tensor}
            \nabla_{(\mu_N}T_{\mu_1\ldots\mu_{N-1})} = 0
        \end{gather}
        is called a Killing tensor.
    }

\section{Curvature}\label{section:curvature}

    \newformula{Riemann curvature tensor}{\index{Riemann!curvature}
        The Riemann (curvature) tensor $R$ is defined as the following $(1,3)$-tensor:
        \begin{gather}
            R(v,w)z := [\nabla_v,\nabla_w]z - \nabla_{[v,w]}z\,,
        \end{gather}
        where $\nabla$ is the Levi-Civita connection. Locally it is given by
        \begin{gather}
            R^i_{jkl}e_i = R(e_k,e_l)e_j.
        \end{gather}
    }

    \begin{property}[Bianchi identity]\index{Bianchi identity}
        The first (or \textbf{algebraic}) Bianchi identity reads
        \begin{gather}
            R(X,Y)Z + R(Y,Z)X + R(Z,X)Y = 0.
        \end{gather}
        The second (or \textbf{differential}) Bianchi identity is a similar identity for the covariant derivative:
        \begin{gather}
            (\nabla_ZR)_{X,Y}W + (\nabla_XR)_{Y,Z}W + (\nabla_YR)_{Z,X}W = 0.
        \end{gather}
    \end{property}

    \newformula{Directional curvature operator\footnotemark}{\index{tidal force operator}
        \footnotetext{Also called the \textbf{tidal force operator} (mostly in physics).}
        \begin{gather}
            R_v(w) := R(w,v)v
        \end{gather}
    }

    \newformula{Sectional curvature}{\index{sectional!curvature}
        \begin{gather}
            \mathrm{sec}(v,w) := \frac{g(R(w,v)v,w)}{g(v,v)g(w,w) - g(v,w)^2} = \frac{g(R_v(w),w)}{g(v\wedge w,v\wedge w)}
        \end{gather}
        An important result states that the sectional curvature only depends on the span of $v,w$.
    }
    \remark{For surfaces the sectional curvature coincides with the Gaussian curvature $K$ by Gauss's Theorema Egregium \ref{diff:theorema_egregium}. In general, the sectional curvature gives the Gaussian curvature of the plane spanned by the vectors $v,w$.}

    \newformula{Ricci tensor}{\index{Ricci!tensor}
        In coordinate-free notation the Ricci tensor is defined as the trace of the Riemann tensor:
        \begin{gather}
            \mathrm{Ric}(v,w) := \tr\big(x\mapsto R(x,v)w\big)
        \end{gather}
        Equivalently
        \begin{gather}
            \mathrm{Ric}(v,w) = \sum_{i=1}^ng(R(e_i,v)w,e_i).
        \end{gather}
        Locally this becomes:
        \begin{gather}
            \label{riemann:ricci_tensor}
            R_{\mu\nu}\equiv\mathrm{Ric}_{\mu\nu} := R^\lambda_{\ \mu\nu\lambda}.
        \end{gather}
    }
    \begin{property}
        The Ricci tensor can also be rewritten in terms of the sectional curvature whenever $\|v\|=1$. Let $\{e_1,\ldots,e_{n-1}\}$ be a set of orthonormal vectors such that $\{e_1,\ldots,e_{n-1},v\}$ forms an orthonormal basis.
        \begin{gather}
            \mathrm{Ric}(v,v) = \sum_{i=1}^{n-1}\mathrm{sec}(v,e_i).
        \end{gather}
        It follows that the Ricci tensor can be interpreted as an averaged (sectional) curvature.
    \end{property}

    \newformula{Ricci scalar}{\index{Ricci!scalar}\index{scalar!curvature}
        \begin{gather}
            \label{riemann:ricci_scalar}
            R := R^\mu_{\ \mu}
        \end{gather}
        This (scalar) quantity is also called the \textbf{scalar curvature}.
    }

    \newformula{Einstein tensor}{\index{Einstein!tensor}
        \begin{gather}
            \label{riemann:einstein_tensor}
            G_{\mu\nu} := R_{\mu\nu} - \frac{1}{2}g_{\mu\nu}R
        \end{gather}
    }
    \begin{property}
        For 4-manifolds the Einstein tensor $G_{\mu\nu}$ is the only tensor containing at most second derivatives of the metric that satisfies
        \begin{gather}
            \nabla_\mu G^{\mu\nu} = 0.
        \end{gather}
    \end{property}

    \newdef{Einstein manifold}{\index{Einstein!manifold}\label{riemann:einstein_manifold}
        A Riemannian manifold for which the Ricci tensor is proportional to the metric.
    }
    \sremark{This name is justified by the fact that Einstein manifolds are exactly the solutions of the Einstein field equations \eqref{relativity:einstein_field_equations} (with a cosmological constant).}

\section{Spinor bundles}\index{spinor}\index{spin}\label{section:spinor_bundles}

    In this section all (pseudo)Riemannian manifolds are assumed to be orientable since this assures that the structure group of $TM$ can be reduced to the special orthogonal group. For the more general definition of $\mathrm{Pin}$-bundles see \cite{AMP2}.

\subsection{Spin structures}

    From Definition \ref{linalgebra:vector_alternative} it is known that one can define a (complex) vector $v\in V$ as an equivalence class of couples $(c,\mathfrak{b})$, where $\lambda\in\mathbb{C}^{\dim(V)}$ is a (coordinate) vector and $\psi$ is a (linear) frame of $V$. This will now be extended to Clifford algebras and spinors. This section was not placed in the chapter on Clifford algebras because the natural setting for spinors is Riemannian geometry.

    \newdef{Spinor}{
        Let $V$ be a vector space equipped with a metric $g$ of signature $(p,q)$. Consider the set $\mathbb{C}^{2^k}\times F_\mathrm{SO}V\times\mathrm{Spin}(p,q)$, where $k=\lfloor\frac{p+q}{2}\rfloor$ and $F_\mathrm{SO}V$ is the set of orthonormal frames in $V$. One can define an equivalence relation on this set as follows. Two triples $(c_1,\mathfrak{b}_1,\Lambda_1)$ and $(c_2,\mathfrak{b}_2,\Lambda_2)$ are identified if and only if
        \begin{gather}
            c_2 = \Lambda c_1 \qquad\qquad \mathfrak{b}_1=L\mathfrak{b}_2 \qquad\qquad \Lambda=\Lambda_2\Lambda_1^{-1} \qquad\qquad \rho(\Lambda)=L\,,
        \end{gather}
        where $\rho$ is the 2-to-1 covering map $\mathrm{Spin}(p,q)\rightarrow\mathrm{SO}(p,q)$. An equivalence class of such triples (or a representative thereof) is called a \textbf{spinor}. The $2^k$ numbers in $c_1$ are called the \textbf{components} of the spinor in the \textbf{spin frame} $(\mathfrak{b}_1,\Lambda_1)$.

        It should be noted that the two elements of a spin frame $(\mathfrak{b},\Lambda)$ are not independent. Choose a ``fiducial frame'' $(\mathfrak{b}_0,e)$, where $e$ is the identity element of $\mathrm{Spin}(p,q)$. The couple $(\mathfrak{b},\Lambda)$ is a well-defined spin frame if and only if $\rho(\Lambda)=L$ whenever $\mathfrak{b}=L\mathfrak{b}_0$. Note that different choices of fiducial frame give different, yet isomorphic, spinor spaces.
    }
    \newdef{Spinor field}{
        Let $(M,g)$ be a (pseudo)Riemannian manifold. Every tangent space $T_pM$ is a vector space equipped with a nondegenerate bilinear form and, hence, one can use the above definition to construct a spinor space at $p$. If the orthonormal frame bundle $F_\mathrm{SO}M$ is trivial, one can choose a section $p\mapsto\mathfrak{b}(p)$ and define the fiducial frame field to be $p\mapsto(\mathfrak{b}(p),e)$.

        However, if $F_\mathrm{SO}M$ is not trivial, this construction only works locally. To be able to extend it to the whole manifold, one needs to patch the different frame fields together. The required compatibility conditions reads as follows:
        \begin{gather}
            \rho(\Lambda_i(x)\Lambda_j^{-1}(x))=L_{ij}(x)
        \end{gather}
        whenever
        \begin{gather}
            \mathfrak{b}_i(x) = L_{ij}(x)\mathfrak{b}_j(x)
        \end{gather}
        for all $x\in U_i\cap U_j$.
    }

    It can be shown that a manifold admits the definition of a global spin frame field if and only if it admits a spin structure:
    \newdef{Spin structure}{\label{riemann:spin_structure}
        Consider the orthonormal frame bundle \[\pi_\mathrm{SO}:F_\mathrm{SO}M\rightarrow M\] that is obtained by reducing the structure group of the frame bundle $FM$ from $\GL(n)$ to $\mathrm{SO}(n)$.

        The smooth manifold $M$ is said to have a spin structure (cf. Definition \ref{bundle:G_structure}) if there exists a principal $\mathrm{Spin}(n)$-bundle $\pi_\mathrm{Spin}:P_\mathrm{Spin}\rightarrow M$ and an equivariant 2-fold lifting of $F_\mathrm{SO}$ to $P_\mathrm{Spin}$, i.e.~a morphism $\xi:P_\mathrm{Spin}\rightarrow F_\mathrm{SO}M$ together with the 2-fold covering map $\rho:\mathrm{Spin}(n)\rightarrow\mathrm{SO}(n)$ that satisfy
        \begin{itemize}
            \item $\pi_\mathrm{SO}\circ\xi = \pi_\mathrm{Spin}$, and
            \item $\xi(p\vartriangleleft g) = \xi(p)\cdot\rho(g)$
        \end{itemize}
        for all $g\in\mathrm{Spin}(n)$, where $\vartriangleleft$ and $\cdot$ denote the right actions of the respective structure groups. If $M$ admits a spin structure, it is called a \textbf{spin manifold} and the principal $\mathrm{Spin}(n)$-bundle $P_\mathrm{Spin}$ is called the \textbf{spin frame bundle} (of $M$).
    }
    \newdef{Spinor bundle}{\index{spinor!bundle}\label{riemann:spinor_bundle}
        The vector bundle associated to the spin frame bundle induced by the (fundamental) spinor representation \ref{clifford:spinor}. Sections of the spinor bundle are called \textbf{spinor fields}. If the dimension of the manifold is even, the spinor representation decomposes into two irreducible representations, the associated vector bundles are called bundles of \textbf{half-spinors}.
    }

    \begin{example}
        A 3-manifold is spin if it is compact and orientable.
    \end{example}
    \begin{example}
        Any (stably) parallelizable manifold is spin.
    \end{example}

\subsection{Stiefel-Whitney classes}\index{Stiefel-Whitney class}\label{section:stiefel_whitney}

    \newdef{Stiefel-Whitney classes}{
        Consider a rank-$n$ vector bundle $E$ over a paracompact space $M$ (hence admitting an $\mathrm{O}(n)$-reduction). The Stiefel-Whitney classes of $E$ are characteristic classes $w_n(E)\in H^\bullet(M;\mathbb{Z}_2)$ defined by the following conditions:
        \begin{enumerate}
            \item\textbf{Normalization}: The tautological line bundle over the circle, i.e.~the M\"obius strip, has a nontrivial $w_1$.
            \item\textbf{Rank}: $w_0(E)=1$ and $w_i(E)=0$ for all $i>n$.
            \item\textbf{Whitney product formula}: $w_k(E\oplus E')=\bigoplus_{i=1}^k w_i(E)\smile w_{k-i}(E')$ for all finite-rank vector bundles $E'\rightarrow M$.
            \item\textbf{Naturality}: Every morphism $f:M\rightarrow M'$ of base manifolds induces a pullback-isomorphism $w(f^*E)=f^*w(E)$.
        \end{enumerate}
    }

    \begin{property}[Independent sections]
        Consider a rank-$n$ vector bundle $\pi:E\rightarrow M$. If $w_i(E)$ vanishes, the restriction of $E$ to the $i$-skeleton of $M$ admits $n-i+1$ linearly independent sections.
    \end{property}

    Consider a principal $\mathrm{O}(n)$-bundle $\pbundle$ together with an open cover $\{U_i\}_{i\in I}$ of $M$. This bundle is locally defined by a \v{C}ech 2-cocycle $g_{ij}:U_i\cap U_j\rightarrow\mathrm{O}(n)$. Using the two-fold covering map $\rho:\mathrm{Pin}(n)\rightarrow\mathrm{O}(n)$, this cocycle can be used to define a function
    \begin{gather}
        p_{ijk}:U_i\cap U_j\cap U_k\rightarrow\mathrm{Spin}(n):x\mapsto\gamma_{jk}(x)\gamma^{-1}_{ik}(x)\gamma_{ij}(x)\,,
    \end{gather}
    where $\gamma_{ij}$ is a lift of the cocycle $g_{ij}$ to $\mathrm{Pin}(n)$. It can be shown that this defines a 2-cocycle with values in $\mathbb{Z}_2$, i.e.~$[p_{ijk}]\in\check{H}^2(M;\mathbb{Z}_2)$. If this cocycle vanishes, the $\mathrm{O}$-bundle admits a well-defined $\mathrm{Pin}$-lift in the sense of Definition \ref{bundle:reduction}.

    \begin{property}[Stiefel-Whitney classes]
        For a $\mathrm{Pin}^+(n)$-extension of an $\mathrm{O}(n)$-bundle, the cocycle $p$ satisfies $[p]=w_2$. However, for a $\mathrm{Pin}^-(n)$-extension of an $\mathrm{O}(n)$-bundle, the cocycle $p$ satisfies $[p]=w_2+w_1\smile w_1$. So, in general $[p]$ is not a Stiefel-Whitney class. However, note that if $w_1$ vanishes, i.e.~if the bundle is orientable, the cocycle does reduce to the second Stiefel-Whitney class.
    \end{property}

    The classification of spin manifolds can be stated in terms of characteristic classes. However, instead of the usual $\mathbb{R}$- or $\mathbb{Z}$-valued cohomology classes, one needs classes in $\mathbb{Z}_2$-cohomology.
    \begin{property}
        Consider the orientation line bundle \ref{bundle:orientation_bundle} of an $\mathrm{O}(n)$-bundle. The cocycles of this bundle define a cohomology class $w_1\in H^1(M;\mathbb{Z}_2)$. It can be shown that this class is the first Stiefel-Whitney class.
    \end{property}
    \begin{result}[Orientability]\index{orientable!manifold}
        A smooth manifold is orientable if and only if its first Stiefel-Whitney class vanishes.

        This class has a geometric interpretation. Consider any triangulation of the base manifold. A choice of orientation consists of a consistent assignment of a sign to every edge in the 1-skeleton (or, equivalently, a trivialization of the bundle over the 1-skeleton). The total change
    \end{result}
    \begin{property}[Spin manifold]
        A smooth orientable manifold $M$ is spin if and only if its second Stiefel-Whitney class vanishes. Furthermore, the distinct spin structures form an affine space over $H^1(M;\mathbb{Z}_2)$.
    \end{property}

    \newdef{Integral classes}{
        Consider the Bockstein morphism $\beta:H^i(M;\mathbb{Z}_2)\rightarrow H^{i+1}(M;\mathbb{Z})$ associated to the mod-2 reduction $\mathbb{Z}\rightarrow\mathbb{Z}_2$. The integral Stiefel-Whitney classes are defined as the images $\beta w_i\in H^{i+1}(M;\mathbb{Z})$.
    }
    \begin{property}[$\mathrm{Spin}^\mathbb{C}$-structures]\label{riemann:spin_c}
        An orientable vector bundle admits a $\mathrm{Spin}^\mathbb{C}$-structure if and only if its third integral Stiefel-Whitney class vanishes.
    \end{property}

\subsection{Dirac operators}

    In this section the partial derivatives $\partial_i$ and gradient operator $\sum_{i=1}^ne_i\partial_i$ are generalized to Clifford algebras and Clifford modules.

    \newdef{Clifford bundle}{\index{Clifford!bundle}
        Consider a (pseudo-)Riemannian manifold $(M,g)$ of signature $(p,q)$. For every point $p\in M$ one can construct a Clifford algebra associated to the tangent space $(T_pM,g_p)$. Using these Clifford algebras one can construct an associated bundle to $TM$ that has $C\ell_{p,q}(\mathbb{R})$ as its typical fibre. A vector bundle with a Clifford algebra as typical fibre, for which the local trivializations respect the algebra structure, is called a Clifford bundle.\footnote{Note that one can use this construction to turn any vector bundle that admits a fibre metric into a Clifford bundle. Moreover, this is a particular instance of the more general notion of \textit{$C^*$-algebra bundles}.}
    }

    The following criterion gives an algebraic characterization of spin-manifolds:
    \begin{property}[Plymen's criterion]\index{Plymen's criterion}\index{spin}
        A Riemannian manifold admits a $\mathrm{Spin}^\mathbb{C}$-structure if and only if the $C^*$-algebra of continuous section of its Clifford bundle is Morita-equivalent to the $C^*$-algebra of continuous functions. (Note that Morita-equivalence of $C^*$-algebras is more involved than the similar notion for ordinary rings.)
    \end{property}

    The spinor bundle \ref{riemann:spinor_bundle} is a particular instance of the following notion:
    \newdef{Clifford module bundle}{\index{Clifford!module}\label{riemann:clifford_module}
        Consider a (pseudo-)Riemannian manifold $(M,g)$ with its associated Clifford bundle $C\ell(TM)$. Any vector bundle that admits a left $C\ell(TM)$-action is called a Clifford module (bundle) over $M$.
    }

    To be able to define a Dirac operator on spinor bundles, one first needs to define the Dirac operator on $\mathbb{R}^n$. This Dirac operator is obtained by composing the ordinary gradient
    \begin{gather}
        \partial:=\sum_{i=1}^ne_i\partial_i
    \end{gather}
    with the linear injection $\iota_{C\ell}:e_i\mapsto\gamma_i$ that sends a basis of $\mathbb{R}^n$ to the corresponding generators of $C\ell_n(\mathbb{R})$:
    \begin{gather}
        \label{riemann:dirac_operator_R}
        \underline{\partial} := \sum_{i=1}^n\gamma_i\partial_i.
    \end{gather}
    To extend this definition to Clifford modules one simply needs to replace partial derivatives by covariant derivatives as usual:
    \begin{property}[Induced Clifford connection]
        Let $(M,g)$ be a (pseudo-)Riemannian manifold and let $\nabla$ be the associated Levi-Civita connection. For every Clifford module $E$ over $M$ there exists a unique connection $\nabla^E:\Gamma(E)\rightarrow\Gamma(T^*M\otimes E)$ that respects the Clifford action:
        \begin{gather}
            \nabla^E(\iota_{C\ell}(X)\cdot\sigma) = \iota_{C\ell}(\nabla X)\cdot\sigma + \iota_{C\ell}(X)\cdot\nabla^E\sigma\,,
        \end{gather}
        where $\iota_{C\ell}:TM\rightarrow C\ell(TM)$ is the canonical map that embeds a vector field in $C\ell(TM)$.
    \end{property}

    \newdef{Dirac operator}{\index{Dirac!operator}\label{riemann:dirac_operator}
        Consider a (pseudo-)Riemannian manifold $(M,g)$ together with a Clifford module $E$. If $\nabla^E$ is the compatible connection from the previous property, the Dirac operator on $E$ is defined as follows:
        \begin{gather}
            \underline{\mathrm{D}} := \sum_{i=1}^n\gamma_i\cdot\nabla^E_{e_i}\sigma\,,
        \end{gather}
        where $\{e_i\}_{i\leq n}$ is a local (orthonormal) frame field.
    }
    \begin{property}[Ellipticity]
        The Dirac operator is a self-adjoint elliptic differential operator \ref{bundle:differential_operator}.
    \end{property}

    \begin{definition}[Index]
        In many cases the Clifford module $E$ will be obtained by taking the tensor product of some vector bundle with a spinor bundle $S$. Such a spinor bundle decomposes as
        \begin{gather}
            S\cong S^+\oplus S^-
        \end{gather}
        under Clifford multiplication, which in turn induces a decomposition of $E$. The Dirac operator $\underline{\mathrm{D}}$ interchanges these spaces:
        \begin{gather}
            \underline{\mathrm{D}}S^+=S^-\qquad\qquad\underline{\mathrm{D}}S^-=S^+.
        \end{gather}
        By the previous property, $\underline{\mathrm{D}}$ is elliptic and, if $M$ is compact, one can show that this implies that it is also Fredholm \ref{functional:fredholm}. The index of $\underline{\mathrm{D}}$ is defined as the Fredholm index of $\underline{\mathrm{D}}|_{E^+}$:
        \begin{gather}
            \mathrm{ind}(\underline{\mathrm{D}}) := \dim\ker(\underline{\mathrm{D}}|_{E^+})-\dim\mathrm{coker}(\underline{\mathrm{D}}|_{E^+}).
        \end{gather}
    \end{definition}

    The symbol $\sigma(\mathrm{D}):\pi^*E\rightarrow\pi^*F$, where $\pi:T^*M\rightarrow M$ is the cotangent bundle projection, of every elliptic differential operator gives an isomorphism on all sections except the zero section, so it induces a class in $K(T^*M,T^*M_0)$. One can then use the (relative) Chern character \ref{k:chern_character} to obtain a (compactly supported\footnote{The Chern character gives a relative cohomology class in $H^\bullet(T^*M,T^*M_0)\cong H^\bullet(D(T^*M),S(T^*M))$. The (unit) sphere bundle over a compact manifold is compact, so this class injects into the compactly supported cohomology \ref{bundle:cohomology_compact_support} of $T^*M$.}) cohomology class on $T^*M$ and apply the Thom isomorphism \ref{bundle:thom_isomorphism} to obtain a (compactly supported) cohomology class on $M$.

    However, because $K$-theory is a (multiplicative generalized Eilenberg-Steenrod) cohomology theory, it also admits a Thom isomorphism. So one could first map relative $K$-theory (or the reduced $K$-theory of the Thom space) to the $K$-theory of $T^*M$ and then apply the Chern character.

    These two approaches are not equivalent. The Thom class, which induces the Thom isomorphism through the cup product, is sent to the image of the Todd class under the Thom isomorphism:
    \begin{gather}
        \mathrm{ch}(\mathcal{T}(1))\equiv\mathrm{ch}(\mathrm{th}(E)) = \mathcal{T}(\mathrm{td}(E))\,,
    \end{gather}
    where 1 denotes the multiplicative unit in $K$-theory and $\mathrm{td}$ is the Todd class \ref{bundle:todd_class}. This also implies that
    \begin{gather}
        \mathrm{ch}(\mathcal{T}_K(x))=\mathcal{T}(\mathrm{ch}(x)\cup\mathrm{td}(E))\,,
    \end{gather}
    for every class $x\in K(M)$. These considerations lead to the following definition of the index of $\mathrm{D}$ (here it is assumed that a Riemannian metric is provided such that $TM$ and $T^*M$ can be identified):
    \newdef{Topological index}{
        Consider a compact $n$-dimensional manifold $M$ together with an elliptic differential operator $D$.
        \begin{align}
            \mathrm{ind}(D) :=& (-1)^{n(n+1)/2} \int_M\mathcal{T}^{-1}(\mathrm{ch}(\sigma(\mathrm{D})))\cup\mathrm{td}(T_\mathbb{C}M)\nonumber\\
            =& (-1)^n \int_{TM}\mathrm{ch}(\sigma(\mathrm{D}))\cup\mathrm{td}(T_\mathbb{C}M)\,,
        \end{align}
        where $\mathcal{T}$ is the Thom isomorphism on $TM$.
    }
    \begin{result}
        The index of an elliptic differential operator on an odd-dimensional manifold vanishes.
    \end{result}

    \begin{property}
        The $\hat{A}$-genus \ref{bundle:a_roof_genus} of a spin manifold is an integer.
    \end{property}

    \begin{formula}[Lichnerowicz formula]\index{Lichnerowicz formula}\label{riemann:lichnerowicz_formula}
        Let $\underline{\mathrm{D}}$ be the Dirac operator on a spinor bundle $S$. Unlike in the Euclidean case, the Dirac operator does not square to the (Bochner) Laplacian:
        \begin{gather}
            \underline{\mathrm{D}}^2 = \nabla^*\nabla + \frac{1}{4}R\,,
        \end{gather}
        where $R$ is the scalar (Ricci) curvature.
    \end{formula}

    ?? COMPLETE ??

\section{Conformal structures}\label{section:conformal_structures}

    \newdef{Conformal transformation}{
        Consider two (pseudo-)Riemannian manifolds $(M,g)$ and $(M',g')$. A smooth function $f:M\rightarrow M'$ is said to be conformal if it leaves the metric invariant up to a scale transformation (compare this to Definition \ref{diff:conformal_map}):
        \begin{gather}
            f^*g' = \Omega g
        \end{gather}
        for some smooth positive function $\Omega:M\rightarrow\mathbb{R}^+$. If $f$ is a diffeomorphism, it is called a \textbf{conformal transformation}.
    }

    Infinitesimally these maps are characterized by a special type of vector field:
    \newdef{Conformal Killing vector}{\index{Killing!conformal vector}
        Consider a pseudo-Riemannian manifold $(M,g)$. A vector field $X$ is called a conformal Killing vector field, with \textbf{conformal factor} $\kappa:M\rightarrow\mathbb{R}$, if it satisfies
        \begin{gather}
            \mathcal{L}_Xg = \kappa g.
        \end{gather}
        In local coordinates this amounts to
        \begin{gather}
            \label{riemann:conformal_killing}
            \nabla_\mu X_\nu + \nabla_\nu X_\mu = \kappa g_{\mu\nu}\,,
        \end{gather}
        where $\nabla$ is the Levi-Civita connection associated to $(M,g)$. Equivalently, a vector field is a conformal Killing vector field if its flow determines a conformal transformation.
    }

    By parametrizing an infinitesimal transformation as $x^\mu\rightarrow x^\mu+\varepsilon^\mu$, one obtains the following infinitesimal generators:
    \begin{itemize}
        \item\textbf{Translations}: $a^\mu\partial_\mu$,
        \item\textbf{Rotations} (orthogonal transformations): $\omega^\mu_{\ \nu}x^\nu\partial_\mu$,
        \item\textbf{Dilations}: $\lambda x^\mu\partial_\mu$, and
        \item\textbf{Special conformal transformations}: $x^2b^\mu\partial_\mu - 2(b\cdot x)x^\mu\partial_\mu$.
    \end{itemize}
    As usual, exponentiating these generators gives the finite transformations. One immediately notices that the Poincar\'e group is a subgroup of the conformal group. However, the conformal group of a (pseudo-)Riemannian manifold $M$ is not just the group of conformal transformations of $M$:
    \newdef{Conformal compactification}{\index{compactification!conformal}
        Consider a (pseudo-)Riemannian manifold $(M,g)$. A conformal compactification of $M$ is a compact manifold $N$ such that there exists a conformal transformation that embeds $M$ as a dense, open subspace of $N$.
    }
    \newdef{Conformal group}{\index{conformal!group}
        \nomenclature[S_CONF]{$\mathrm{Conf}(M)$}{conformal group of (pseudo-)Riemannian manifold $M$}
        The conformal group $\mathrm{Conf}(M)$ is the connected component of the identity of the conformal diffeomorphism group of the conformal compactification of $M$.
    }
    \begin{property}\label{riemann:conformal_group}
        The conformal group of a (pseudo-)Euclidean space of signature $(p,q)$ is isomorphic to $\mathrm{SO}(p+1,q+1)$.
    \end{property}

\subsection{\difficult{Distributions}}\index{distribution}

    For more information on the theory of distributions on Euclidean space, see Chapter \ref{chapter:distributions}. There are two ways to introduce distributions on general manifolds. Either one uses the locally Euclidean character, defines distributions on charts and glues them together using some compatibility data (see for example \cite{AMP1}) or one defines them as the dual of the space of smooth functions (with compact support) as in the Euclidean case. In this section the second approach is followed.

    The base manifold $M$ will be required to be paracompact and second-countable. Moreover, it is assumed that a Riemannian metric $g$ is given. This data allows to turn the space of smooth sections of any tensor bundle over $M$ into a Fr\'echet space \ref{functional:frechet_space} using a generalization of the seminorms \eqref{distribution:D_seminorm}, where the (partial) derivatives $\partial_i$ are replaced by covariant derivatives $\nabla_i$. The norm will now also be the one induced (fibrewise) by $g$. In a similar way one can for every compact subset $K\subseteq M$ define the space $\mathcal{D}(K,\otimes^p)$ of smooth $p$-tensor fields with support in $K$. By taking the direct limit (with its associated topology) one obtains the space of smooth compactly supported $p$-tensor fields $\mathcal{D}(M,\otimes^p)$.

    \newdef{Tensor distribution}{\index{distribution!tensor}
        The space of tensor distributions of order $p\in\mathbb{N}$ is the continuous dual of $\mathcal{D}(M,\otimes^p)$.
    }

    Much of the theory of distributions on Euclidean space can be generalized to smooth manifolds without too much trouble (for example, one again obtains a dense inclusion $\mathcal{D}\hookrightarrow\mathcal{D}'$). An interesting generalization is the definition of the covariant derivative:
    \newdef{Covariant derivative}{\index{covariant!derivative}
        Let $(M,g)$ be a Riemannian manifold with associated Levi-Civita connection $\nabla$. The covariant derivative of a tensor distribution $T$ is defined using duality as follows (as in the case of Euclidean space this can be interpreted as an extension of the integration-by-parts formula):
        \begin{gather}
            \langle\nabla T,\sigma\rangle := -\langle T,g\cdot\nabla\sigma \rangle,
        \end{gather}
        where $g\cdot\nabla\sigma$ denotes the \textbf{internal contraction} (generalizing the divergence of a vector field) which, in local coordinates, is given by
        \begin{gather}
            (g\cdot\nabla\sigma)^{i_1\ldots i_p} = \nabla_j\sigma^{ji_1\ldots i_p}.
        \end{gather}
    }

    Definition \ref{distributions:wave_front_set} can easily be generalized to smooth manifolds:
    \newdef{Wave front set}{\index{wave!front}
        The wave front set of a distribution $\phi\in D'(M)$ is defined as follows:
        \begin{gather}
            \mathrm{WF}(\phi) := \{(x,v)\in T^*M_0\mid v\in\Sigma_x(\phi)\},
        \end{gather}
        where the singular fibre $\Sigma_x(\phi)$ is defined as in the Euclidean case (since by localization one can restrict to a chart containing $x$ and work in local coordinates).
    }

    ?? COMPLETE? ??
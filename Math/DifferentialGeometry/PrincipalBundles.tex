\chapter{Principal Bundles}\label{chapter:principal_bundles}

    The main reference for this chapter is~\citet{sontz_principal_2015}. Ths chapter uses the language of (Lie) group theory quite heavily. For all things related to group theory, the reader is referred to \cref{section:groups} and \cref{section:group_actions}. For more information on Lie groups and their associated Lie algebras, the reader is referred to \cref{chapter:lie}.

    \minitoc

\section{Principal bundles}

    \newdef{Principal bundle}{\index{principal!bundle}
        A fibre bundle $\pi:P\rightarrow B$ equipped with a right action $\rho:P\times G\rightarrow B$ that satisfies two properties:
        \begin{enumerate}
            \item\textbf{Free action}: $\rho$ is free. This implies that the orbits are isomorphic to the structure group.
            \item\textbf{Fibrewise transitivity}: The action preserves fibres, i.e.~$y\cdot g\in F_b$ for all $y\in F_b,g\in G$. In turn this implies that the fibres over $B$ are exactly the orbits of $\rho$.
        \end{enumerate}
        Together these properties imply that the typical fibre $F$ and structure group $G$ can be identified. The right action of $G$ on $P$ will often be denoted by $R_g$ (unless this would give conflicts with the same notation for the action of $G$ on itself).
    }
    \begin{remark}[$G$-torsor]\label{bundle:fibre_torsor}
        Although the fibres are homeomorphic to $G$, they do not carry a group structure due to the lack of a distinct identity element. This turns them into $G$-torsors (\cref{group:torsor}). However, it is possible to locally endow the fibres with a group structure by choosing an element of every fibre to be the identity element.
    \end{remark}

    \begin{property}
        A corollary of the definition is that the bundle $\pi:P\rightarrow B$ is isomorphic to the bundle $\xi:P\rightarrow P/G$, where $P/G$ denotes the orbit space of $P$ with respect to the $G$-action (which can be proven to be proper) and $\xi$ is the quotient projection.
    \end{property}

    In fact this property can be used to give an alternative characterization of smooth principal bundles.
    \begin{property}[Quotient manifold theorem]\label{bundle:quotient_manifold_theorem}
        Consider a smooth manifold $P$ equipped with a free and proper (right) action of a Lie group $G$. The following statements hold:
        \begin{itemize}
            \item The orbit space $P/G$ is a smooth manifold.
            \item The projection $P\rightarrow P/G$ is a submersion.
            \item $P$ is principal $G$-bundle over $P/G$.
        \end{itemize}
    \end{property}

    \begin{property}[Dimension]\label{bundle:principal_bundle_dimension}
        The dimension of $P$ is given by
        \begin{gather}
            \dim(P) = \dim(B) + \dim(G)\,.
        \end{gather}
    \end{property}

    \begin{property}
        Every local trivialization $\varphi_i$ is $G$-equivariant:
        \begin{gather}
            \varphi_i(z\cdot g) = \varphi_i(z)\cdot g\,.
        \end{gather}
    \end{property}

    \newdef{Principal bundle map}{\index{bundle!map}
        A bundle map between principal $G$-bundles is a pair of morphisms $(f_B,f_P)$ such that:
        \begin{enumerate}
            \item $(f_B,f_P)$ is an ordinary bundle map (\cref{bundle:bundle_map}).
            \item $f_P$ is $G$-equivariant.
        \end{enumerate}
    }

    The following property proves that the equivariance condition on principal bundle maps is, in fact, a very strong condition.
    \begin{property}
        Every principal bundle map covering the identity is an isomorphism.
    \end{property}

    \newdef{Vertical automorphism}{\index{vertical!automorphism}\index{gauge!transformation}\label{bundle:vertical_automorphism}
        Consider a principal $G$-bundle $\pi:P\rightarrow B$. An automorphism $f$ of this bundle is said to be vertical if it covers the identity, i.e.~$\pi\circ f=\pi$. It is the subgroup $\Aut_V(P)\subset\Aut(P)$ of vertical automorphisms that is known as the \textbf{group of gauge transformations} or \textbf{gauge group}\footnote{This should not be confused with the structure group $G$, which is also sometimes called the gauge group in physics.} in physics.
    }
    \sremark{It should be clear that the above definition can easily be generalized to arbitrary fibre bundles.}

\subsection{Associated bundles}

    \begin{construct}[Associated principal bundle]\label{bundle:associated_bundle_construction}
        For every fibre bundle one can construct an associated principal $G$-bundle by replacing the fibre $F$ by $G$ itself using the fibre bundle construction theorem \ref{bundle:fibre_bundle_construction_theorem}, where the left action of $G$ is given by left multiplication in $G$.
    \end{construct}

    \begin{property}[Triviality]
        A fibre bundle $\xi$ is trivial if and only if its associated principal bundle is trivial. More generally, two fibre bundles are isomorphic if and only if their associated principal bundles are isomorphic.
    \end{property}

    \begin{example}[Frame bundle]\index{frame!bundle}\label{bundle:frame_bundle}
        Let $V$ be an $n$-dimensional vector space and denote the set of frames (\cref{linalgebra:frame}) of $V$ by $FV$. It follows from the fact that every basis transformation is given by the action of an element of the general linear group that $FV$ is isomorphic to $\GL(V)\cong\GL(\mathbb{R}^n)$.

        Given a rank-$n$ vector bundle $E$, one can construct an associated principal bundle by replacing every fibre $\pi^{-1}(b)$ by $F\bigl(\pi^{-1}(b)\bigr)\cong\GL(\mathbb{R}^n)$. The right action on this bundle by $g\in\GL(\mathbb{R}^n)$ is given by the basis transformation $\widetilde{e}_j=g^i_je_i$. This bundle, the frame bundle, is denoted by $FE$ or $FM$ in the case of the tangent bundle $E=TM$.
    \end{example}

    \begin{construct}[Associated bundle to a principal bundle]\index{associated!bundle}\label{bundle:associated_bundle}
        Consider a principal $G$-bundle $\pi:P\rightarrow B$ and let $F$ be a space equipped with a left $G$-action $\vartriangleright$. One can construct an associated bundle $P_F\equiv P \times_\vartriangleright F$ in the following way:
        \begin{enumerate}
            \item Define an equivalence relation $\sim_G$ on the product space $P\times F$ by
                \begin{gather}
                    \label{bundle:associated_bundle_equivalence}
                    (p,f)\sim_G(p',f')\iff\exists g\in G:(p',f') = (p\cdot g,g^{-1}\vartriangleright f)\,.
                \end{gather}
            \item Define the total space of the associated bundle as the following quotient space:
                \begin{gather}
                    P_F := (P\times F)/\sim_G\,.
                \end{gather}
            \item Define the projection $\pi_F:P_F\rightarrow B$ as follows:
                \begin{gather}
                    \pi_F:[p,f]\mapsto\pi(p)\,,
                \end{gather}
            where $[p,f]$ is the equivalence class of $(p,f)\in P\times F$ in $P_F$.
        \end{enumerate}
    \end{construct}
    \begin{example}[Tangent bundle]
        Starting from the frame bundle $FM$ over a manifold $M$, one can reconstruct, up to a bundle isomorphism, the tangent bundle $TM$ in the following way. Consider the left $G$-action $\vartriangleright$ of a matrix group given by
        \begin{gather}
            \vartriangleright:G\times\mathbb{R}^n\rightarrow\mathbb{R}^n:(g\vartriangleright f)^i \mapsto g^i_{\ j}f^j\,.
        \end{gather}
        The tangent bundle is isomorphic to the associated bundle $FM\times_\vartriangleright\mathbb{R}^n$, where the bundle map is defined as $[e,v]\mapsto v^ie_i\in TM$.
    \end{example}

    \begin{example}[Adjoint bundle]\index{adjoint!bundle}
        Consider a principal $G$-bundle $P$. $G$ acts on itself by conjugation through the adjoint action
        \begin{gather}
            \mathrm{Ad}:G\times G\rightarrow G:(g,h)\mapsto g^{-1}hg\,.
        \end{gather}
        This action induces an associated bundle $\mathrm{Ad}(P):=P\times_GG$, suitable named the adjoint bundle of $P$.
    \end{example}
    \begin{property}[Vertical automorphisms]
        There exists an isomorphism between the vertical automorphism group $\Aut_V(P)$ and the group of sections of the adjoint bundle $\mathrm{Ad}(P)$.
    \end{property}

    \begin{construct}[Associated bundle map]\index{bundle!map}
        Given a principal bundle map $(f_B,f_P)$ between two principal bundles one can construct an associated bundle map between any two of their associated bundles with the same typical fibre in the following way:
        \begin{itemize}
            \item The total space map $\widetilde{f}_P:P\times_GF\rightarrow P'\times_{G'}F$ is given by
                \begin{gather}
                    \widetilde{f}_P([p,f]) := [f_P(p),f]\,.
                \end{gather}
            \item The base space map is simply given by $f_B$ itself:
                \begin{gather}
                    \widetilde{f}_B(b) = f_B(b)\,.
                \end{gather}
        \end{itemize}
    \end{construct}

\subsection{Sections}

    Although every vector bundle has at least one global section, the zero section, a general principal bundle does not necessarily have a global section. This is made clear by the following property.
    \begin{property}[Trivial bundles]
        A principal $G$-bundle $P$ is trivial if and only if there exists a global section of $P$. Furthermore, there exists a bijection between the set of global sections $\Gamma(P)$ and the set of trivializations $\mathrm{Triv}(P)$.
    \end{property}
    \begin{result}\label{bundle:prin_section_triv}
        Every local section $\sigma:U\rightarrow P$ induces a local trivialization $\varphi$ by
        \begin{gather}
            \varphi^{-1}:(m,g)\mapsto\sigma(m)\cdot g\,.
        \end{gather}
        The converse is also true. Consider a local trivialization $\psi^{-1}:U\times G\rightarrow\pi^{-1}(U)$. A local section can be obtained by taking $\sigma(u):=\psi^{-1}(u,e)$.
    \end{result}

    \Cref{bundle:trivial_vector_bundle} can now be reformulated as follows.
    \begin{property}[Trivial vector bundles]
        A vector bundle is trivial if and only if its associated frame bundle admits a global section. This can easily be interpreted as follows. If one can for every fibre choose a basis in a smooth way, one can also express the restriction of any vector field to a fibre in terms of this basis in a smooth way.
    \end{property}

    \begin{property}[Higgs fields]\index{Higgs!field}\label{bundle:section_bijection}
        Let $\pbundle$ be a principal $G$-bundle and let $P_F$ be an associated bundle. There exists a bijection between the sections of $P_F$ and the $G$-equivariant maps $\phi:P\rightarrow F$, i.e.~maps satisfying $\phi(p\cdot g)=g^{-1}\cdot\phi(p)$.

        An explicit correspondence is given by
        \begin{gather}
            \sigma_\phi:M\rightarrow P_F:m\mapsto[p,\phi(p)]\,,
        \end{gather}
        where $p$ is any point in $\pi^{-1}(\{m\})$. This is well-defined due to \cref{bundle:associated_bundle_equivalence}. In the other direction, one finds
        \begin{gather}
            \label{bundle:section_bijection_phi}
            \phi_\sigma:P\rightarrow F:p\mapsto j_p^{-1}\circ\sigma(\pi(p))\,,
        \end{gather}
        where $j_p:F\rightarrow P_F:f\mapsto[p,f]$. Either of these maps is sometimes called a \textbf{Higgs field} in the physics literature.
    \end{property}

\section{Universal bundle}

    \newdef{Universal bundle}{\index{universal!bundle}\index{classifying!space}\label{bundle:classifying_space}
        Consider a topological group $G$. A universal bundle of $G$ is any principal bundle of the form \[G\hookrightarrow EG\rightarrow BG\] such that $EG$ is weakly contractible. The space $BG$ is called the \textbf{classifying space} of $G$.
    }
    \newdef{$n$-universal bundle}{
        A principal bundle with an $(n-1)$-connected total space.
    }
    \begin{property}[Delooping]\index{delooping}\label{bundle:delooping}
        For every topological group $G$, one can prove that the loop space of $BG$ is (weakly) homotopy equivalent to $G$ itself, i.e.~$\Omega BG\cong G$. As such, it also deserves the name of delooping.
    \end{property}
    \begin{property}[Groups]
        Let $G$ be a group regarded as a discrete topological space. Because the fundamental group of a topological group is Abelian by \cref{topology:abelian_fundamental_group}, the classifying space $BG$ is a group if and only if $G$ is Abelian.

        This also has an abstract nonsense generalization. The classifying space functor $\func{B}{TopGrp}{Top}$ is product-preserving and, hence, it maps group objects to group objects. So, Abelian groups are mapped to topological groups and, even better, to Abelian groups. An important consequence is that all Abelian topological groups are in particular infinite loop spaces.
    \end{property}

    \begin{property}[Classification]\label{bundle:classification}
        The collection of principal $G$-bundles over a paracompact Hausdorff space $X$ is in bijection with $[X,BG]$, the set of homotopy classes of continuous functions $f:X\rightarrow BG$. This bijection is given by the pullback-construction $f\mapsto f^*EG$.

        Due to the homotopical nature of this classification one can also replace $G$ by any homotopy equivalent space. For Lie groups the natural choice is a \textit{maximal compact subgroup} since these are deformation retracts and, hence, homotopy equivalent.
    \end{property}
    \begin{result}[Vector bundles]\index{vector!bundle}
        Since every vector bundle is uniquely related to its frame bundle, there exists a bijection between principal $\GL$-bundles and vector bundles. This implies that rank-$k$ vector bundles are classified by the homotopy mapping space $[X,B\!\GL(k)]$. Because $\mathrm{O}(k)$ is the maximal compact subgroup of $\GL(k)$, one also obtains the result that any real vector bundle over a paracompact space admits a \textit{Riemannian structure} (see \cref{chapter:riemann}).

        \Cref{bundle:vector_bundles_over_sphere} now follows from Eckmann--Hilton duality (\cref{topology:eckmann_hilton}) together with the above delooping property.
    \end{result}
    \begin{remark}
        There also exists a slightly different notion of universal bundles and their associated classifying property. When one requires the total space of the universal bundle to be contractible instead of weakly contractible, the mapping space only classifies numerable principal bundles (\cref{bundle:numerable_bundle}), but now over arbitrary bases.
    \end{remark}

    An explicit construction of the numerable universal bundle for any topological group $G$ was given by \indexauthor{Milnor}.
    \begin{construct}[\difficult{Milnor}]\index{Milnor!construction}
        First, consider the infinite join $E_\infty$ equipped with the strong topology. This space is constructed as the direct limit of finite joins (\cref{topology:join}): \[E_n=\underbrace{G\circ\cdots\circ G}_{n\text{ times}}\,,\] where $E_n$ is embedded in $E_{n+1}$ using the identity element, i.e.~every element of $E_\infty$ corresponds to an element of some finite join. Then, construct the quotient of $E_n$ (resp.~$E_\infty$) by the canonical right action of $G$ on $E_n$ (resp.~$E_\infty$). The bundle $p_n:E_n\rightarrow B_n$ (resp.~$p:E_\infty\rightarrow B_\infty$) is an $n$-universal bundle (resp.~$\infty$-universal bundle). It follows from the above property that $p:E_\infty\rightarrow B_\infty$ is a universal bundle for $G$.
    \end{construct}

    \begin{construct}[\difficult{Abstract nonsense}]
        Let $G$ be a topological group and consider the delooping (groupoid) $\mathbf{B}G$ from \cref{cat:group_delooping}. This groupoid can also be obtained as the action groupoid (\cref{cat:action_groupoid}) associated to the trivial action of $G$ on $\{\ast\}$. The regular action of $G$ on itself also induces an action groupoid $\mathbf{E}G:=G/\!/G$. The map $G\rightarrow\{\ast\}$ in turn induces a map of groupoids $\mathbf{E}G\rightarrow\mathbf{B}G$, which, under geometric realization as in \cref{model:classifying_space}, gives a universal bundle map.
    \end{construct}

\section{Connections}\label{section:connections}
\subsection{Vertical vectors}

    Because smooth fibre bundles are also smooth manifolds, one can define traditional concepts such as the tangent bundle. Due to the composite nature of these geometric objects, one can decompose the tangent bundle in horizontal and vertical (sub)bundles.
    \newdef{Vertical vector}{\index{vertical!bundle}
        Let $\bundle$ be a smooth fibre bundle. The subbundle
        \begin{gather}
            VE:=\ker(\pi_\ast)
        \end{gather}
        of $TE$ is called the \textbf{vertical (sub)bundle} over $E$. The sections of this bundle are called vertical vector fields.
    }
    For principal $G$-bundles an alternative definition exists.
    \begin{adefinition}
        Consider a smooth principal $G$-bundle $\pbundle$. First, construct a map $\iota_p$ for every element $p\in P$:
        \begin{gather}
            \iota_p:G\rightarrow P:g\mapsto p\cdot g\,.
        \end{gather}
        Then, define a tangent vector $v\in T_pP$ to be vertical if it lies in the image of $\iota_{p,\ast}$:
        \begin{gather}
            V_pP := \im(\iota_{p,\ast})\,.
        \end{gather}
        This definition is equivalent to the previous one because of the following short exact sequence:
        \begin{gather}
            \label{bundle:principal_bundle_exact_sequence}
            0\longrightarrow\mathfrak{g}\overset{\iota_{p,\ast}}{\longrightarrow}T_pP\overset{\pi_\ast}{\longrightarrow}T_pM\longrightarrow0\,.
        \end{gather}
    \end{adefinition}

    \begin{property}[Dimension]\label{bundle:vertical_dimension}
        It follows from the second definition that the vertical vectors of a principal $G$-bundle are nothing but the pushforward of the Lie algebra $\mathfrak{g}$ under the right action of $G$ on $P$. Furthermore, the exactness of the sequence implies that $\iota_{p,\ast}:\mathfrak{g}\rightarrow V_pP$ is an isomorphism of vector spaces. In particular, it implies that
        \begin{gather}
            \dim(V_pP) = \dim(\mathfrak{g}) = \dim(G)\,.
        \end{gather}
    \end{property}

    \newdef{Fundamental vector field}{\index{vector field!fundamental}\label{bundle:fundamental_vector_field}
        Let $P$ be a principal $G$-bundle and consider $A\in\mathfrak{g}$, where $\mathfrak{g}$ is the Lie algebra corresponding to $G$. The vertical vector field $A^\#:P\rightarrow TP$, given by
        \begin{gather}
            A^\#(p) := \iota_{p,\ast}A\in VpP\,,
        \end{gather}
        is called the fundamental vector field associated to $A$. Its action on any $f\in C^\infty(P)$ is given by
        \begin{gather}
            A^\#_p(f) = \left.\deriv{}{t}f\bigl(p\cdot\exp(tA)\bigr)\right|_{t=0}\,.
        \end{gather}
    }

    \begin{property}
        The construction of fundamental vector fields gives a Lie algebra morphism $\mathfrak{g}\rightarrow\mathfrak{X}(P)$:
        \begin{gather}
            [A,B]^\# = [A^\#,B^\#]\,,
        \end{gather}
        where the Lie bracket on the left is the one in $\mathfrak{g}$ and the Lie bracket on the right is the one in $\mathfrak{X}(P)$ given by \cref{bundle:lie_bracket}.
    \end{property}

    \begin{property}\label{bundle:vert_g_equivariance}
        The vertical bundle satisfies the following equivariance condition:
        \begin{gather}
            R_{g,\ast}(VpP) = V_{p\cdot g}P\,.
        \end{gather}
        By differentiating the equality
        \begin{gather}
            R_g\circ\iota_p = \iota_{p\cdot g}\circ\mathrm{ad}_{g^{-1}}
        \end{gather}
        and using \cref{lie:adjoint_representation} and \cref{bundle:fundamental_vector_field}, one can obtain the following algebraic reformulation:
        \begin{gather}
            R_{g,\ast}\bigl(A^\#(p)\bigr) = \bigl(\mathrm{Ad}_{g^{-1}}A\bigr)^\#(p\cdot g)\,.
        \end{gather}
    \end{property}

\subsection{Ehresmann connections}

    The definition of vertical vector fields was quite natural. The next step would be to define the horizontal subspace as a complementary subspace to $VP$. However, the exact sequence~\eqref{bundle:principal_bundle_exact_sequence} does not even split canonically, so one should make a choice of splitting.
    \newdef{Ehresmann connection}{\index{connection!Ehresmann}\index{horizontal!vector}\label{bundle:connection}
        Consider a smooth fibre bundle $E$. An (Ehresmann) connection on $E$ is the selection of a subspace $H_eE\leq T_eE$ for every $e\in E$ such that:
        \begin{enumerate}
            \item The horizontal and vertical bundles are complementary: $V_eE\oplus H_eE=T_eE$.
            \item The choice of subspace depends smoothly on $e\in E$ in the distributional sense (\cref{bundle:distribution}).
        \end{enumerate}
        The vectors in $H_eE$ are said to be \textbf{horizontal} (with respect to the chosen connection).
    }
    \newdef{Horizontal bundle}{\index{horizontal}
        The horizontal (sub)bundle $HE$ is defined as $\bigsqcup_{e\in E}H_eE$ with the bundle structure induced from $TE$.
    }

    \newdef{Principal connection}{\index{connection!principal}\label{bundle:principal_connection}
        A principal connection on a smooth principal $G$-bundle $P$ is a $G$-equivariant Ehresmann connection, i.e.~an Ehresmann connection for which the horizontal subspaces satisfy the following $G$-equivariance condition:
        \begin{gather}
            R_{g,\ast}(H_pP) = H_{p\cdot g}P\,.
        \end{gather}
    }
    \begin{remark*}
        Note that this condition was automatically satisfied for vertical bundles by \cref{bundle:vert_g_equivariance}.
    \end{remark*}

    \begin{property}[Dimension]\label{bundle:connection_dimensions}
        \nameCrefs{bundle:vertical_dimension}~\ref{bundle:principal_bundle_dimension} and~\ref{bundle:vertical_dimension}, together with the direct sum decomposition of $TP$, imply the following relation for all $p\in P$:
        \begin{gather}
            \dim(H_pP) = \dim(M)\,.
        \end{gather}
        All dimensional relations between the data of a principal bundle are now summarized:
        \begin{align}
            \dim(P) &= \dim(M) + \dim(G)\nonumber\\
            \dim(M) &= \dim(H_pP)\\
            \dim(G) &= \dim(V_pP)\nonumber
        \end{align}
        for all $p\in P$.
    \end{property}

    \newdef{Dual connection}{\index{dual!connection}
        First, define the dual of the horizontal bundle:
        \begin{gather}
            H_p^*P := \bigl\{h\in T_p^*P\bigm\vert\forall v\in V_pP:h(v)=0\bigr\}\,.
        \end{gather}
        It is the space of one-forms that vanish on the vertical subspace. A dual connection can then be defined as the selection of a vertical covector bundle $V_p^*P$ satisfying the conditions of \namecrefs{bundle:connection}~\ref{bundle:connection} and~\ref{bundle:principal_connection}, where $V$ and $H$ are to be interchanged. Note that, here, the horizontal subbundle is canonically defined while the vertical subbundle depends on a choice of complement.
    }
    This definition implies the following ones.
    \newdef{Horizontal and vertical forms}{\index{horizontal!form}\index{vertical!form}\label{bundle:horizontal_form}
        Let $\theta\in\Omega^k(P)$ be a differential $k$-form.
        \begin{itemize}
            \item $\theta$ is said to be horizontal if
            \begin{gather}
                \theta_p(v_1,\ldots,v_k) = 0
            \end{gather}
            whenever at least one of the $v_i$ is in $V_pP$.
            \item $\theta$ is said to be vertical if
            \begin{gather}
                \theta_p(v_1,\ldots,v_k) = 0
            \end{gather}
            whenever all of the $v_i$ are in $H_pP$.
        \end{itemize}
        For functions $f\in C^\infty(P)$ it is vacuously true that they are both vertical and horizontal.
    }
    \newdef{Tensorial form}{\index{tensorial}\index{basic}\label{bundle:tensorial_form}
        Consider a vector space $V$ equipped with a representation $\rho:G\rightarrow V$. A $V$-valued differential form $\theta\in\Omega^\bullet(P;V)$ on a principal $G$-bundle $\pbundle$ is said to be tensorial or \textbf{basic of type} $(V,\rho)$ if it is horizontal and if it satisfies the equivariance condition
        \begin{gather}
            R_g^*\theta = \rho(g^{-1})\circ\theta\,.
        \end{gather}
        Forms satisfying this definition admit an important reinterpretation. Let $E:=P\times_\rho V$ be the associated vector bundle of $(V,\rho)$. Tensorial $k$-forms of type $(V,\rho)$ are naturally isomorphic to $E$-valued $k$-forms on $M$. The isomorphism is given fibrewise by
        \begin{gather}
            \label{bundle:tensorial_form_equivalence}
            \tau|_u:\Omega^\bullet|_{\pi(u)}(M;P\times_\rho V)\rightarrow\Omega^\bullet|_u(P;V):\phi\mapsto f^{-1}_u(\pi^*\phi)\,,
        \end{gather}
        where $f_u:V\rightarrow E_{\pi(u)}\cong(\pi^*E)_u:v\mapsto[u,v]$. This is a generalization of correspondence~\ref{bundle:section_bijection}.
    }

\subsection{Connection forms}

    \newdef{Connection one-form}{\index{connection!form}
        Let $P$ be a principal bundle $G$-bundle. A connection one-form, associated to a given principal connection, is a $\mathfrak{g}$-valued one-form $\omega\in\Omega^1(P;\mathfrak{g})$ that satisfies the following two conditions:
        \begin{enumerate}
            \item\textbf{Cancellation}:
            \begin{gather}
                \omega(A^\#) = A
            \end{gather}
            for all $A\in\mathfrak{g}$.
            \item\textbf{Equivariance}:
            \begin{gather}
                \omega\circ R_{g,\ast} = \mathrm{Ad}_{g^{-1}}\circ\omega
            \end{gather}
            for all $g\in G$.
        \end{enumerate}
        The horizontal subspaces are recovered as the kernel of the connection one-form:
        \begin{gather}
            H_pP = \ker(\omega|_p)\,.
        \end{gather}
    }
    \begin{formula}
        Given a principal connection on a principal $G$-bundle $P$, the associated connection one-form is given by the following map:
        \begin{gather}
            \omega := (\iota_{p,\ast})^{-1}\circ\pr_{\text{Vert}}\,,
        \end{gather}
        where $\pr_{\text{Vert}}$ is the projection $TP\rightarrow VP$.
    \end{formula}

    \begin{property}[Pullback connection]\index{connection!pullback}
        Consider two principal $G$-bundles $P_1,P_2$. Let $\omega$ be a connection one-form on $P_1$ and let $F:P_1\rightarrow P_2$ be a bundle map. The pullback $F^*\omega$ gives a principal connection on $P_2$.
    \end{property}

    \newdef{Maurer--Cartan form}{\index{Maurer--Cartan!form}\index{Cartan!(connection) form|see{Maurer--Cartan}}
        For every $g\in G$, the tangent space $T_gG$ is isomorphic to $T_eG\equiv\mathfrak{g}$. A canonical isomorphism $T_gG\rightarrow\mathfrak{g}$ is given by the Maurer--Cartan form
        \begin{gather}
            \Omega|_g := L_{g^{-1},\ast}\,.
        \end{gather}
    }
    \begin{construct}
        Consider the one-point manifold $M=\{\ast\}$. When constructing a principal $G$-bundle over $M$, one can see that the total space $P=\{\ast\}\times G$ can be identified with the structure group $G$. From the relations in \cref{bundle:connection_dimensions}, it follows that the horizontal spaces are null-spaces, which trivially defines a smooth distribution and a connection in the sense of Ehresmann (\cref{bundle:connection}), and that the vertical spaces are equal to the tangent spaces, i.e.~$V_gG=T_gG$, where the identification $P\cong G$ (as manifolds) is used.

        The simplest way to define a connection form on this bundle would be the trivial projection $\mathbbm{1}_{TP}:TP\rightarrow TP=VP$. However, the image of this map would be $T_gG$ and not $\mathfrak{g}$ as required. This can be solved by using the Maurer--Cartan form:
        \begin{gather}
            \omega = \Omega\,.
        \end{gather}
    \end{construct}
    \begin{property}[Uniqueness]
        The Maurer--Cartan form is the unique principal connection on the bundle $G\hookrightarrow G\rightarrow\{\ast\}$.
    \end{property}

    \newdef{Darboux derivative}{\index{Darboux!derivative}\index{integral}\index{primitive}
        Consider a smooth function $f:M\rightarrow G$ between a manifold and a Lie group. The Darboux derivative of $f$ is defined as follows:
        \begin{gather}
            \omega_f := f^*\Omega\,.
        \end{gather}
        The function $f$ is called an \textbf{integral} or \textbf{primitive} of $\omega_f$.
    }

    \begin{property}
        Let $M$ be a connected manifold. If two functions $f,\widetilde{f}:M\rightarrow G$ have the same Darboux derivative, there exists an element $g\in G$ such that $f(p)=g\cdot\widetilde{f}(p)$ for all $p\in M$.
    \end{property}
    \begin{example}[Real line]
        In the case of $M=G=\mathbb{R}$, one recovers the ordinary behaviour of derivatives. When two functions $f,\widetilde{f}:\mathbb{R}\rightarrow\mathbb{R}$ have the same derivative, they are equal up to an additive constant.
    \end{example}

    \begin{theorem}[Fundamental theorem of calculus]\index{fundamental theorem!of calculus}\index{Maurer--Cartan!equation}\label{bundle:mc_equation}
        Consider a smooth manifold $M$ and a Lie group $G$ with Lie algebra $\mathfrak{g}$. If $\omega:TM\rightarrow\mathfrak{g}$ satisfies the Maurer--Cartan equation
        \begin{gather}
            \dr\omega + \frac{1}{2}[\omega\wedge\omega] = 0\,,
        \end{gather}
        there exists (locally) a smooth function $f:M\rightarrow G$ such that $\omega=f^*\Omega$.
    \end{theorem}

\subsection{Local representations}

    \newdef{Yang--Mills field}{\index{Yang--Mills!field}\label{bundle:yang_mills_field}
        Consider a principal $G$-bundle $\pbundle$ and an open subset $U\subseteq M$. Given a principal connection $\omega$ on $P$ and a local section $\sigma:U\rightarrow P$, the Yang--Mills field $\omega^U\in\Omega^1(U; \mathfrak{g})$ is defined as follows:
        \begin{gather}
            \omega^U := \sigma^*\omega\,.
        \end{gather}
    }
    \newdef{Local representation}{
        Consider a principal bundle $P$ and let $(U,\varphi)$ be a bundle chart on $P$. The local representation of a principal connection $\omega$ on $P$ with respect to the chart $(U,\varphi)$ is defined as $(\varphi^{-1})^*\omega$.
    }

    \begin{formula}
        Consider a principal connection $\omega$ on a principal $G$-bundle $\pbundle$. Because of \cref{bundle:prin_section_triv}, every local section $\sigma:U\rightarrow P$ induces both a Yang--Mills field $\omega^U$ and a local representation of $\omega$. These two forms are related by the following equation:
        \begin{gather}
            \omega|_{(m,g)}(v,A) = \mathrm{Ad}_{g^{-1}}\bigl(\omega^U_m(v)\bigr) + \Omega_g(A)\,,
        \end{gather}
        where $v\in T_mU$ and $A\in\mathfrak{g}$.
    \end{formula}

    \begin{formula}[Compatibility condition]\label{bundle:compatibility_connection}
        Consider a principal $G$-bundle $\pbundle$ and two open subsets $U,V\subseteq M$. Given two local sections $\sigma_U:U\rightarrow P$, $\sigma_V:V\rightarrow P$ and a principal connection $\omega$ on $P$, one can define two Yang--Mills field $\omega^U$ and $\omega^V$.

        On the intersection $U\cap V\subseteq M$ there exists a (unique) gauge transformation $\xi:U\cap V\rightarrow G$ such that $\sigma_V(m) = \sigma_U(m)\cdot\xi(m)$. Using this gauge transformation, one can relate $\omega^U$ and $\omega^V$ as follows:
        \begin{gather}
            \label{bundle:local_compatibility}
            \omega^V = \mathrm{Ad}_{\xi^{-1}}\circ\omega^U + \xi^*\Omega\,.
        \end{gather}
        This formula holds more generally to (locally) relate the connection one-forms $\omega$ and $\xi^*\omega$ for any gauge transformation $\xi\in\Aut_V(P)$.
    \end{formula}

    \begin{example}[General linear group]
        Consider $G=\GL(n,\mathbb{R})$. The second term in \cref{bundle:local_compatibility} can be written as follows:\footnote{A derivation can be found in Lecture 22 of~\citet{schuller_lectures_2016}.}
        \begin{gather}
            (\xi^*\Omega)^i_{\ j} = (\xi(m)^{-1})^i_{\ k}\pderiv{}{x^\mu}\xi(p)^k_{\ j}\drx^\mu
        \end{gather}
        at every point $m\in M$. Formally, this can be written coordinate-independently as
        \begin{gather}
            \label{bundle:mc_pullback}
            \xi^*\Omega\equiv\xi^{-1}\dr\xi\,.
        \end{gather}
    \end{example}

    \begin{example}[Christoffel symbols]\index{Christoffel symbols}
        Let $\Gamma^i_{\ j\mu},\overline{\Gamma}^k_{\ l\nu}$ be the Yang--Mills fields corresponding to a connection on the frame bundle of a manifold $M$ induced by the choices of coordinates $x^i$ and $y^i$, respectively. In this case, the expansion coefficients of the Yang--Mills field are called the \textbf{Christoffel symbols} (compare this to \cref{bundle:christoffel_symbol}). Using \namecrefs{bundle:local_compatibility}~\eqref{bundle:local_compatibility} and~\eqref{bundle:mc_pullback}, one obtains:
        \begin{gather}
            \overline{\Gamma}^i_{\ j\mu} = \pderiv{y^\nu}{x^\mu}\left(\pderiv{x^i}{y^k}\Gamma^k_{\ l\nu}\pderiv{y^l}{x^j} + \pderiv{x^i}{y^k}\frac{\partial^2y^k}{\partial x^j\partial x^\nu}\right)\,.
        \end{gather}
    \end{example}

\subsection{Parallel transport}

    \newdef{Horizontal lift}{\index{horizontal!lift}
        Consider a principal bundle $\pbundle$ and a curve $\gamma:[0,1]\rightarrow M$. Given an Ehresmann connection, for every point $p_0\in\pi^{-1}\bigl(\gamma(0)\bigr)$ there exists a unique curve $\widetilde{\gamma}_{p_0}:[0,1]\rightarrow P$ satisfying the following conditions:
        \begin{enumerate}
            \item\textbf{Initial condition}: $\widetilde{\gamma}_{p_0}(0) = p_0$,
            \item\textbf{Lifting}: $\pi\circ\widetilde{\gamma}_{p_0} = \gamma$, and
            \item\textbf{Horizontal}: $\widetilde{\gamma}_{p_0}'(t)\in\mathrm{Hor}\left(T_{\widetilde{\gamma}_{p_0}(t)}P\right)$ for all $t\in[0,1]$.
        \end{enumerate}
        The curve $\widetilde{\gamma}_{p_0}$ is called the horizontal lift of $\gamma$ starting at $p_0$. When it is clear from the context what the basepoint $p_0$ is, the subscript is often omitted and one writes $\widetilde{\gamma}$ instead of $\widetilde{\gamma}_{p_0}$.
    }
    \begin{remark}[Horizontal curve]\index{horizontal!curve}
        Curves satisfying the last condition in the above property are said to be horizontal.
    \end{remark}

    \begin{method}
        Consider a principal $G$ bundle $\pbundle$. Let $\gamma$ be a curve in $M$ and let $\omega$ be a principal connection one-form on $P$. The horizontal lift of $\gamma$ can be found as follows. Let $\delta$ be a curve in $P$ that projects onto $\gamma$, such that
        \begin{gather}
            \widetilde\gamma_{p_0}(t)=\delta(t)\cdot g(t)
        \end{gather}
        for some curve $g$ in $G$. The curve $g$ can be found as the unique solution of the following first-order ODE:
        \begin{gather}
            \label{bundle:horizontal_ode}
            \mathrm{Ad}_{g(t)^{-1}}\omega_{\delta(t)}(X_{\delta,\delta(t)}) + \Omega_{g(t)}(Y_{g,g(t)}) = 0\,,
        \end{gather}
        where $X_\delta,Y_g$ are tangent vectors to the curves $\delta$ and $g$, respectively. The solution is uniquely determined by the initial value condition $\delta(0)\cdot g(0)=p_0$.
    \end{method}
    \begin{remark}
        Given a local section $\sigma:U\rightarrow P$, one can rewrite the above ODE in a more explicit form. First, remark that the section induces a curve $\delta:=\sigma\circ\gamma$. Taking the derivative yields $X_\delta=\sigma_*X_\gamma$. With this one can rewrite the ODE as
        \begin{gather}
            \mathrm{Ad}_{g(t)^{-1}}\omega_{\delta(t)}(\sigma_*X_{\gamma,\gamma(t)}) + \Omega_{g(t)}(Y_{g,g(t)}) = 0\,.
        \end{gather}
        After using the equality $f^*\omega=\omega\circ f_*$ and introducing the Yang-Mills field $A=\sigma^*\omega$, this becomes
        \begin{gather}
            \mathrm{Ad}_{g(t)^{-1}}A(X_{\gamma,\gamma(t)}) + \Omega_{g(t)}(Y_{g,g(t)}) = 0\,.
        \end{gather}
    \end{remark}

    \begin{example}
        For matrix Lie groups this ODE can be reformulated as follows. Given the trivial section $s:U\rightarrow U\times G:x\mapsto(x,e)$, where $U$ is an open subset of $M$, the horizontal lift of $\gamma$ can locally be parametrized as
        \begin{gather}
            \widetilde{\gamma}(t) = \underbrace{(s\circ\gamma)(t)}_{\delta(t)}\cdot g(t) = \bigl(\gamma(t),g(t)\bigr)\,,
        \end{gather}
        where $g$ is a curve in $G$. To determine $\widetilde{\gamma}$ it is thus sufficient to find $g$. The ODE~\eqref{bundle:horizontal_ode} then becomes
        \begin{gather}
            \label{bundle:horizontal_ode_matrix}
            g'(t) = -\omega\bigl(\gamma(t),e,\gamma'(t),0\bigr)g(t)\,.
        \end{gather}
        Using the trivial section $s$, one can further rewrite this formula. Consider the action of the Yang--Mills field $s^*\omega$ on the derivative $\gamma_*=\bigl(\gamma(t),\gamma'(t)\bigr)$. Using the fact that it is linear in the second argument, it can be rewritten as
        \begin{gather}
            s^*\omega\bigl(\gamma(t),\gamma'(t)\bigr) = A\bigl(\gamma(t)\bigr)\gamma'(t)\,,
        \end{gather}
        where $A:M\rightarrow\hom(\mathbb{R}^{\dim(M)},\mathfrak{g})$ gives a linear map at each point $\gamma(t)\in M$. The action can also be rewritten as
        \begin{gather}
            s^*\omega\bigl(\gamma(t),\gamma'(t)\bigr) = \omega\bigl(s_\ast(\gamma(t),\gamma'(t))\bigr) = \omega\bigl(\gamma(t),e,\gamma'(t),0\bigr)\,.
        \end{gather}
        Combining these relations with the ODE~\eqref{bundle:horizontal_ode_matrix} gives
        \begin{gather}
            \label{bundle:horizontal_ode_derivative}
            \left(\deriv{}{t} + A(\gamma(t))\gamma'(t)\right)g(t) = 0\,,
        \end{gather}
        where $\deriv{}{t}$ is the matrix given by element-wise multiplication of the derivative $\deriv{}{t}$ and the identity matrix $I$.

        The ODE~\eqref{bundle:horizontal_ode} can now be solved. Direct integration and iteration gives
        \begin{gather}
            g(t) = \left[\mathbbm{1} - \Int_0^tA(\gamma'(t_1))\,dt_1 + \Int_0^t\Int_0^{t_1}A(\gamma'(t_1))A(\gamma'(t_2))\,dt_2\,dt_1-\cdots\right]g(0)\,,
        \end{gather}
        where $A$ is the Yang-Mills field associated to the local section $\sigma$. This can be rewritten using the standard \textit{Dyson trick} (see \cref{qm:evolution_operator}):
        \begin{gather}
            g(t) = \left[\mathbbm{1} - \Int_0^tA(\gamma'(t_1))\,dt_1 + \frac{1}{2!}\Int_0^t\Int_0^t\mathcal{T}\Bigl(A(\gamma'(t_1))A(\gamma'(t_2))\Bigr)\,dt_2\,dt_1-\cdots\right]g(0).
        \end{gather}
        By noting that this formula is equal to the path-ordered exponential, one finds
        \begin{gather}
            \label{bundle:g0_to_gt}
            g(t) = \mathcal{T}\exp\left(-\Int_0^tA(\gamma'(t'))\,dt'\right)g(0)\,.
        \end{gather}
    \end{example}

    \newdef{Parallel transport}{\index{parallel!transport}\index{holonomy}\label{bundle:parallel_transport}
        The parallel transport map along the curve $\gamma$ is defined as follows:
        \begin{gather}
            \mathrm{Par}_t^\gamma:\pi^{-1}(\gamma(0))\rightarrow\pi^{-1}(\gamma(t)):p_0\mapsto\widetilde{\gamma}_{p_0}(t)\,.
        \end{gather}
        This map is $G$-equivariant and it restricts to an isomorphism on the fibres. The group element given by the path-ordered exponential in \cref{bundle:g0_to_gt} is called the \textbf{holonomy} along the curve $\gamma$.
    }

    Using the above constructions that assign Lie group elements to paths, one can give an alternative definition of principal connections.
    \newadef{\difficult{Principal connection}}{\index{connection!principal}\label{bundle:holonomy_functor}
        Let $M$ be a smooth manifold and consider its path groupoid\footnote{See \cref{hdg:path_groupoid} for a rigorous exposition.} $\mathcal{P}_1(M)$ which has the points of $M$ as objects and homotopy classes of smooth paths in $M$ as morphisms. Consider a principal $G$-bundle $\pbundle$ and denote the delooping (\cref{cat:group_delooping}) of $G$ by $\mathbf{B}G$. The assignment of holonomies to smooth paths defines a functor
        \begin{gather}
            \mathrm{hol}_i:\mathcal{P}_1(U_i)\rightarrow\mathbf{B}G
        \end{gather}
        for every chart $U_i\subseteq M$. These can be glued together using the transition cocycles $g_{ij}$ (in their incarnation as natural isomorphisms) to obtain a functor
        \begin{gather}
            \mathrm{hol}:\mathcal{P}_1(M)\rightarrow\mathbf{Trans}_1(P)\subset G\mathbf{Torsor}\,,
        \end{gather}
        where $\mathbf{Trans}_1(P)$ is the full subcategory of the category of $G$-torsors on the fibres of $P$ (see \cref{bundle:fibre_torsor}).

        It can be shown that any functor of this type gives rise to a principal connection on $P$ and, conversely, every principal connection gives rise to a holonomy functor through the parallel transport construction.

        \todo{COMPLETE}
    }

\subsection{Holonomy group}

    \newdef{Holonomy group}{\index{holonomy}\label{bundle:holonomy_group}
        Consider a principal $G$-bundle $\pbundle$ with principal connection $\omega$ and choose a point $m\in M$. Let $\Omega^{\text{ps}}_mM\subset\Omega_m M$ denote the subset of the based loop space consisting of piecewise smooth loops with basepoint $m\in M$. The holonomy group $\mathrm{Hol}_p(\omega)$ based at $p\in\pi^{-1}(m)$ with respect to $\omega$ is given by
        \begin{gather}
            \mathrm{Hol}_p(\omega) := \{g\in G\mid p\sim p\cdot g\}\,,
        \end{gather}
        where two points $p,q\in P$ are identified if there exists a loop $\gamma\in\Omega_m^{\text{ps}}M$ such that the horizontal lift $\widetilde{\gamma}$ connects $p$ and $q$.
    }
    \newdef{Reduced holonomy group}{
        The subgroup of the holonomy group generated by contractible loops.
    }

    \newdef{Holonomy bundle}{\index{holonomy!bundle}\label{bundle:holonomy_bundle}
        Let $M$ be a path-connected manifold and consider a principal bundle $P$ over $M$ with principal connection $\omega$. One can equip $P$ with an equivalence relation $\sim$ such that $p\sim q$ if and only if there exists a horizontal curve connecting $p$ and $q$. For every point $p\in P$ one can then construct the following set:
        \begin{gather}
            H(p) := \{q\in P\mid p\sim q\}\,.
        \end{gather}
        Path-connectedness of the base manifold implies that $H(p)$ and $H(q)$ are isomorphic for all $p,q\in P$. Using this fact one can show that $\sqcup_{p\in P}H(p)$ is in fact a principal bundle itself. Its structure group is $\mathrm{Hol}_p(\omega)$ for any $p\in P$.
    }

\section{Covariant derivatives}\index{covariant!derivative}\label{section:covariant_derivatives}
\subsection{Koszul connections}

    \newdef{Horizontal lifts on associated bundles}{\index{horizontal!lift}
        Let $P_F\equiv P\times_GF$ be an associated bundle of a principal $G$-bundle $\pbundle$ and let $\gamma$ be a curve in $M$ with horizontal lift $\widetilde{\gamma}_p$ in $P$. The horizontal lift of $\gamma$ to $P_F$ through the point $[p,f]\in P_F$ is defined as follows:
        \begin{gather}
            \widetilde{\gamma}^{P_F}_{[p,f]}(t) := [\widetilde{\gamma}_p(t),f]\,.
        \end{gather}
        Although the element $f$ seems to stay constant along the horizontal lift, it in fact changes according to \cref{bundle:associated_bundle_equivalence}.
    }
    \newdef{Parallel transport}{\index{parallel!transport}
        Similar to the case of principal bundles $P$, the parallel transport map on an associated bundle $P_F$ is defined as
        \begin{gather}
            \mathrm{Par}_t^\gamma:\pi_F^{-1}(\gamma(0))\rightarrow\pi_F^{-1}(\gamma(t)):[p,f]\mapsto\widetilde{\gamma}^{P_F}_{[p,f]}(t)\,.
        \end{gather}
    }

    \begin{example}[Vector bundles]
        Consider a vector space $V$ with a representation $\rho:G\rightarrow\GL(V)$, a principal $G$-bundle $\pbundle$ and the associated vector bundle $\pi_V:P\times_{\GL(V)}V\rightarrow M$. By working over a chart $(U,\varphi)$, one can locally treat $P$ and $P_V$ as product bundles. Parallel transport on this vector bundle is then defined as follows. Let $\gamma$ be a curve in $M$ such that $\gamma(0)=x_0$ and $\gamma(1)=x_1$. Furthermore, let the horizontal lift $\widetilde{\gamma}(t)=\bigl(\gamma(t),g(t)\bigr)$ satisfy $\widetilde{\gamma}(0)=(x_0,h)$ as initial condition. Parallel transport of the point $(x_0,v_0)\in U\times V$ along $\gamma$ is given by the following map:
        \begin{gather}
            \mathrm{Par}^\gamma_t:\pi^{-1}_V(x_0)\rightarrow\pi^{-1}_V(\gamma(t)):(x_0, v_0)\mapsto\bigl(\gamma(t),\rho\bigl(g(t)h^{-1}\bigr)v_0\bigr)\,.
        \end{gather}
        It should be noted that this map is independent of the initial element $h\in G$ despite the presence of the factor $h^{-1}$. Moreover, $\mathrm{Par}^\gamma_t$ is an isomorphism of vector spaces and can thus be used to identify distant fibres (as long as they lie in the same path component).
    \end{example}
    \begin{remark}
        For every vector bundle, one can construct the frame bundle and use the parallel transport map on this bundle to define parallel transport of vectors. Therefore, the previous construction is applicable to any vector bundle.
    \end{remark}

    \newdef{Covariant derivative}{
        Consider a vector bundle $\bundle$ with typical fibre $V$ and a connection one-form $\omega$ on its associated principal $\GL(V)$-bundle. Let $\sigma:M\rightarrow E$ be a section of $E$ and let $X$ be a vector field on $M$. The covariant derivative of $\sigma$ with respect to $X$ is defined as follows:
        \begin{gather}
            \nabla_X\sigma|_{x_0} := \lim_{t\rightarrow0}\frac{(\mathrm{Par}_t^\gamma)^{-1}\sigma\bigl(\gamma(t)\bigr) - \sigma(x_0)}{t}\,,
        \end{gather}
        where $\gamma$ is any curve satisfying $\gamma(0)=x_0$ and $\gamma'(0)= X(x_0)$. Let $\widetilde{\gamma}$ and $X^H$ be the horizontal lifts of $\gamma$ and $X$, respectively. An equivalent expression is the following one:
        \begin{gather}
            \nabla_X\sigma = \pi_{TE}(\sigma_*X - X^H\circ\sigma)\,.
        \end{gather}
        One can also rephrase this in terms of the horizontal vector field associated to the lift $\widetilde{\gamma}$ (akin to \cref{bundle:lie_derivative_functions}). By \cref{bundle:section_bijection}, every section $\sigma$ of an associated bundle corresponds to a $G$-equivariant map $\phi(\sigma):P\rightarrow V$. In terms of this map, one obtains
        \begin{gather}
            \label{bundle:horizontal_covariant_derivative}
            \phi(\nabla_X\sigma) = X^H\bigl(\phi(\sigma)\bigr)\,,
        \end{gather}
        where $X^H$ acts componentwise on $V$.
    }

    \begin{property}[Koszul connection]\index{Koszul!connection}
        The map
        \begin{gather}
            \Gamma(TM)\times\Gamma(E)\rightarrow\Gamma(E):(X,\sigma)\mapsto\nabla_X\sigma
        \end{gather}
        defines a Koszul connection (\cref{bundle:koszul_connection}). It follows, that every principal connection on a principal bundle induces a Koszul connection on all of its associated vector bundles.
    \end{property}

\subsection{Exterior covariant derivative}\label{section:exterior_covariant_derivative}

    \newdef{Exterior covariant derivative}{\index{exterior!covariant derivative}\label{bundle:exterior_covariant_derivative_P}
        Let $P$ be a principal bundle equipped with a connection one-form $\omega$ and let $\theta\in\Omega^k(P)$ be a differential $k$-form. The exterior covariant derivative $\mathrm{D}\theta$ is defined as follows:
        \begin{gather}
            \mathrm{D}\theta(X_0,\ldots,X_k) := \dr\theta(X_0^H,\ldots,X_k^H)\,,
        \end{gather}
        where $\dr$ is the exterior derivative (\cref{bundle:exterior_derivative}) and $X_i^H$ is the projection of $X_i$ on the horizontal subspace $\mathrm{Hor}(T_pP)$. From this definition, it follows that the exterior covariant derivative $\mathrm{D}\theta$ is a horizontal form (\cref{bundle:horizontal_form}).
    }
    \begin{remark}
        The exterior covariant derivative can also be defined for general vector-valued $k$-forms. This can be done by defining it component-wise with respect to a given basis. Afterwards one can prove that the choice of basis plays no role.
    \end{remark}

    \begin{formula}[Tensorial forms]
        An explicit expression for the action of $D$ on tensorial forms of type $(V,\rho)$ is given by:
        \begin{gather}
            \label{bundle:derivative_horizontal_form}
            \mathrm{D}\theta = \dr\theta + \omega\barwedge\theta\,,
        \end{gather}
        where $\barwedge$ is defined analogously to the wedge products (\cref{bundle:vector_valued_wedge} and \cref{bundle:lie_algebra_valued_wedge}) using the induced representation of $\mathfrak{g}$ on $V$:
        \begin{gather}
            \omega\barwedge\theta(X,Y) := \omega(X)\triangleright\theta(Y) - \omega(Y)\triangleright\theta(X)\,.
        \end{gather}
    \end{formula}
    \begin{property}[Equivariant forms]\label{bundle:tensorial_derivative}
        If $\Phi$ is an equivariant form, then $\mathrm{D}\Phi$ is tensorial.
    \end{property}

    \begin{property}\label{bundle:covariant_derivative_intertwiner}
        The action of the exterior covariant derivative (\cref{bundle:exterior_covariant_derivative}) on $P\times_\rho V$-valued forms on $M$ and that of the exterior covariant derivative (\cref{bundle:exterior_covariant_derivative_P}) on $V$-valued forms on $P$ is intertwined by the isomorphism~\eqref{bundle:tensorial_form_equivalence}:
        \begin{gather}
            D_\nabla\circ\tau = \tau\circ D_\omega\,.
        \end{gather}
        This recovers expression~\eqref{bundle:horizontal_covariant_derivative}.
    \end{property}

    The compatibility condition~\eqref{bundle:local_compatibility} for connection one-forms can be restated in terms of the covariant derivative.
    \begin{property}[Gauge transformation]\label{bundle:connection_gauge_transformation}
        Consider a principal bundle $P$ with a connection one-form $\omega$. For every gauge transformation $\xi\in\Aut_V(P)$, one (locally) has the following expression:
        \begin{gather}
            \xi^*\omega = \omega + \xi^{-1}\mathrm{D}\xi\,.
        \end{gather}
    \end{property}

    Because of \cref{bundle:section_bijection}, one can use the following construction to find an explicit expression for the covariant derivative on an associated vector bundle.
    \begin{formula}[Associated bundle]\label{bundle:covariant_derivative_associated_bundle}
        Let $\pbundle$ be a principal $G$-bundle and let $P_V := P\times_GV$ be an associated vector bundle. Given a section $\sigma:M\rightarrow P_V$, one can construct a $G$-equivariant map $\phi:P\rightarrow V$ using \cref{bundle:section_bijection_phi}. By \cref{bundle:covariant_derivative_intertwiner} and \cref{bundle:derivative_horizontal_form}, the exterior covariant derivative of $\phi$ and, accordingly, the covariant derivative of $\sigma$, is given by:
        \begin{gather}
            \nabla_{\pi_*X_i}\sigma = \mathrm{D}\phi(X) = \dr\phi(X) + \omega(X)\triangleright\phi\,,
        \end{gather}
        where $X\in\mathfrak{X}(P)$.
    \end{formula}
    \begin{formula}[Local expression]
        Given a local section $\varphi:U\rightarrow P$, one can pull back the above expression to the base manifold $M$. This gives
        \begin{gather}
            (\varphi^*\mathrm{D}\phi)(X) = \dr(\varphi^*\phi)(X) + \varphi^*\omega\triangleright\varphi^*\phi(X)\,,
        \end{gather}
        where $X\in\mathfrak{X}(M)$. After introducing the notations $S:=\varphi^*\phi$ and $\nabla_YS:=(\varphi^*\mathrm{D}\phi)(X)$ and remembering the definition of the Yang--Mills field \ref{bundle:yang_mills_field}, this becomes
        \begin{gather}
            \label{bundle:local_covariant_derivative}
            \nabla_YS = \dr S(Y) + \omega^U(Y)\triangleright S\,.
        \end{gather}
    \end{formula}
    \begin{example}
        Let $G=\GL(n,\mathbb{R})$. In local coordinates, \cref{bundle:local_covariant_derivative} can be rewritten as follows:
        \begin{gather}
            (\nabla_YS)^i = \pderiv{S^i}{x^k}Y^k + \Gamma^i_{\ jk}S^jY^k\,.
        \end{gather}
        This is exactly the formula known from classical differential geometry and general relativity.
    \end{example}

\subsection{Curvature}

    \newdef{Curvature}{\index{curvature}
        Let $\omega$ be a principal connection one-form. The curvature $\Omega$ of $\omega$ is defined as the exterior covariant derivative $\mathrm{D}\omega$.
    }
    \newformula{Cartan structure equation}{\index{Cartan!structure equation}\label{bundle:cartan_structure_equation}
        Let $\omega$ be a connection one-form and let $\Omega$ be its curvature form. The curvature can be expressed in terms of the connection as follows:
        \begin{gather}
            \Omega = \dr\omega + \frac{1}{2}[\omega\wedge\omega]\,.
        \end{gather}
        The Maurer--Cartan equation in the (geometric) fundamental theorem of calculus (\cref{bundle:mc_equation}) exactly states the vanishing of the algebraic curvature associated to a general $\mathfrak{g}$-valued one-form.
    }

    \Cref{bundle:tensorial_derivative} implies the following important statement.
    \begin{property}[Tensorial]
        In contrast to a connection one-form, the associated curvature is a tensorial $\mathfrak{g}$-valued two-form or, equivalently, an $\End(P)$-valued two-form on the base manifold $M$.
    \end{property}

    \newdef{Flat connection}{\index{flat!connection}
        A principal connection is said to be flat if its curvature vanishes everywhere. A bundle is said to be flat if it admits a flat connection.
    }

    \begin{property}[Local systems]\index{local!system}
        If the connection on a vector bundle is flat, the flat sections constitute a (linear) local system (\cref{sheaf:local_system}). Moreover, this sheaf characterizes the bundle and connection up to isomorphism, i.e.~there exists an equivalence of categories of flat vector bundles and linear local systems.
    \end{property}

    \begin{example}[Maurer--Cartan connection]
        Let $\omega_G$ be the Maurer--Cartan form on a Lie group $G$. Because the only horizontal vector field on the bundle $G\hookrightarrow G\rightarrow\{\ast\}$ is the zero vector, the curvature of $\omega_G$ is 0. It follows, that the Maurer--Cartan form is a flat connection.
    \end{example}

    The following property is an immediate consequence of Frobenius' integrability theorem~\ref{bundle:frobenius} and the fact that a connection vanishes on the horizontal subbundle.
    \begin{property}[Integrability]
        For any principal connection, the associated horizontal distribution
        \begin{gather}
            p\mapsto H_pP
        \end{gather}
        is integrable if and only if the connection is flat. By contrast, the vertical distribution is always integrable.
    \end{property}

    \begin{property}[Second Bianchi identity]\index{Bianchi identity}
        Let $\omega$ be a principal connection one-form with curvature $\Omega$. The curvature is covariantly constant:
        \begin{gather}
            \mathrm{D}\Omega = 0\,.
        \end{gather}
    \end{property}

    One should pay attention to the fact that this result does not generalize to arbitrary differential forms. This result specifically follows from the coboundary condition $\dr^2=0$.
    \begin{formula}[Curvature on associated bundles]\label{bundle:curvature_associated_bundles}
        The above definition of the curvature, together with \cref{bundle:derivative_horizontal_form} or, equivalently, \cref{bundle:covariant_derivative_associated_bundle}, implies that one can express the action of the curvature on sections of associated bundles as follows:
        \begin{gather}
            \mathrm{D}^2\phi = \Omega\triangleright\phi\,.
        \end{gather}
        This curvature form $\Omega$ coincides with the one from \cref{bundle:curvature}.
    \end{formula}

    Similar to \cref{bundle:yang_mills_field}, one can also define the Yang-Mills field strength.
    \newdef{Field strength}{\index{Yang--Mills!field strength}
        Let $P$ be a principal bundle equipped with a principal connection one-form $\omega$ and associated curvature $\Omega$. Given a local section $\sigma:U\rightarrow P$, one defines the (Yang--Mills) field strength $F$ as the pullback $\sigma^*\Omega$.
    }

    \begin{theorem}[Ambrose--Singer]\index{Ambrose--Singer}\label{bundle:ambrose_singer}
        The Lie algebra of the holonomy group $\mathrm{Hol}_p(\omega)$ is spanned by the elements of the form $\Omega_q(X,Y)$, where $q$ ranges over the holonomy bundle $H(p)$ and $X,Y$ are horizontal.
    \end{theorem}

\subsection{Torsion}

    \newdef{Solder form}{\index{solder form}
        Let $\pbundle$ be a principal $G$-bundle and let $V$ be a $\dim(M)$-dimensional vector space equipped with a representation\footnote{In general this will be $V=\mathbb{R}^{\dim(M)}$ and $G=\GL(n,\mathbb{R})$.} $\rho:G\rightarrow\GL(V)$ such that $TM\cong P\times_G V$ as associated bundles. A solder(ing) form on $P$ is a tensorial one-form (\cref{bundle:tensorial_form}) of type $(V,\rho)$.
    }

    \newdef{Torsion}{\index{torsion}\index{Cartan!structure equation}
        Let $\pbundle$ be a principal $G$-bundle equipped with a connection one-form $\omega$ and a solder form $\theta$. The torsion $\Theta$ is defined as the exterior covariant derivative $\mathrm{D}\theta$. This is the content of the \textbf{Cartan structure equation}:
        \begin{gather}
            \Theta = \dr\theta + \omega\barwedge\theta\,.
        \end{gather}
    }

    \begin{property}[First Bianchi identity]\index{Bianchi identity}
        Let $\omega$ be a connection one-form, $\Omega$ its associated curvature, $\theta$ a solder form and $\Theta$ its associated torsion.
        \begin{gather}
            \mathrm{D}\Theta = \Omega\barwedge\theta
        \end{gather}
    \end{property}

\section{Reduction of the structure group}\label{section:G-structure}

    \newdef{Reduction}{\index{reduction}\label{bundle:reduction}
        Consider a principal $G$-bundle $\pbundle$ and let $H$ be a subgroup of $G$. If the transition functions of $P$ can be chosen to take values in $H$, it is said that the structure group $G$ can be reduced to $H$.

        More generally, a principal bundle $H\hookrightarrow\widetilde{P}\rightarrow M$ with structure group $H$ is called an $H$-reduction of $P$ if there exists a bundle isomorphism $\widetilde{P}\times_HG\cong P$. This allows for morphisms besides inclusions, such as covering maps $\lambda:H\rightarrow G$, making the term `reduction' rather misleading. (See, for example, the definition of \textit{spinor bundles} in \cref{section:spinor_bundles}.) For covering maps, the term \textbf{lift(ing)} is sometimes used.
    }

    \newdef{$G$-structure}{\index{G-!structure}\label{bundle:G_structure}
        Consider an $n$-dimensional manifold $M$ and a topological group $G$. A $G$-structure on $M$ is a reduction of the structure group $\GL(n)$ of the frame bundle $FM$ along a group morphism $\iota:G\rightarrow\GL(n)$.
    }
    \newdef{Integrability}{\index{integrable!$G$-structure}
        A $G$-structure $P$ on $M$ is said to be integrable if, for every point $x\in M$, there exists a chart $U\ni x$ such that the associated holonomic frame $\{\partial_i\}_{i\leq\dim(M)}$ induces a local section of $P$.
    }
    \begin{property}\label{bundle:integrable_torsion_free}
        An integrable $G$-structure admits a torsion-free connection.
    \end{property}

    \begin{example}[Orientable manifold]\index{orientable!manifold}\label{bundle:orientable_structure}
        An $n$-dimensional manifold is orientable if and only if the structure group can be reduced to $\GL^+(n)$, the group of invertible matrices with positive determinant (or even $\SL(n)$, since $\GL^+(n)$ deformation retracts onto $\SL(n)$). Furthermore, if it exists, it is integrable.
    \end{example}
    \begin{example}[Riemannian manifold]\label{bundle:riemannian_G_structure}
        An $\mathrm{O}(n)$-structure turns $M$ into a \textit{Riemannian manifold} (see \cref{riemann:riemannian_manifold}). Because the cotangent bundle $T^*M$ transforms under the contragredient representation of the transition maps of the tangent bundle $TM$, which coincides with the regular representation in the case of $\mathrm{O}(n)$, these two bundles are equivalent. The isomorphism is given by the \textit{musical isomorphism(s}) (see \cref{riemann:musical_isomorphisms}). Moreover, Riemannian structures are always integrable.
    \end{example}

    The following property gives a classification of bundle reductions.
    \begin{property}[Equivariant morphisms]\label{bundle:reduction_classification}
        Consider a principal $G$-bundle $P$ and let $F$ be a set that admits a transitive action $\varphi:G\rightarrow\Aut(F)$. For every $f\in F$ and every equivariant morphism $\psi:P\rightarrow F$, there exists a reduction of $G$ to the isotropy subgroup $G_f$ defined by
        \begin{gather}
            P_f := \{p\in P\mid\psi(p) = f\}\,.
        \end{gather}
        One can generalize this definition to arbitrary Lie group actions by restricting to the equivariant morphisms that take value in a single orbit.\footnote{Since transitive actions have a unique orbit, this is a well-defined generalization.}

        Consider a subgroup inclusion $\iota:H\hookrightarrow G$. If $H$ is closed, the action of $G$ on $G/H$ is transitive and one can specialize the above construction to the coset space $G/H$. It follows, that reductions are classified by equivariant maps into the coset space $G/H$ or, according to \cref{bundle:section_bijection}, by the (global) sections of the associated coset bundle $P\times_GG/H$.
    \end{property}
    \begin{result}
        If $G$ is connected, every principal $G$-bundle is reducible to a maximal compact subgroup of $G$.
    \end{result}

    \newdef{Reducible connection}{\index{connection!reducible}\label{bundle:reducible_connection}
        Consider a principal $G$-bundle $P$ equipped with a connection one-form $\omega$. If a bundle map $F$ induces an $H$-reduction of $P$, the connection $\omega$ is said to be reducible (and to be compactible with the given reduction) if $F^*\omega$ takes values in $\mathfrak{h}$.
    }
    \begin{property}\label{bundle:connection_reducibility}
        Consider a principal bundle $P$ together with a reduction $P_f$ induced by an equivariant morphism $\psi:P\rightarrow F$ with $f\in F$. A principal connection on $P$ is reducible to $P_f$ if and only if $\psi$ is parallel with respect to this connection, i.e.~$\mathrm{D}\psi=0$.
    \end{property}

    The following two properties characterize bundle reductions in terms of holonomy bundles.
    \begin{property}[Holonomy bundles and reductions]
        The holonomy bundle $H(p)$ is a reduction of $P$ for every $p\in P$. Furthermore, any connection $\omega$ is reducible to $H(p)$ and it can be proven that this reduction is minimal, i.e.~there exists no further reduction.
    \end{property}
    \begin{result}\label{bundle:reducible_holonomy}
        A principal bundle (and any associated connection) is irreducible to a subgroup of the structure group\footnote{Lifts as in the case of $\mathrm{Spin}$-structures do not fall under the holonomy classification.} if and only if it is equivalent to its holonomy bundle.
    \end{result}

    The following property is less well known in the literature.
    \begin{property}[\difficult{Flat connections}]\label{bundle:flat_connection_cohomology}
        A principal bundle is flat if and only if its structure group $G$ can be lifted to the discrete group $G^\delta$, i.e.~the same group but with the discrete topology. An equivalent condition is that the structure group can be lifted to the fundamental group of the base space $\pi_1(M)$. This latter condition is related to the fact that, for flat connections, parallel transport is path independent and, hence, is fully characterized by the loops in $M$. Note that once such a lift is chosen or, equivalently, if the structure group of the bundle is discrete, a unique flat connection exists.

        More abstractly, one obtains the following bijection:
        \begin{gather}
            \mathrm{hol}:H_{\text{flat conn}}^1(M;G)\cong\mathbf{Grp}\bigl(\pi_1(M),G\bigr)/G\,,
        \end{gather}
        where $H_{\text{flat conn}}^1(M;G):=\pi_0\mathbf{H}(M,\flat\mathbf{B}G)$ is the cohomology set (\cref{topos:cohomology}) of \textit{differentiable stacks} and $\flat$ is the flat modality (\cref{topos:cohesive_modalities}). By the adjunctions of cohesive modalities, this classification is equivalent to giving a morphism
        \begin{gather}
            \mathrm{transport}:\symbf{\Pi}(M)\rightarrow\mathbf{B}G
        \end{gather}
        from the fundamental ($\infty$-)groupoid (\cref{topology:fundamental_groupoid}) to the delooping groupoid.
    \end{property}
    \begin{remark}
        The above condition can also be applied to define flatness for topological bundles, where the notion of connections does not make sense.
    \end{remark}

\section{Characteristic classes}

    \newdef{Characteristic class}{\index{characteristic!class}
        Let $M$ be a manifold. A characteristic class is a map from isomorphism classes of vector bundles or principal bundles $E\rightarrow M$ to cohomology classes $c(E)\in H^\bullet(M;R)$ that is stable under pullback. The coefficient ring $R$ is often assumed to be the base field ($\mathbb{R}$ or $\mathbb{C}$), but this is not always the case (e.g.~the \textit{Stiefel--Whitney classes} from \cref{section:stiefel_whitney}).
    }

    Using the classification property~\ref{bundle:classification}, one can give a concise construction of characteristic classes in the case of principal bundles.
    \begin{construct}
        Consider a principal $G$-bundle over $M$ with classifying map $\varphi\in[M,BG]$. For every $c\in H^\bullet(BG)$, one defines the characteristic class
        \begin{gather}
            c(P):=\varphi^*c\in H^\bullet(M)\,.
        \end{gather}
    \end{construct}

    As the definition implies, both vector bundles and principal bundles admit a theory of characteristic classes. However, in the literature, most authors focus on either one of them and, hence, it is not always easy to see which theorems can be translated and how to do this whenever possible. The relation between the two theories is given by the associated bundle construction~\ref{bundle:associated_bundle_construction} (see~\citet{sorensen_introduction_2017} for more information). The characteristic classes of a vector bundle are defined as those of its frame bundle. Because of this duality, one can freely switch between the language of vector bundles and principal bundles, depending on where the results will be applied.

    Because the statement of the `splitting principle' is quite different when given in the language of principal bundles or that of vector bundles, it will be stated for both cases. First, an additional construction is needed.
    \newdef{Flag bundle}{\index{flag}
        Let $\bundle$ be a vector bundle. Using the definition of the flag manifold (\cref{linalgebra:flag_manifold}), one can construct, for every fibre $E_p$, a space $\mathrm{Fl}(E_p)$ that has the complete flags of $E_p$ as points, expressed as a sequence of one-dimensional subspaces. From this, one can then construct the flag bundle $\pi_{\text{Fl}}:\mathrm{Fl}(E)\rightarrow M$ with the flag manifolds as fibres.
    }
    \begin{theorem}[Splitting principle]\index{splitting principle}
        Consider a vector bundle $\bundle$. Its flag bundle has the following properties:
        \begin{itemize}
            \item The pullback bundle $\pi_{\text{Fl}}^*E$ can be decomposed as a Whitney sum of line bundles.
            \item The induced morphism on cohomology $\pi_{\text{Fl}}^*:H^\bullet(M)\rightarrow H^\bullet(\mathrm{Fl}(E))$ is injective.
        \end{itemize}
    \end{theorem}
    For the following form of the splitting principle, see~\citet{may_note_2005,debray_characteristic_2018}.
    \begin{theorem}[Splitting principle]
        Consider a principal bundle $\pbundle$ for which the structure group $G$ is compact. Every compact Lie group contains a maximal torus $T\cong\mathbb{T}^n$, where $\mathbb{T}$ is the standard 1-torus $S^1\cong\mathrm{U}(1)$. The inclusion $\iota:T\hookrightarrow G$ induces a $G$-bundle $B\iota:BT\rightarrow BG$ with fibre $G/T$ and total space $EG$. The pullback of $B\iota$ along the classifying map $p\in[M,BG]$ of $P$ defines another $G$-bundle $\rho:p^*B\iota\rightarrow M$, again with fibre $G/T$. This fibre bundle has the following properties:
        \begin{itemize}
            \item $\rho^*p$ admits a reduction of the structure group to $T$.
            \item The induced morphism on cohomology $\rho^*:H^\bullet(M)\rightarrow H^\bullet(\rho^*P)$ is injective.
        \end{itemize}
    \end{theorem}
    Because $B\mathbb{T}^n\cong(B\mathbb{T})^n$, one can use the fibration $B\iota$ to pull back any class $c\in H^\bullet(BG)$ to a tuple of classes in $H^\bullet(B\mathrm{U}(1))$. Therefore, every characteristic class of $\rho^*P$ is a tuple of characteristic classes of circle bundles. The injectivity of $\rho^*$ implies that every characteristic class of $P$ can be characterized by such a tuple.

\subsection{Chern--Weil theory}\label{section:chern_weil}

    The characteristic classes of a vector bundle can be constructed from a connection and curvature form on the vector bundle. The resulting expressions are polynomial in the curvature forms. This result is established by Chern--Weil theory.

    \newdef{Chern--Weil morphism}{\index{Chern--Weil}
        Let $\pbundle$ be a principle $G$-bundle and choose a connection one-form $\omega$ with curvature two-form $\Omega$. There exists a morphism of algebras
        \begin{gather}
            K[\mathfrak{g}]^G\rightarrow\Omega^\bullet(P):f\mapsto f(\Omega)\,,
        \end{gather}
        where $K$ is the base field, satisfying:
        \begin{itemize}
            \item $f(\Omega)$ is closed.
            \item $f(\Omega)$ pulls back uniquely to a (closed) form $\overline{f}(\Omega) := \pi^*f(\Omega)$ on $M$.
            \item $\overline{f}(\Omega)$ does not depend on the chosen connection, i.e.~the difference $\overline{f}(\Omega)-\overline{f}(\Omega')$ for any two connection one-forms $\omega,\omega'$ is exact.
        \end{itemize}
    }

    In the remainder of this section, this approach will be used to find explicit descriptions of characteristic classes of vector bundles and principal bundles.

\subsection{Complex bundles}

    On \textit{complex bundles}, one can always choose $\mathfrak{u}(n)$-valued connection one-forms, since the structure group can be reduced to $\mathrm{U}(n)$. See \cref{chapter:complex_geometry} for more information.

    \newdef{Chern class}{\index{Chern!class}\label{bundle:chern_class}
        Consider a rank-$n$ vector bundle $\bundle$ with curvature two-form $\Omega$. Using Chern--Weil theory, one defines the Chern classes $c_k(E)\in H^{2k}(M)$ as follows:
        \begin{gather}
            \det\left(\mathbbm{1} + \frac{it}{2\pi}\Omega\right) =: \sum_{k=1}^nc_k(E)t^k\,.
        \end{gather}
        This series is sometimes called the \textbf{Chern polynomial} $c_t(E)$. For $t=1$, one obtains the \textbf{total Chern class}.
    }

    \newdef{Chern character}{\index{Chern!character}\label{bundle:chern_character}
        Consider a rank-$n$ vector bundle $\bundle$ with curvature two-form $\Omega$. Using Chern--Weil theory, one defines the Chern character as follows:
        \begin{gather}
            \mathrm{ch}(E) := \tr\left(\exp\left(\frac{i\Omega}{2\pi}\right)\!\right).
        \end{gather}
        If $c_i:=c_i(E)$ denotes the $i^{\text{th}}$ Chern class of $E$, the Chern character can also be expressed as
        \begin{gather}
            \mathrm{ch}(E) = \sum_{k=0}^n\frac{c_1^k+\cdots+c_n^k}{k!}\,.
        \end{gather}
        The term with prefactor $1/k!$ is a homogeneous polynomial of degree $k\in\mathbb{N}$. One sometimes calls this term the $k^{\text{th}}$ Chern character. By Chern--Weil theory, this form is proportional to $\tr(\Omega^k)$.
    }

    \begin{formula}[Whitney product formula\footnotemark]\index{Whitney!product formula}
        \footnotetext{This formula is also called the \textbf{Whitney sum formula}.}
        The following equality holds for all bundles $E_1,E_2$:
        \begin{gather}
            c_t(E_1\oplus E_2) = c_t(E_1)c_t(E_2)\,.
        \end{gather}
    \end{formula}
    \begin{result}[Chern root]\index{Chern!root}
        The product formula and the splitting principle imply that the Chern polynomial of any rank-$n$ vector bundle can be decomposed as follows:
        \begin{gather}
            c_t(E) = \prod_{i=1}^n(1+x_it)\,,
        \end{gather}
        where, in the case of decomposable vector bundles $E=\oplus_{i=1}^n L_i$, the $x_i$ are the first Chern classes $c_1(L_i)$. The factors $x_i$ are called the \textbf{Chern roots}.

        By working out the above formula, one can see that the coefficient in degree $k\in\mathbb{N}$, i.e.~the $k^{\text{th}}$ Chern class, is given by the $k^{\text{th}}$ elementary symmetric polynomial:
        \begin{gather}
            c_k(E) = \sum_{i_1<\cdots<i_k}x_{i_1}\cdots x_{i_k}\,.
        \end{gather}
    \end{result}

    \newdef{Canonical class}{\index{canonical!class}
        The first Chern class of the canonical bundle of a smooth manifold $M$. It is often denoted by $K_M$.
    }
    \newdef{Theta characteristic}{\index{characteristic!$\theta$}\label{bundle:theta_characteristic}
        Consider a smooth manifold $M$ with its canonical class $K_M$. The theta characteristic, if it exists, is a characteristic class $\Theta$ such that $\Theta\cup\Theta=K_M$, where $\cup$ is the cup-product (\cref{bundle:cup_product}).
    }

    After finding the Chern roots of a vector bundle, they can be used to define various other classes.
    \begin{construct}[Genus]\index{genus}
        Let $f\in K[[t]]$ be a formal power series with constant term 1. For any $k\in\mathbb{N}$, one can easily see that $f(x_1)\cdots f(x_k)$ is a symmetric power series (also with constant term 1). For every such $f$, define the $f$-genus by the formula\footnote{In the case that $E$ splits as a sum for line bundles, one simply obtains the product $f(x_1)\cdots f(x_k)$.}
        \begin{gather}
            G_f(E) := \det f\left(\frac{it}{2\pi}\Omega\right)\,.
        \end{gather}
        The coefficients of this power series define characteristic classes of $E$.
    \end{construct}

    \begin{example}[Chern class]
        The total Chern class is recovered as the genus of $f=1+x$.
    \end{example}

    The following genus is very important, especially in the context of the \textit{Atiyah--Singer index theorem} (see further below).
    \begin{example}[Todd class]\index{Todd class}\index{Bernoulli!number}\label{bundle:todd_class}
        Consider the function
        \begin{gather}
            Q(x) := \frac{x}{1-e^{-x}} = 1 + \frac{x}{2} + \sum_{i=1}^{+\infty}\frac{(-1)^{i-1}B_i}{(2i)!}x^{2i}\,,
        \end{gather}
        where $B_i$ is the $i^{\text{th}}$ \textit{Bernoulli number}. Let $\pi:E\rightarrow M$ be a rank-$n$ vector bundle. If $x_i$ are the Chern roots of $E$, the Todd class is defined as
        \begin{gather}
            \mathrm{td}(E) := \prod_{i=1}^nQ(x_i)\,.
        \end{gather}
        The characteristic function of the Todd genus is the unique power series with constant term 1 that has the property that, for all $n\in\mathbb{N}$, the $n^{\text{th}}$ degree term in $f(x)^{n+1}$ has coefficient 1.
    \end{example}
    Another genus that is used in the context of the index theorems is the following one.
    \begin{example}[$\hat{A}$-genus\footnotemark]\label{bundle:a_roof_genus}
        \footnotetext{This is pronounced as \textit{A-roof genus}.}
        The $\hat{A}$-genus is defined through the following function:
        \begin{gather}
            Q(x) := \frac{\sqrt{x}/2}{\sinh(\sqrt{x}/2)} = 1 - \frac{x}{24} + \frac{7x^2}{5760} - \cdots\,.
        \end{gather}
    \end{example}

\subsection{Real bundles}

    In the case of real vector bundles, which will be assumed to come equipped with a \textit{fibre metric} as to allow for $\mathfrak{o}(n)$-valued connection one-forms, one can also define a set of characteristic classes.

    \newdef{Pontryagin class}{\index{Pontryagin!class}\label{bundle:chern_pontryagin}
        Consider a real vector bundle $\bundle$. The Pontryagin classes of $E$ are defined as follows:
        \begin{gather}
            p_k(E) := (-1)^kc_{2k}(E^{\mathbb{C}})\in H^{4k}(M)\,,
        \end{gather}
        where $E^{\mathbb{C}}$ is the \textit{complexification} of $E$. If $E$ has the structure of a complex vector bundle, one can use the relation $E^{\mathbb{C}}\cong E\oplus\overline{E}$ to express the Pontryagin classes purely in terms of the Chern classes of $E$, e.g.
        \begin{gather}
            p_1(E)=c_1^2(E)-2c_2(E)\,.
        \end{gather}
    }

    When the vector bundles in question are orientable, the structure group can further be reduced to $\mathrm{SO}(n)$. If the rank is even, one can define the following characteristic class.
    \newdef{Euler class}{\index{Euler!class}
        Let $\bundle$ be an orientable vector bundle of rank $2k$. The Euler class of $E$ is defined as follows:
        \begin{gather}
            e(E) := p_k(E)\cup p_k(E)\,.
        \end{gather}
    }
    \begin{property}\index{Pfaffian}
        Using the fact that one can write the total Pontryagin class using Chern--Weil theory as
        \begin{gather}
            p(E) = \det\left(1-\frac{1}{2\pi}\Omega\right)
        \end{gather}
        and that the determinant is the square of the \textit{Pfaffian}, one can equivalently define the Euler class as follows:
        \begin{gather}
            e(E) := \mathrm{Pf}\left(-\frac{1}{2\pi}\Omega\right)\,.
        \end{gather}
    \end{property}

\subsection{Cohomology of Lie groups}\index{cohomology!Lie group}

    Using the language of characteristic classes, one can find a concise description of the (continuous) group cohomology of Lie groups. First of all, there is the isomorphism between continuous group cohomology and cohomology of classifying spaces:
    \begin{gather}
        H^\bullet(BG;\mathbb{Z})\cong H^\bullet_c(G;\mathbb{Z})\,.
    \end{gather}

    \todo{COMPLETE}

\subsection{Chern--Simons forms}\label{section:chern_simons}\index{Chern--Simons!form}

    By Chern--Weil theory, the image of invariant polynomials under the Chern--Weil morphism is closed. This not only allows to interpret them as cohomology classes as done above, but it also implies that (locally) one can find a trivialization:
    \begin{gather}
        \langle\Omega_A,\cdots\rangle_n = \dr\mathrm{CS}^n(A)\,,
    \end{gather}
    where $\langle\cdots\rangle_n$ denotes an invariant polynomial of degree $2n$. Such a form is called a \textbf{Chern--Simons form} or \textbf{secondary characteristic form}.

    More generally, consider the \textit{concordance} $P\times[0,1]$ for some principal bundle $P$ with itself together with a connection $\widehat{A}$. This connection defines a path between two connections $A,A'$ on $P$. The relative Chern--Simons form is defined as\index{concordance}
    \begin{gather}
        \mathrm{CS}^n(A,A') := \Int_{[0,1]}\langle\Omega_{\widehat{A}},\cdots\rangle_n\,.
    \end{gather}
    The differential of this form gives the difference of characteristic forms:
    \begin{gather}
        \dr\mathrm{CS}^n(A,A') = \langle\Omega_{A'},\cdots\rangle_n - \langle\Omega_A,\cdots\rangle_n\,.
    \end{gather}
    However, note that the Chern--Simons form is only defined up to an exact form.

    \begin{example}[Killing form]
        Consider the Killing transgression form, which, for $\mathfrak{su}(n)$, is induced by the trace functional. The related Chern--Simons form is given by
        \begin{gather}
            \langle\dr A,A\rangle + \frac{2}{3}\langle A,[A\wedge A] \rangle\,.
        \end{gather}
        This form is the exterior derivative of the second Chern character, which, for $\mathrm{SU}(n)$-bundles, is equivalent to the second Chern class. A similar expression can be obtained for the Chern--Simons form associated to all other Chern characters.
    \end{example}

\section{\difficult{Differential cohomology}}\index{differential!cohomology}\label{section:differential_cohomology}

    In the foregoing sections, a multitude of objects were introduced that are related to principal fibre bundles. For example, connections and their associated curvature forms could be used to construct differential quantities, while characteristic classes contained data about the topology of the bundle. However, even in the simple case of $\mathrm{U}(1)$-bundles, neither the (first) Chern class, nor the curvature form are able to uniquely characterize the bundle.

\subsection{Differential characters}

    In this section, all (co)chains, (co)cycles and (co)boundaries are assumed to be smooth. By doing so, no generality is lost since every continuous chain is homotopic to a smooth one.

    \newdef{Differential character}{\index{Cheeger--Simons|see{differential character}}\index{differential!character}
        Let $M$ be a smooth manifold. A (\textbf{Cheeger--Simons}) differential character of \textbf{degree} $k\in\mathbb{N}_0$ is a group morphism $\chi:Z_{k-1}(M)\rightarrow\mathrm{U}(1)$ given by integration over boundaries:\footnote{Some authors omit the exponential function by working modulo $\mathbb{Z}$. This just replaces the multiplicative group $\mathrm{U}(1)$ by the isomorphic additive group $\mathbb{R}/\mathbb{Z}$.}
        \begin{gather}
            \chi(\partial\gamma) := \exp\left(2\pi i\int_\gamma\omega(\chi)\right)
        \end{gather}
        for some $\omega(\chi)\in\Omega^k(M)$. The group of differential characters of degree $k$ is denoted by $\widehat{H}^k(M;\mathbb{Z})$. For $k=0$, the convention $\widehat{H}^0(M;\mathbb{Z}):=H^0(M;\mathbb{Z})$ is used.
    }

    \begin{property}[Thin invariance]\index{thin}
        Differential characters vanish on boundaries of thin chains, i.e.~for chains $\gamma\in C_k(M)$ such that $\int_\gamma\omega=0$ for all $\omega\in\Omega^k(M)$, one has $\chi(\partial\gamma)=1$.
    \end{property}

    \begin{property}[Curvature]\index{curvature}\index{flat!character}
        Every differential character is represented by a unique, closed and integral $k$-form. The map
        \begin{gather}
            \mathrm{curv}:\widehat{H}^k(M;\mathbb{Z})\rightarrow\Omega^k_{\text{int}}(M):\chi\mapsto\omega(\chi)
        \end{gather}
        is called the curvature map. If $\mathrm{curv}(\chi)=0$, the character $\chi$ is said to be \textbf{flat}.
    \end{property}

    \begin{property}[Characteristic class]\index{characteristic!class}\index{Dixmier--Douady class}\label{bundle:characteristic_class}
        Every differential character gives rise to a characteristic class as follows. The group of cocycles is free and the quotient map $\mathbb{R}\rightarrow\mathrm{U}(1)$ is onto, so every differential character lifts to a group homomorphism $\widetilde{\chi}:Z_{k-1}(M)\rightarrow\mathbb{R}$ such that $\chi(z)=\exp\bigl(2\pi i\widetilde{\chi}(z)\bigr)$. The map
        \begin{gather}
            \mathrm{ch}(\chi):C_k(M)\rightarrow\mathbb{Z}:\gamma\mapsto\Int_\gamma\mathrm{curv}(\chi)-\widetilde{\chi}(\partial\gamma)
        \end{gather}
        induces a well-defined map $\mathrm{ch}:\widehat{H}^k(M;\mathbb{Z})\rightarrow H^k(M;\mathbb{Z})$. If $\mathrm{ch}(\chi)=0$, the character $\chi$ is said to be \textbf{topologically trivial}. The characteristic class associated to a differential character is sometimes called the \textbf{Dixmier--Douady} class (see e.g.~\citet{brylinski_loop_1993}).
    \end{property}

    \begin{example}[Circle bundles]
        Consider a $\mathrm{U}(1)$-bundle $\pi:P\rightarrow M$ with connection one-form $\omega$. Holonomy around a closed curve $\gamma$ gives a parallel transport map
        \begin{gather}
            P\rightarrow P:p\mapsto p\cdot g(p,\gamma)
        \end{gather}
        for a smooth function $g:\Omega_p P\rightarrow\mathrm{U}(1)$. In fact, $g$ only depends on the homology of $\gamma$ and the projection $\pi(p)$, so one obtains a map $g\in\widehat{H}^2(M;\mathbb{Z})$ with curvature $\frac{-1}{2\pi i}\Omega$ and characteristic class $c_1(P)$. The converse also holds, every differential character of degree 2 determines a principal $\mathrm{U}(1)$-bundle with connection (up to connection-preserving isomorphisms). This leads to the following equivalence:
        \begin{align}
            \widehat{H}^2(M;\mathbb{Z})\cong\{\text{isomorphism classes of }(P,\nabla)\mid P&\text{ a circle bundle and }\\
            &\nabla\text{ a principal connection}\}\,.\nonumber
        \end{align}
    \end{example}

    The curvature and characteristic class maps fit in some exact sequences.
    \begin{property}[Curvature exact sequence]
        The first sequence is induced by the curvature map. A vanishing curvature form says that the character vanishes identically on boundaries. This is exactly the property satisfied by cohomology classes:
        \begin{gather}
            0\longrightarrow H^{k-1}(M;\mathrm{U}(1))\longrightarrow\widehat{H}^k(M;\mathbb{Z})\overset{\mathrm{curv}}{\longrightarrow}\Omega^k_{\text{int}}(M)\longrightarrow0\,.
        \end{gather}
        The first cohomology group classifies flat circle bundles by \cref{bundle:flat_connection_cohomology}, so this sequence says that, by extending the above example to higher $n$-bundles (this can be formalized cf.~\textit{bundle gerbes}), two circle $n$-bundles with the same curvature differ by a flat circle $(n-1)$-bundle.
    \end{property}
    \begin{property}[Characteristic class exact sequence]
        \begin{gather}
            0\longrightarrow \Omega^{k-1}(M)/\Omega^{k-1}_{\text{int}}(M)\longrightarrow\widehat{H}^k(M;\mathbb{Z})\overset{\mathrm{ch}}{\longrightarrow} H^k(M;\mathbb{Z})\longrightarrow0
        \end{gather}
        The first map is induced by the holonomy functional
        \begin{gather}
            \iota:\Omega^{k-1}(M)\rightarrow\widehat{H}^k(M;\mathbb{Z}):\omega\rightarrow\exp\left(2\pi i\Int_-\omega\right)\,,
        \end{gather}
        which has the closed integral forms as kernel. This exact sequence says that two connections on the same principal $\mathrm{U}(1)$-bundle differ by a global connection form (up to an integral form).
    \end{property}

\subsection{Combining singular and de Rham cohomology}

    There is an alternative to the Cheeger--Simons approach. Let $C^n$ and $Z^n$ again denote the smooth cochain and cocycle groups.
    \newdef{Differential cocycle}{
        A tuple $(c,h,\omega)\in C^n(M;\mathbb{Z})\times C^{n-1}(M)\times\Omega^n(M)$ such that
        \begin{gather}
            \begin{aligned}
                \delta c &= 0\\
                \dr\omega &= 0\\
                \delta h &= \omega-c\,.
            \end{aligned}
        \end{gather}
        A differential cocycle thus consists of a singular cocycle (topological information) and a de Rham cocycle (differential information), that are equal up to a (singular) coboundary.

        The cochain complex $C^n(M;\mathbb{Z})\times C^{n-1}(M)\times\Omega^n(M)$ with differential
        \begin{gather}
            \dr:(c,h,\omega)\mapsto(\delta c,\omega-c-\delta h,\dr\omega)
        \end{gather}
        defines a cohomology theory $\widehat{H}(n)^\bullet(M)$.
    }
    \begin{property}[Relation to differential characters]\index{monodromy}
        Differential characters and differential cocycles are related as follows:
        \begin{gather}
            \widehat{H}^k(M;\mathbb{Z})\cong\widehat{H}(k)^k(M)\,.
        \end{gather}
        Given a differential cocycle $(c,h,\omega)$, the curvature and characteristic class of the associated differential character are $\omega$ and $c$, respectively. The function $e^{2\pi ih}$ is called the \textbf{monodromy} of the cocycle. It can be checked that \cref{bundle:characteristic_class} is exactly the third relation in the definition of cocycles above. The $\bmod\,\mathbb{Z}$-reduction of $h$ gives the differential character associated to the cocycle.
    \end{property}

    \begin{example}
        The first ordinary differential cohomology group $\widehat{H}^1(M;\mathbb{Z})$ is isomorphic to the group of smooth functions $C^\infty(M;\mathrm{U}(1))$.
    \end{example}

\subsection{Deligne cohomology}

    The following theorem states that the differential characters are essentially the unique objects with these properties and that they define a generalized cohomology theory.
    \begin{theorem}[Simons--Sullivan]\index{Simons--Sullivan}
        There is an essentially unique functor \[\widehat{H}^\bullet(-;\mathbb{Z}):\mathbf{Diff}\rightarrow\mathbf{Ab}^{\mathbb{Z}}\] such that there exist four natural transformations
        \begin{enumerate}
            \item\emph{\textbf{Flat class}:} $j:H^{\bullet-1}(-;\mathrm{U}(1))\rightarrow\widehat{H}^\bullet(-;\mathbb{Z})$,
            \item\emph{\textbf{Topological trivialization}:} $\iota:\Omega^{\bullet-1}/\Omega^{\bullet-1}_{\emph{int}}\rightarrow\widehat{H}^\bullet(-;\mathbb{Z})$,
            \item\emph{\textbf{Characteristic class}:} $\mathrm{ch}:\widehat{H}^\bullet(-;\mathbb{Z})\rightarrow H^\bullet(-;\mathbb{Z})$, and
            \item\emph{\textbf{Curvature}:} $\mathrm{curv}:\widehat{H}^\bullet(-;\mathbb{Z})\rightarrow\Omega^\bullet_{\emph{int}}$
        \end{enumerate}
        that fit in the following commutative diagram, where the diagonal sequences are exact:
        \begin{gather*}
            \begin{tikzpicture}
                \node (01) at (0,0) {$0$};
                \node (02) at (10,0) {$0$};
                \node (03) at (10,-5) {$0$};
                \node (04) at (0,-5) {$0$};
                \node (beta0) at (2.5,-1.25) {$H^{\bullet-1}(-;\mathrm{U}(1))$};
                \node (beta1) at (7.5,-1.25) {$H^\bullet(-;\mathbb{Z})$};
                \node (dR) at (0,-2.5) {$H^{\bullet-1}_{\emph{dR}}$};
                \node (char) at (5,-2.5) {$\widehat{H}^\bullet(-;\mathbb{Z})$};
                \node (dR2) at (10,-2.5) {$H^\bullet_{\emph{dR}}$};
                \node (quot) at (2.5,-3.75) {$\Omega^{\bullet-1}/\,\Omega^{\bullet-1}_{\emph{int}}$};
                \node (int) at (7.5,-3.75) {$\Omega^\bullet_{\emph{int}}$};
                \draw[->] (01) -- (beta0);
                \draw[->] (beta0) -- node[below left]{\footnotesize j} (char);
                \draw[->] (char) -- node[above right]{\emph{\footnotesize curv}} (int);
                \draw[->] (int) -- (03);
                \draw[->] (04) -- (quot);
                \draw[->] (quot) -- node[above left]{$\iota$} (char);
                \draw[->] (char) -- node[below right]{\emph{\footnotesize ch}} (beta1);
                \draw[->] (beta1) -- (02);
                \draw[->] (beta0) -- node[above]{\emph{\footnotesize Bockstein}} (beta1);
                \draw[->] (quot) -- node[below]{$\dr$} (int);
                \draw[->] (dR) -- (beta0);
                \draw[->>] (dR) -- (quot);
                \draw[->] (beta1) -- node[above right]{\emph{\footnotesize de Rham}}(dR2);
                \draw[right hook->] (int) -- (dR2);
            \end{tikzpicture}
        \end{gather*}
    \end{theorem}

    Functors satisfying the above properties are said to define \textbf{ordinary differential cohomology theories}. Another approach to differential cohomology is given by the Deligne complex.
    \newdef{Deligne complex}{\index{Deligne!complex}\label{bundle:deligne_complex}
        Let $\mathbf{B}^k\mathrm{U}(1)_{\text{conn}}$ denote the cochain complex
        \begin{gather}
            \mathcal{O}_M^\times\overset{\dr\log}{\longrightarrow}\Omega^1\overset{\dr}{\longrightarrow}\cdots\overset{\dr}{\longrightarrow}\Omega^k.
        \end{gather}
        (Smooth) Deligne cohomology is defined as follows:
        \begin{gather}
            H_D^{k+1}(M;\mathbb{Z}) := \check{H}^0\bigl(M;\mathbf{B}^k\mathrm{U}(1)_{\text{conn}}\bigr)\,,
        \end{gather}
        where $\check{H}^\bullet$ denotes \v{C}ech cohomology (\cref{sheaf:cech}). (Note that $\mathbf{B}^k\mathrm{U}(1)_{\text{conn}}$ is turned into a chain complex by inverting the degrees.)
    }

    \begin{property}[Deligne--Beilinson product]\index{Deligne--Beilinson product}
        Consider the Deligne complex for two integers $k,l\in\mathbb{N}$. There exists a cup product
        \begin{align}
            \cup&:\mathbf{B}^k\mathrm{U}(1)_{\text{conn}}\otimes\mathbf{B}^l\mathrm{U}(1)_{\text{conn}}\rightarrow\mathbf{B}^{k+l+1}\mathrm{U}(1)_{\text{conn}}\nonumber\\
            &:x\otimes y\mapsto x\cup y:=
            \begin{cases}
                x\wedge\dr y&\cif\deg(y)=l\,,\\
                0&\text{otherwise}\,.
            \end{cases}
        \end{align}
    \end{property}

    \begin{example}[Circle bundles]
        A (\v{C}ech--)Deligne cocycle in degree 2 consists of data $(A_i,g_{ij})$ such that
        \begin{gather}
            \begin{tikzpicture}
                \node (A) at (0,0) {${A_i}$};
                \node (AA) at (2,0) {$A_i-A_j$};
                \node (dlog) at (3.6,0) {$=\dr\log g_{ij}$} (4.4,0) node[right]{$=g^{-1}_{ij}\dr g_{ij}$};
                \node (g) at (3.6,-2) {${g_{ij}}$};
                \node (ggg) at (6.2,-2) {$g_{jk}g^{-1}_{ki}g_{ij}=1\,,$};
                \draw[right hook->] (A) -- (AA);
                \draw[->] (g) -- node[right]{$\dr\log$} (dlog);
                \draw[right hook->] (g) -- (ggg);
            \end{tikzpicture}
        \end{gather}
        where the inclusion arrows denote the restriction to intersections $U_{ij}:=U_i\cap U_j$. \Cref{bundle:compatibility_connection} and the subsequent example, specialized in the case of $\mathrm{U}(1)$-bundles, show that the above data are exactly the components of a principal circle bundle with connection.
    \end{example}
    \remark{As was the case for differential characters, higher Deligne cohomology classes classify higher $\mathrm{U}(1)$-bundles with connection. The main benefit of this approach is that one gets an `explicit' description of the local data. See~\citet{hitchin_lectures_1999} for a good introduction.}

    \begin{remark}[Trivial bundles and twisted bundles]
        From \v{C}ech--Deligne cohomology, one knows that a trivial $k$-bundle $\alpha$ is defined by a $(k-1)$-cochain $\beta$ such that
        \begin{gather}
            (\delta\beta)_{i_0\ldots i_k} = \alpha_{i_0\ldots i_k}\,,
        \end{gather}
        i.e.~a trivial $k$-bundle is equivalent to a twisted $(k-1)$-bundle.
    \end{remark}

    \todo{COMPLETE}

\section{Cartan geometry}\label{section:cartan_geometry}

    In the first part of this section, a short overview of \indexauthor{Klein}'s \textbf{Erlangen program}, which unifies (and generalizes) Euclidean and non-Euclidean geometries, will be given. In the second part of this section, \indexauthor{Cartan}'s generalization in terms of bundle theory is explained. A reference for this section is~\citet{sharpe_differential_2000}.\index{Erlangen program}

\subsection{Klein geometry}

    \newdef{Klein geometry}{\index{Klein!geometry}
        Consider a Lie group $G$ together with a closed subgroup $H$. If it is connected, the orbit space $G/H$ is called a Klein geometry with \textbf{principal group} $G$. If the principal group is also connected, the Klein geometry is said to be \textbf{geometrically oriented}.

        If the associated Lie algebras are denoted by $\mathfrak{g},\mathfrak{h}$, respectively, the pair $(\mathfrak{g},\mathfrak{h})$ is called a \textbf{Klein pair}. In fact, any pair $(\mathfrak{g},\mathfrak{h}\leq\mathfrak{g})$ can be called a Klein pair.
    }
    \begin{property}[Bundle]
        It is clear that every Klein geometry gives a homogeneous space and, hence, a principal bundle of rank $\dim(G)-\dim(H)$.
    \end{property}

    \begin{example}[Euclidean space]
        Consider the Euclidean group $\mathrm{Euc}(n):=\mathbb{R}^n\rtimes\mathrm{O}(n)$, i.e.~the symmetry group of the Euclidean space $\mathbb{R}^n$. This group clearly acts transitively and the subgroup $\mathrm{O}(n)$ can be seen to leave the origin fixed. This implies that $\mathbb{R}^n$ is a homogenous space and even a Klein geometry of the form $\mathrm{Euc}(n)/\mathrm{O}(n)$.
    \end{example}

    \newdef{Effective Klein pair}{
        The action of $G$ on $G/H$ is not necessarily effective, i.e.~the kernel
        \begin{gather}
            \ker(\rho)=\{x\in G\mid\forall g\in G:g^{-1}xg\in H\}
        \end{gather}
        is not necessarily trivial. If it is, the Klein geometry is said to be effective. In terms of the associated Klein pair, this means that $\mathfrak{h}$ contains no nontrivial ideals of $\mathfrak{g}$. A Klein geometry is said to be locally effective if the kernel is discrete.
    }
    \newdef{Reductive Klein pair}{\index{reductive}\label{bundle:klein_reductive}
        A Klein pair $(\mathfrak{g},\mathfrak{h})$ for which $\mathfrak{g}$ admits a decomposition of the form
        \begin{gather}
            \mathfrak{g} = \mathfrak{h} + \mathfrak{m}\,,
        \end{gather}
        where $\mathfrak{m}$ is an $\mathfrak{h}$-module.
    }

    \newdef{Model geometry}{\index{model!geometry}
        A model geometry consists of the following data:
        \begin{enumerate}
            \item an effective Klein pair $(\mathfrak{g},\mathfrak{h})$,
            \item a Lie group $H$ such that $\mathrm{Lie}(H)=\mathfrak{h}$, and
            \item a representation $\mathrm{Ad}:H\rightarrow\Aut(\mathfrak{g})$ that restricts to the adjoint representation $\mathrm{Ad}_H:H\rightarrow\Aut(\mathfrak{h})$.
        \end{enumerate}
    }
    \newdef{Local Klein geometry}{
        A local Klein geometry consists of the following data:
        \begin{enumerate}
            \item a Lie group $G$,
            \item a closed subgroup $H\subset G$, and
            \item a subgroup $\Gamma\subset G$ acting by covering transformations on $G/H$ such that the left coset space $\Gamma\backslash G/H$ is connected.
        \end{enumerate}
    }

\subsection{Cartan geometry}

    The definition of a Klein geometry can be rephrased in the language of bundle theory. First, an alternative characterization of Lie groups in terms of the Maurer--Cartan connection is required.
    \begin{adefinition}[Lie group]\index{Lie!group}\index{complete!connection}
        Let $G$ be a smooth manifold and let $\mathfrak{g}$ be a Lie algebra. $G$ is a Lie group, with Lie algebra $\mathfrak{g}$, if it comes equipped with a $\mathfrak{g}$-valued one-form $\omega$ satisfying the following conditions:
        \begin{enumerate}
            \item\textbf{Maurer-Cartan equation}: $\dr\omega + \frac{1}{2}[\omega,\omega]=0$,
            \item\textbf{Soldering}: $\omega$ restricts to an isomorphism on every fibre, and
            \item\textbf{Completeness}: $\omega$ is complete, i.e.~every vector field that maps constantly to $\mathfrak{g}$ is complete.
        \end{enumerate}

        \todo{FIX/COMPLETE THIS PROPERTY}
    \end{adefinition}

    In a similar way, Klein geometries can be characterized as follows.
    \begin{property}
        The bundle $\pi:G\rightarrow G/H$ of a Klein geometry $G/H$ admits a one-form $\omega:TG\rightarrow\mathfrak{g}$ that satisfies the following conditions:
        \begin{itemize}
            \item $\omega$ satisfies the Maurer--Cartan equation,
            \item $\omega$ restricts to an isomorphism on every fibre,
            \item $\omega$ is complete,
            \item $\omega$ is $H$-equivariant: $R_h^*\omega=\mathrm{Ad}(h^{-1})\omega$, and
            \item $\omega$ cancels $\mathfrak{h}$-fundamental vector fields: $\omega(A^\#)=A$ for all $A\in\mathfrak{h}$.
        \end{itemize}
    \end{property}
    The last two conditions show that $\omega$ defines a principal connection one-form, while the first condition states that this connection is flat. In fact, this one-form is exactly the Maurer--Cartan form on $G$, where the last conditions are obtained by restricting to the subgroup $H\subset G$.

    By dropping the flatness and completeness conditions, one obtains the notion of Cartan geometries.
    \newdef{Cartan geometry}{\index{Cartan!geometry}\index{Cartan!connection}
        Consider a principal $H$-bundle $\pi:P\rightarrow M$ and a Lie algebra $\mathfrak{g}$ such that $\mathfrak{h}\leq\mathfrak{g}$ (in general, it is assumed that these form a model geometry). A Cartan geometry is characterized by a one-form $\omega:TP\rightarrow\mathfrak{g}$ satisfying the following conditions:
        \begin{enumerate}
            \item $\omega$ restricts to an isomorphism on every fibre,
            \item $\omega$ is $H$-equivariant, and
            \item $\omega$ cancels $\mathfrak{h}$-fundamental vector fields.
        \end{enumerate}
        The one-form $\omega$ is called the \textbf{Cartan connection}.
    }
    \newdef{Curvature}{\index{curvature}
        By analogy with the Maurer--Cartan condition and the Cartan structure equation (\cref{bundle:cartan_structure_equation}), the curvature of a Cartan connection is defined as follows:
        \begin{gather}
            \Omega := \dr\omega + \frac{1}{2}[\omega\wedge\omega]\,.
        \end{gather}
    }
    \newdef{Torsion}{\index{torsion}
        The torsion of a Cartan connection is defined as the image of its curvature under the projection $\mathfrak{g}\rightarrow\mathfrak{g}/\mathfrak{h}$.
    }

    By restricting to reductive model spaces, an important decomposition of the Cartan connection is obtained.
    \begin{property}
        Consider a Cartan geometry $\pi:P\rightarrow M$ with a reductive model space $(\mathfrak{g},\mathfrak{h})$ and decompose the Cartan connection as $\omega=\omega_{\mathfrak{h}}+\omega_{\mathfrak{m}}$. This decomposition has the following important properties:
        \begin{itemize}
            \item The form $\omega_{\mathfrak{h}}$ defines a principal connection on the Cartan geometry $P$.
            \item The form $\omega_{\mathfrak{m}}$ defines a solder form on $M$.
            \item The decomposition of the associated curvature form $\Omega$ gives the curvature and torsion of the induced principal connection and solder forms respectively.
        \end{itemize}
        Furthermore, the Cartan geometry $\pi:P\rightarrow M$ gives a reduction of the frame bundle $FM$ induced by the solder form $\omega_{\mathfrak{m}}$.
    \end{property}
    
    \todo{COMPLETE}

\section{\texorpdfstring{$\mathcal{D}$-geometry $\clubsuit$}{D-geometry}}

    \newdef{Sheaf of differential operators}{
        Let $M$ be a smooth manifold (or scheme, see \cref{chapter:alggeom}). Denote its structure sheaf by $\mathcal{O}_M$ and denote the sheaf of $\mathcal{O}_M$-algebras of vector fields (interpreted as derivations) on $M$ by $\mathcal{D}_M$:
        \begin{gather}
            \mathcal{D}_M(U) := \bigl\{v\in\End(\mathcal{O}_M(U))\bigm\vert v(fg) = v(f)g + fv(g)\bigr\}\,.
        \end{gather}
    }

    \newdef{$\mathcal{D}_M$-module}{
        An $\mathcal{O}_M$-module equipped with an action of $\mathcal{D}_M$. This is equivalent to a linear map
        \begin{gather}
            \nabla:\mathcal{D}_M\rightarrow\End(\mathcal{O}_M)
        \end{gather}
        satisfying the following properties:
        \begin{enumerate}
            \item\textbf{$\mathcal{O}_M$-linearity}: $\nabla_{fv}\sigma=f\nabla_v\sigma$,
            \item\textbf{Leibniz rule}: $\nabla_v(f\sigma) = v(f)\sigma + f\nabla_v\sigma$, and
            \item\textbf{Flatness}: $\nabla_{[v,w]}\sigma = [\nabla_v,\nabla_w]\sigma$.
        \end{enumerate}
        If $M$ is locally free (\cref{sheaf:locally_free}), i.e.~corresponds to a locally trivial bundle, one obtains the algebraic reformulation of a vector bundle with flat connection.
    }
\chapter{Functional Analysis}\label{chapter:functional}

    The main references for this chapter are \cite{AMP1, AMP2}. For a revision of topological spaces and inner product spaces, see Chapter \ref{chapter:topology} and Section \ref{section:innerproduct}, respectively.

    In this chapter the term ``linear operator'', which was previously reserved for vector space automorphisms, is now used instead of ``linear map''. This is to keep the terminology in sync with the standard literature on Banach spaces and operator spaces. Moreover, in this chapter ``dual space'' will indicate the topological/continuous dual and not just the algebraic/linear dual (unless stated otherwise).

\section{Banach spaces}

    \newdef{Topological vector space}{\index{vector!space}
        \nomenclature[A]{TVS}{topological vector space}
        A vector space for which addition and scalar multiplication are continuous. This is abbreviated as \textbf{TVS}.
    }

    \newdef{Weak topology}{\index{topology!weak}\label{functional:weak_topology}
        The initial topology \ref{topology:initial_topology} on a TVS with respect to its dual, i.e.~a net $\net{v}$ in $V$ converges to $v$ if and only if $\lambda(v_\alpha)\longrightarrow\lambda(v)$ for all $\lambda\in V^*$.
    }
    \newdef{Weak-* topology}{\index{topology!weak-*}\label{functional:weak_star_topology}
        Every TVS admits a canonical embedding into its double dual:
        \begin{gather}
            \iota:V\rightarrow V^{**}:v\mapsto\mathrm{ev}_v\,,
        \end{gather}
        where the evaluation map $\mathrm{ev}_v$ is defined as
        \begin{gather}
            \mathrm{ev}_v:V^*\rightarrow K:\lambda\mapsto\lambda(v).
        \end{gather}
        The weak-* topology on the dual space $V^*$ is defined as the weak topology with respect to the image $\iota(V)\subseteq V^{**}$. Equivalently, it is the topology defined by pointwise convergence of nets.
    }

    \newdef{Norm}{\index{norm}
        Let $V$ be a TVS over a field $K$. A function $\|\cdot\|:V\rightarrow[0,+\infty[$ is called a norm if it satisfies following conditions for all $v,w\in V$:
        \begin{enumerate}
            \item\textbf{Nondegeneracy}: $\|v\|=0\iff v=0$,
            \item\textbf{Homogeneity}: for all scalars $\lambda\in K:\|\lambda v\|=|\lambda|\,\|v\|$, and
            \item\textbf{Triangle equality (subadditivity)}: $\|v+w\|\leq\|v\|+\|w\|$.
        \end{enumerate}
    }
    \begin{remark}[Metric]\index{metric}\index{topology!norm}\index{topology!strong}
        A norm $\|\cdot\|$ induces a metric \ref{metric:metric} by defining $d(v,w):=\|v-w\|$. The metric topology induced in this way is called the \textbf{norm topology} or \textbf{strong topology}.
    \end{remark}

    \begin{property}[Continuity]
        Every linear map $\varphi:V\rightarrow W$ of topological vector spaces with $V$ finite-dimensional is continuous. Moreover, if $V$ is normed, every linear isomorphism $\varphi:V\rightarrow W$ is a homeomorphism.
    \end{property}
    \begin{result}
        Two finite-dimensional normed vector spaces with the same dimension are homeomorphic. It follows that all metrics on a finite-dimensional normed vector space are equivalent.
    \end{result}

    \newdef{Banach space}{\index{Banach!space}\label{functional:banach_space}
        A normed vector space that is complete \ref{metric:complete_space} in the norm topology.
    }

    \begin{property}[Duals]
        The dual of a Banach space is also a Banach space.
    \end{property}

    \newdef{Reflexive (Banach) space}{\index{reflexive}
        A Banach space $V$ for which the canonical inclusion $V\hookrightarrow V^{**}$ is an (isometric) isomorphism.
    }
    \begin{property}
        Every finite-dimensional Banach space is reflexive.
    \end{property}
    \begin{property}
        On a reflexive space, the weak and weak-* topologies coincide.
    \end{property}
    \begin{property}[Weak duals]
        Consider a Banach space $V$. The dual of $(V^*,\tau_{\mathrm{weak}^*})$ is isomorphic to $V$.
    \end{property}

    \begin{theorem}[Open mapping theorem\footnotemark]\index{open!mapping theorem}\index{Banach-Schauder}
        \footnotetext{Sometimes called the \textbf{Banach-Schauder} theorem.}
        Let $f:V\rightarrow W$ be a continuous linear operator between two Banach spaces. If $f$ is surjective, it is also open.
    \end{theorem}

    \begin{theorem}[Banach-Alaoglu\footnotemark]\index{Banach-Alaoglu}
        \footnotetext{Apparently at least 12 different mathematicians should be named in this theorem.}
        The closed unit ball in the dual of a normed space is compact in the weak-* topology.
    \end{theorem}

    \newdef{Bracket}{\index{bracket}\label{functional:bracket}
        Let $X$ be a set and consider a normed subset $(\mathcal{F},\|\cdot\|)$ of $\mathbb{R}^X$. For every two functions $u,l:X\rightarrow\mathbb{R}$, the bracket $[l,u]$ consists of all functions $f\in\mathbb{R}^X$ such that
        \begin{gather}
            \forall x\in X:l(x)\leq f(x)\leq u(x).
        \end{gather}
        An $\varepsilon$-bracket, with $\varepsilon>0$, is a bracket $[l,u]$ such that $\|u-l\|<\varepsilon$. The \textbf{bracketing number} $N_{[\,]}(\varepsilon,\mathcal{F},\|\cdot\|)$ is defined as the least number of $\varepsilon$-brackets needed to cover $\mathcal{F}$.
    }

\section{Hilbert spaces}

    \begin{remark}\index{parallelogram law}\index{polarization!identity}
        Let $V$ be an inner product space \ref{linalgebra:innerproduct}. A norm on $V$ can be induced by the inner product in the following way:
        \begin{gather}
            \label{functional:inner_product_norm}
            \|v\|^2 = \langle v\mid v \rangle.
        \end{gather}
        However, the converse is not true. Not every norm induces an inner product. Only norms that satisfy the \textbf{parallelogram law}
        \begin{gather}
            \label{functional:parallellogram_law}
            \|v+w\|^2 + \|v-w\|^2 = 2(\|v\|^2 + \|w\|^2)
        \end{gather}
        can be used to define an inner product. This inner product can be recovered through the \textbf{polarization identity}:
        \begin{gather}
            \label{functional:polarization_identity}
            4 \langle v\mid w \rangle = \|v+w\|^2 - \|v-w\|^2 + i\left(\|v+iw\|^2 - \|v-iw\|^2\right).
        \end{gather}
    \end{remark}

    \begin{property}[Cauchy-Schwarz inequality]\index{Cauchy-Schwarz}\label{functional:cauchy_schwarz}
        \begin{gather}
            |\langle v\mid w \rangle|\leq\|v\|\,\|w\|\,,
        \end{gather}
        where the equality holds if and only if $v$ and $w$ are linearly dependent.
    \end{property}
    \begin{result}[Triangle inequality]
        The Cauchy-Schwarz inequality can be used to prove the triangle inequality. Together with the properties of an inner product, this implies that an inner product space is indeed a normed space as mentioned in the beginning of this section.
    \end{result}

    \newdef{Hilbert space}{\index{Hilbert!space}\label{functional:hilbert_space}
        A Banach space where the norm is induced by an inner product.
    }

    \begin{example}
        Consider two square-integrable functions $f,g\in L^2([a,b],\mathbb{C})$. As mentioned in Section \ref{section:hilbert_space}, the inner product of $f$ and $g$ is defined as follows:
        \begin{gather}
            \label{functional:inner_product_L2}
            \langle f\mid g\rangle = \int_a^b\overline{f(x)}g(x)\,dx.
        \end{gather}
        It is possible to generalize this inner product with respect to a weight function $\phi\in L^2([a,b],\mathbb{C})$:
        \begin{gather}
            \label{functional:weighted_inner_product}
            \langle f\mid g \rangle_\phi := \int_a^b\overline{f(x)}g(x)\phi(x)\,dx.
        \end{gather}
    \end{example}

    \begin{formula}[Pythagoras]\index{Pythagoras}\label{functional:pythagorean_theorem}
        In an inner product space the triangle equality reduces to the well-known Pythagorean theorem for orthogonal vectors:
        \begin{gather}
            \langle v\mid w \rangle=0\implies\|v+w\|^2 = \|v\|^2 + \|w\|^2.
        \end{gather}
        This formula can be extended to any set of orthogonal vectors $v_1,\ldots,v_n$ as follows:
        \begin{gather}
            \left\|\sum_{i=1}^nv_i\right\|^2 = \sum_{i=1}^n\|v_i\|^2.
        \end{gather}
    \end{formula}

    \begin{theorem}[Riesz representation theorem]\index{Riesz!representation theorem}\label{functional:riesz}
        Let $\mathcal{H}$ be a Hilbert space. For every continuous linear functional $\rho\in\mathcal{H}^*$ there exists a unique element $v_0\in\mathcal{H}$ such that
        \begin{gather}
            \rho(h) = \langle v_0\mid h \rangle
        \end{gather}
        for all $h\in\mathcal{H}$. This implies that $\mathcal{H}$ and $\mathcal{H}^*$ are isometrically isomorphic.\footnote{Anti-isomorphic in the convention with conjugate linearity in the second argument.} Furthermore, the operator norm of $\rho$ is equal to the norm of $v_0$.
    \end{theorem}
    \begin{remark}
        This theorem justifies the bra-ket notation used in quantum mechanics, where one associates to every \textit{ket} $\lvert\psi\rangle\in\mathcal{H}$ a \textit{bra} $\langle\psi\rvert\in\mathcal{H}^*$.
    \end{remark}

    \begin{remark}[Relation to Riesz-Markov theorem]
        By the Riesz-Markov theorem \ref{distributions:riesz_markov} every continuous functional on $C(\widehat{X})$, where $X$ is locally compact, can be written as the integration againt some Radon measure. By using the theorem that every Hilbert space is isomorphic to some function space $L^2(X,\mu)$ one can see that Riesz's representation theorem is very similar.
    \end{remark}

\subsection{Generalized Fourier series}

    \begin{property}[Bessel's inequality]\index{Bessel!inequality}
        Let $\mathcal{H}$ be a Hilbert space. The following equality holds for all orthonormal vectors $v_1,\ldots,v_n\in\mathcal{H}$ and scalars $\lambda_1,\ldots,\lambda_n\in\mathbb{C}$:
        \begin{gather}
            \left\|v - \sum_{i=1}^n\lambda_iv_i\right\|^2 = \|v\|^2 - \sum_{i=1}^n|\langle v\mid v_i \rangle|^2 + \sum_{i=1}^n|\langle v\mid v_i \rangle - \lambda_i|^2.
        \end{gather}
        This expression is minimized when the last term vanishes. This leads to Bessel's inequality
        \begin{gather}
            \label{functional:bessels_inequality}
            \sum_{i=1}^n|\langle v\mid v_i \rangle|^2\leq\|v\|^2\,,
        \end{gather}
        together with the property that the optimal choice in the generalized Fourier series for $v$ is obtained by taking the coefficients to be the projections $\lambda_i:=\langle v\mid v_i \rangle$.
    \end{property}
    \begin{result}\index{Fourier!generalized series}
        The sum in \eqref{functional:bessels_inequality} is bounded for all $n$, so the series $\sum_{i=1}^\infty|\langle v\mid v_i \rangle|^2$ converges for all $v$. This implies that the sequence $(\langle v\mid v_n\rangle)_{n\in\mathbb{N}}$ belongs to $l^2$.
    \end{result}

    \begin{theorem}
        Consider a Hilbert space $\mathcal{H}$. Let $\seq{v}$ be an orthonormal sequence in $\mathcal{H}$ and let $\seq{\lambda}$ be a sequence in $\mathbb{C}$. The expansion $\sum_{i=1}^\infty\lambda_iv_i$ converges in $\mathcal{H}$ if and only if $\seq{\lambda}\in l^2$. Furthermore, the expansion satisfies the following equality:
        \begin{gather}
            \left\|\sum_{i=1}^\infty\lambda_iv_i\right\|^2 = \sum_{i=1}^\infty|\lambda_i|^2.
        \end{gather}
        Bessel's inequality implies that the sequence $(\langle v\mid v_n \rangle)_{n\in\mathbb{N}}$ belongs to $l^2$, so the generalized Fourier series of $v\in\mathcal{H}$ converges in $\mathcal{H}$.
    \end{theorem}
    \begin{remark}
        Although the convergence of the generalized Fourier series of $v\in\mathcal{H}$ can be established using the previous theorem, it does not follow that the expansion converges to $v$ itself. One can merely say that the Fourier expansion is the best approximation of $v$ with respect to the norm on $\mathcal{H}$.
    \end{remark}

    \newdef{Complete set}{\index{complete!set}\index{Hilbert!basis}
        Let $\{e_i\}_{i\in I}$ be a set of orthonormal vectors in an inner product space $V$. This set is said to be complete if every vector $v\in V$ can be expressed as follows:
        \begin{gather}
            v = \sum_{i\in I}\langle e_i\mid v \rangle e_i.
        \end{gather}
        This is also sometimes called an \textbf{orthonormal basis} or \textbf{Hilbert basis}. Note that it is not necessarily a (Hamel) basis, since the linear combination does not have to be finite.
    }
    \begin{adefinition}
        A complete set of orthonormal vectors in a Hilbert space $\mathcal{H}$ is a set $S\subset\mathcal{H}$ such that one cannot add another nonzero vector $w$ to it satisfying
        \begin{gather}
            \forall v_i\in S:\langle v_i\mid w \rangle = 0.
        \end{gather}
    \end{adefinition}

    \begin{theorem}[Parceval]\index{Parceval}
        Let $\seq{v}$ be a complete sequence in a Hilbert space $\mathcal{H}$. Every vector $v\in\mathcal{H}$ has a unique Fourier series representation $\sum_{i=1}^\infty\lambda_iv_i$, where the Fourier coefficients $\seq{\lambda}$ belong to $l^2$. Conversely, if Bessel's inequality becomes an equality for every $v\in\mathcal{H}$, the sequence $\seq{v}$ is complete.
    \end{theorem}

\subsection{Orthogonality and projections}

    \begin{property}
        Let $S$ be a subset (not necessarily a subspace) of a Hilbert space $\mathcal{H}$. The orthogonal complement $S^\perp$ is closed in $\mathcal{H}$.
    \end{property}
    \begin{result}
        The previous property implies that the orthogonal complemement of some arbitrary subset of a Hilbert space is a Hilbert space itself.
    \end{result}

    \begin{theorem}[Projection theorem]\index{projection!theorem}\label{functional:projection_theorem}
        Let $H$ be a Hilbert space and $S\leq H$ a complete subspace. For every $v\in H$ there exists a unique $v'\in S$ such that $v-v'$ is orthogonal to every $w\in S$, i.e $v-v'\in S^\perp$.
    \end{theorem}
    \begin{remark}
        An equivalent definition for this projection is the vector $v'$ satisfying
        \begin{gather}
            \|v-v'\| = \inf\{\|v-w\|\mid w\in S\}.
        \end{gather}
        It is often denoted by $\proj_S(v)$.
    \end{remark}
    \begin{result}
        It follows that given a complete (or closed) subspace $S$, the Hilbert space $\mathcal{H}$ can be decomposed as $\mathcal{H}=S\oplus S^\perp$.
    \end{result}

    \newdef{Trace}{\index{trace}\label{functional:trace}
        Let $\mathcal{H}$ be a Hilbert space with orthonormal basis $\{e_i\}_{i\in I}$. Given a bounded linear operator $S\in\mathcal{B}(\mathcal{H})$, one defines its trace as follows:
        \begin{gather}
            \tr(S) := \sum_{i\in I}\langle e_i\mid Se_i \rangle.
        \end{gather}
    }

\subsection{Separable Hilbert spaces}

    The definition of separable spaces in the sense of point-set topology is given in \ref{topology:separable}. An equivalent definition for Hilbert spaces is the following one (provided that one accepts Zorn's lemma \ref{set:zorns_lemma}):
    \newadef{Separable (Hilbert) space}{\index{separable}
        A Hilbert space that contains a Hilbert basis.
    }
    \begin{example}[Finite dimensions]
        By the Gram-Schmidt method it follows that every finite-dimensional Hilbert space is separable.
    \end{example}

    The following theorem shows that (up to an isomorphism) there are only two distinct types of separable Hilbert spaces:
    \begin{theorem}
        Let $\mathcal{H}$ be separable. If $\mathcal{H}$ is $n$-dimensional, it is isometrically isomorphic to $\mathbb{C}^n$. If $\mathcal{H}$ is infinite-dimensional, it is isometrically isomorphic to $l^2$, the space of square-summable sequences.
    \end{theorem}

    \begin{property}
        Every orthogonal subset of a separable Hilbert space is countable.
    \end{property}

\section{Seminorms}\index{semi-!norm}

    \newdef{Seminorm}{
        Let $V$ be a $K$-vector space, where $K$ is a normed field. A function $p:V\rightarrow[0,+\infty[$ is called a seminorm if it satisfies the following conditions:
        \begin{enumerate}
            \item\textbf{Homogeneity}: $p(\lambda v)=|\lambda|\,p(v)$ for all scalars $\lambda\in K$ and $v\in V$.
            \item\textbf{Triangle equality (subadditivity)}: $p(v+w)\leq p(v)+p(w)$ for all $v,w\in V$.
        \end{enumerate}
    }

    \begin{theorem}[Hahn-Banach]\index{Hahn-Banach}\label{functional:hahn_banach}
        Let $V$ be a TVS equipped with a seminorm $p$. If $f$ is a continuous linear functional on $V$ such that $|f(w)|\leq p(w)$ on a subspace $W\leq V$, there exists a linear extension $F$ of $f$ to $V$ such that
        \begin{gather}
            |F(V)|\leq p(v)
        \end{gather}
        for all $v\in V$.
    \end{theorem}

\subsection{Topology}

    In this subsection $\mathscr{P}$ denotes a family of seminorms defined on a TVS $V$ with index family $I$.

    \newdef{$\mathscr{P}$-open ball}{\index{ball}
        A $\mathscr{P}$-open ball centered on $v_0$ is a subset $W\subseteq V$ such that all points $w\in W$ satisfy the following condition for a finite number of seminorms $p_i\in\mathscr{P}$:
        \begin{gather}
            p_i(w-v_0)\leq\varepsilon_i\,,
        \end{gather}
        where $\varepsilon_i > 0$.
    }

    \begin{property}
        The set of $\mathscr{P}$-open balls generates a topology on $V$. This topology is often called the \textbf{$\mathscr{P}$-topology}.
    \end{property}

    \newdef{Separated family}{
        A family of seminorms $\mathscr{P}$ is said to be separated if for every point $v\in V,v\neq0$ there exists a seminorm $p\in\mathscr{P}$ such that $p(v)\neq0$. If $\mathscr{P}$ is separated, then $\sum_{i\in I}p_i$ is a norm.
    }
    \begin{property}\label{functional:separated_metric}
        A family of seminorms $\mathcal{P}$ is separated if and only if it generates a Hausdorff topology on $V$. Furthermore, the topology is metrizable if and only if $\mathcal{P}$ is countable. The metric, which is translation-invariant, is given by
        \begin{gather}
            d(v,w) := \sum_{i\in I}\frac{1}{2^i}\frac{p_i(v-w)}{1 + p_i(v-w)}.
        \end{gather}
    \end{property}

    Although the Hahn-Banach theorem \ref{functional:hahn_banach} does not imply that the linear extension is unique, one can refine the statement in the case of dense subspaces:
    \begin{result}
        Let $V$ be a TVS with a $\mathscr{P}$-topology and let $W$ be a dense subspace. If $f$ is a linear form on $W$, continuous in the subspace topology, there exists a unique linear extension to $V$.
    \end{result}

\subsection{Locally convex spaces}

    \newdef{Locally convex space}{\index{convex}\index{cone}\label{functional:locally_convex}
        Let $V$ be a TVS.
        \begin{itemize}
            \item A \textbf{cone} is a subset $U\subseteq V$ such that the line segment connecting any vector to the origin lies in $U$.
            \item A subset $U\subseteq V$ is said to be \textbf{balanced} if for every vector $v\in U$ the scalar multiples $\lambda v$, with $|\lambda|\leq 1$, also lie in $U$. Such a subset is sometimes also called a \textbf{circled cone}.
            \item An \textbf{absolutely convex} set is a balanced convex set. Equivalently, this is a subset closed under linear combinations where the absolute values of the coefficients sum at most to 1.
            \item A subset $U\subseteq V$ is said to be \textbf{absorbent} if the union of all sets $\lambda U$, where $\lambda$ ranges over the base field, equals the total space.
        \end{itemize}
        A locally convex space is a topological vector space where the origin admits a local base of convex sets. Sometimes these sets are also required to be balanced and absolutely convex. However, it can be shown that this is a mere property.
    }
    Using the notion of seminorms one can restate this definition as follows:
    \newadef{Locally convex space}{\label{functional:locally_convex_seminorm}
        A topological vector space is locally convex if its topology is generated by a family of seminorms.
    }

    The following example of locally convex spaces is important in functional analysis:
    \newdef{Fr\'echet space}{\index{Fr\'echet!space}\label{functional:frechet_space}
        A locally convex topological vector space that admits a complete translation-invariant metric.
    }
    By Property \ref{functional:separated_metric} there exists an equivalent formulation:
    \begin{adefinition}[Fr\'echet space]
        A topological vector space that admits a complete metric topology induced by a countable separated family of seminorms.
    \end{adefinition}

    Locally convex topological vector spaces are important in functional analysis because they are one of the most general types of spaces that lend themselves to the definition of differentiation. A first step in this direction is the following generalization of the (directional) derivative:
    \newdef{G\^ateaux derivative}{\index{smooth!function}\index{derivative!G\^ateaux}\index{derivative!Michal-Bastiani}\label{functional:gateaux}
        The G\^ateaux differential of a continuous map of locally convex spaces $f:V\rightarrow W$ is defined as follows:
        \begin{gather}
            \dr f(v;h) := \lim_{t\rightarrow0}\frac{f(v+th) - f(v)}{t}=\left.\deriv{}{t}f(v+th)\right|_{t=0}.
        \end{gather}
        If this limit exists for all $h\in V$, the function is said to be \textbf{G\^ateaux differentiable} at $v\in V$. Moreover, if it is also continuous in both arguments, it is said to be of class $C^1$. By iterating this construction one can define $C^k$- and even $C^\infty$-maps:
        \begin{gather}
            \dr^{(k)}\!f(v;h_1\otimes\cdots\otimes h_k) := \left.\mderiv{k}{}{t}f(v+th_1+\cdots+th_k)\right|_{t=0}.
        \end{gather}
    }
    Now, it should be noted that the map $\dr f(v;-)$ is not necessarily linear. If it is linear, the function $\delta_vf:V\rightarrow W:h\mapsto\dr f(v;h)$ is called the \textbf{G\^ateaux derivative} of $f$ at $v$. It can be shown that the G\^ateaux differential of $C^1$-functions is always linear and, hence, defines a G\^ateaux derivative. In fact, this notion of differentiability is often called \textbf{(Michal-)Bastiani differentiability}.

    \begin{formula}[Fundamental theorem of calculus]\index{fundamental theorem!of calculus}\index{integral!Gelfand-Pettis}
        If $f\in C^1(V,W)$, then
        \begin{gather}
            f(v+h) = f(v)+\int_0^1\dr f(v+th;h)\,dt\,,
        \end{gather}
        where the integral is understood in the following sense. Consider a function $f:(X,\Sigma,\mu)\rightarrow V$ from a measure space to a vector space $V$. If for all $\varphi\in V^*$ the pairing $\varphi\circ f$ is (Lebesgue) integrable and there exists for all $A\in\Sigma$ a vector $v_A\in V$ such that
        \begin{gather}
            \langle\varphi,e_A\rangle = \int_A\varphi\circ f\,d\mu\,,
        \end{gather}
        then $f$ is said to be \textbf{Gelfand-Pettis integrable} and $v_A$ is called the \textbf{Gelfand-Pettis integral} of $f$ over $A$.
    \end{formula}

    One can also introduce an alternative notion of differentiability:
    \newdef{Fr\'echet derivative}{\index{Fr\'echet!derivative}\label{functional:frechet}
        Let $f:V\rightarrow W$ be a function of normed spaces. It is said to be \textbf{Fr\'echet differentiable} at $v\in V$ if there exists a bounded linear operator $\mathrm{D}f_v$ such that
        \begin{gather}
            \lim_{\|h\|\rightarrow0}\frac{\|f(v+h)-f(v)+\mathrm{D}f_v(h)\|}{\|h\|} = 0.
        \end{gather}
        If the linear operator $\mathrm{D}f$ exists, it is called the Fr\'echet derivative of $f$ at $v$. If $f$ is (Fr\'echet) differentiable at any point in $V$ and if the map $V\rightarrow\mathcal{B}(V,W):v\mapsto\mathrm{D}f_v$ is continuous, then $f$ is said to be of class $C^1$.
    }

    The relation between G\^ateaux and Fr\'echet derivatives is clarified by the following property:
    \begin{property}
        If a function between normed spaces has a continuous and linear G\^ateaux differential (i.e.~if it has a G\^ateaux derivative), it is also Fr\'echet differentiable. Furthermore, the G\^ateaux derivative and Fr\'echet derivative coincide.
    \end{property}

    Although one can extend functional analysis to Fr\'echet spaces (or even locally convex spaces), they are less well-behaved than Banach spaces:
    \begin{property}
        The dual of a Fr\'echet space $V$ is Fr\'echet if and only if $V$ is Banach (and, hence, $V^*$ will also be Banach). Furthermore, the space $\mathcal{L}(V,W)$ of linear maps between Fr\'echet spaces is Fr\'echet if and only if $W$ is Banach.
    \end{property}

    \begin{theorem}[Krein-Milman]\index{Krein-Milman}\label{functional:krein_milman}
        Every compact, convex subset of a locally convex Hausdorff space is equal to the convex hull of its extreme points.
    \end{theorem}
    This theorem can be extended as follows:
    \begin{theorem}[Choquet]\index{Choquet}\label{functional:choquet}
        For every convex, compact subset $C$ of a normed vector space there exists an assignment
        \begin{gather}
            \mu:C\rightarrow\mathbb{P}\big(\mathrm{Extr}(C)\big):c\mapsto\mu_c
        \end{gather}
        such that
        \begin{gather}
            f(c) = \int_{\mathrm{Extr}(C)}f\,d\mu_c
        \end{gather}
        for all affine functions $f:C\rightarrow\mathbb{C}$.
    \end{theorem}
    \begin{remark}
        The extension of Choquet's theorem to locally convex topological vector spaces is called the \textbf{Choquet-Bishop-de Leeuw theorem}.
    \end{remark}

    \newdef{Strong topology}{\index{topology!strong|seealso{polar topology}}\index{topology!polar}
        Let $V$ be a TVS. The strong topology (or \textbf{topology of uniform convergence on bounded sets}) on $V^*$ is the locally convex topology defined by the seminorms
        \begin{gather}
            p_B(\lambda) := \sup_{v\in B}|\lambda(v)|\,,
        \end{gather}
        where $B$ is a bounded set of $V$. This is an example of a \textit{polar topology}. A dual space equipped with the strong topology is often called the \textbf{strong dual}.
    }

\subsection{Tensor products}\index{tensor product!of topological vector spaces}

    When moving from finite-dimensional vector spaces to general topological vector spaces, the algebraic tensor product from Section \ref{section:tensors} does not behave in the way one would expect it to. For example, the (algebraic) tensor product of the smooth algebras $C^\infty(\mathbb{R}^m)$ and $C^\infty(\mathbb{R}^n)$ only injects into $C^\infty(\mathbb{R}^{m+n})$, i.e.~not all bivariate smooth functions can be written as a finite sum of products of univariate smooth functions. In this section this will be resolved.

    \newdef{Tensor product of Hilbert spaces}{
        The algebraic tensor product of two Hilbert spaces $V,W$ can be equipped with an inner product defined on outer products as
        \begin{gather}
            \langle v_1\otimes w_1\mid v_2\otimes w_2 \rangle_{V\otimes W} := \langle v_1\mid v_2 \rangle_V\,\langle w_1\mid w_2 \rangle_W
        \end{gather}
        and extended to all of $V\otimes W$ by linearity. The Hilbert space tensor product $V\mathop{\widehat{\otimes}}W$, often denoted by $V\otimes_\sigma W$, is then defined as the completion of $V\otimes W$ with respect to this inner product.
    }

    \newdef{Tensor product of Banach spaces}{
        Contrary to the case of Hilbert spaces, the norms on two Banach spaces $V$ and $W$ do not induce a unique natural norm on $V\otimes W$. Two common choices are the following ones:
        \begin{gather}
            \|x\|_{\proj} := \inf\left\{\sum_{i=1}^n\|a_i\|\|b_i\|\,\middle\vert\,x=\sum_{i=1}^na_i\otimes b_i\right\}
        \end{gather}
        and
        \begin{gather}
            \|x\|_\text{inj} := \sup\Big\{|(\mu\otimes\nu)(x)|\,\Big\vert\,\mu\in V^*,\nu\in W^*:\|\mu\|=\|\nu\|=1\Big\}.
        \end{gather}
        These two norms are called the \textbf{projective} and \textbf{injective} norms, respectively. Accordingly, the completions $V\otimes_\pi W$ and $V\otimes_\varepsilon W$ of the algebraic tensor product $V\otimes W$ with respect to these norms are called the \textbf{projective} and \textbf{injective} tensor products.
    }

    \newdef{Tensor products of locally convex spaces}{
        Let $V,W$ be locally convex spaces. Definition \ref{functional:locally_convex_seminorm} gives rise to a family of projective seminorms as in the definition above. These define the projective tensor products $V\otimes_\pi W$. Note that in general the projective tensor product is not complete, even when both $V$ and $W$ are.\footnote{In fact, if both $V$ and $W$ are infinite-dimensional Banach spaces, their tensor product (in this sense) will never be complete.} The completion is denoted by $V\widehat{\otimes}_\pi W$.

        The injective tensor product can be extended to locally convex spaces as follows. Equip the dual $V'$ with the finest locally convex topology that coincides with the weak topology on equicontinuous sets \ref{metric:equicontinuity}. The, equip the space of continuous linear maps $L_\text{cont}(V^*,W)$ with the topology of uniform convergence on compact equicontinuous sets. $V\otimes W$ with the induced topology, as a subset of $L_\text{cont}(V^*,W)$, is called the injective tensor product $V\otimes_\varepsilon W$.
    }
    \begin{adefinition}
        Let $V,W$ be locally convex spaces. The projective tensor product $V\otimes_\pi W$ carries the finest locally convex topology with respect to the canonical injection $V\times W\rightarrow V\otimes W:(v,w)\mapsto v\otimes w$.
    \end{adefinition}

    \newdef{Nuclear space}{\index{nuclear!space}
        A locally convex space such that the injective and projective tensor products with any other locally convex space are isomorphic.
    }

\subsection{Measure theory}

    \newdef{Distribution}{\index{distribution}
        Let $V$ be locally convex vector space. A distribution on $V$ is an equivalence class of linear maps from $V^*$ to the measurable functions on a probability space $(\Omega,\Sigma,P)$, where two maps are identified if for any finite tuple of vectors the joint distributions of their images are equal.
    }

    The following remark gives an analogue of the Riesz-Markov theorem \ref{distributions:riesz_markov}:
    \begin{remark}
        For finite-dimensional spaces the distributions are in a one-to-one correspondence with the regular Borel measures.
    \end{remark}

    ?? COMPLETE ??

\section{Operators}
\subsection{Operator topologies}\index{operator!topology}

    \newdef{Weak operator topology}{
        The topology generated by the seminorms $\big\{T\rightarrow |\lambda(Tv)|\,\big\vert\,v\in V,\lambda\in V^*\big\}$. A net of linear operators $\net{T}$ on a space $V$ converges to a linear operator $T$ in the weak (operator) topology if $T_\alpha x\longrightarrow Tx$ for all $x$ in the weak topology.

        In the case of Hilbert spaces one can simplify the above definition using Riesz's representation theorem \ref{functional:riesz}. The weak operator topology on a Hilbert space is generated by the seminorms $\big\{T\mapsto|\langle Tv\mid w \rangle|\,\big\vert\,v,w\in\mathcal{H}\big\}$.
    }

    \newdef{Strong operator topology}{
        The topology generated by the seminorms $\big\{T\rightarrow\|Tv\|\,\big\vert\,v\in V\big\}$. A net of linear operators $\seq{T}$ on a space $V$ converges to a linear operator $T$ in the strong (operator) topology if $T_\alpha v\longrightarrow Tv$ for all $v$ in the norm (strong) topology.
    }

    \newdef{Operator norm}{\index{norm!operator}
        The operator norm of $L$ is defined as follows:
        \begin{gather}
            \|L\|_\text{op} = \inf\big\{M\in\mathbb{R}\,\big\vert\,\forall v\in V:\|Lv\|_W \leq M\|v\|_V\big\}.
        \end{gather}
        Equivalent definitions of the operator norm are:
        \begin{gather}
            \|L\|_\text{op} = \sup_{\|v\|\leq1}\|L(v)\| = \sup_{\|v\|=1}\|L(v)\| = \sup_{v\neq0}\frac{\|L(v)\|}{\|v\|}.
        \end{gather}
    }

    \newdef{Norm topology\footnotemark}{\index{topology!norm}
        \footnotetext{Also called the \textbf{uniform (operator) topology}.}
        A sequence of linear operators $\seq{T}$ on a space $V$ converges to a linear operator $T$ in the norm topology if the sequence $(\|T_n-T\|)_{n\in\mathbb{N}}$ converges to 0. (Sequences suffice since the norm topology is metrizable and, therefore, sequential by Property \ref{topology:first_countable_sequential}.)
    }

\subsection{Bounded operators}

    \newdef{Bounded operator}{\index{bounded!operator}\label{functional:bounded_operator}
        Let $L:V\rightarrow W$ be a linear operator between two normed spaces. The linear operator is said to be bounded if it satisfies
        \begin{gather}
            \|L\|_\text{op}<+\infty.
        \end{gather}
    }
    \begin{notation}
        \nomenclature[S_BVW]{$\mathcal{B}(V,W)$}{space of bounded linear maps from the space $V$ to the space $W$}
        The space of bounded linear operators from $V$ to $W$ is denoted by $\mathcal{B}(V,W)$.
    \end{notation}
    \begin{property}
        If $V$ is a Banach space, $\mathcal{B}(V)$ is also a Banach space.
    \end{property}

    The following property reduces the problem of continuity to that of boundedness (or vice versa):
    \begin{property}\label{functional:bounded_continuous}
        Consider a linear operator $f\in\mathcal{L}(V, W)$. The following statements are equivalent:
        \begin{itemize}
            \item $f$ is bounded.
            \item $f$ is continuous at 0.
            \item $f$ is continuous on $V$.
            \item $f$ is uniformly continuous.
            \item $f$ maps bounded sets to bounded sets.
        \end{itemize}
    \end{property}

    \begin{property}[Bounded eigenvalues]
        Let $A$ be a bounded linear operator. The eigenvalues of $A$ are bounded by its operator norm. Furthermore, every bounded linear operator on a Banach space has at least one eigenvalue.
    \end{property}

    \begin{property}[BLT theorem\footnotemark]
        \footnotetext{BLT stands for ''bounded linear transformation''.}
        Consider a bounded linear operator $f:X\rightarrow W$, where $X$ is a dense subset of a normed space $V$ and $W$ is a Banach space. There exists a unique extension $F:V\rightarrow W$ such that $\|f\|_\text{op} = \|F\|_\text{op}$.
    \end{property}

    \newdef{Schatten class operator}{\index{Schatten class}\label{functional:schatten_class}
        Consider the space of bounded linear operators on a Hilbert space $\mathcal{H}$. The \textbf{Schatten p-norm} is defined as
        \begin{gather}
            \|T\|_p = \tr\left(\sqrt{T^*T}^{\,p}\right)^{1/p}.
        \end{gather}
        Linear operators for which this norm is finite constitute the $p^{th}$ Schatten class $\mathcal{I}_p$.
    }
    \begin{property}
        The Schatten classes are Banach spaces with respect to the associated Schatten norms.
    \end{property}

    \begin{example}[Trace class operator]\index{trace!class}
        The space of trace class operators on a Hilbert space $\mathcal{H}$ is defined as follows:
        \begin{gather}
            \mathcal{B}_1(\mathcal{H}) := \{S\in\mathcal{B}(\mathcal{H})\mid\tr(|S|)<+\infty\}\,,
        \end{gather}
        where the trace functional was defined in \ref{functional:trace} and $|S|:=\sqrt{S^*S}$.
    \end{example}
    The following theorem can be seen as the analogue of Riesz's theorem for trace class operators:
    \begin{property}
        For every bounded linear functional $\rho$ on the space of trace class operators $\mathcal{B}_1(\mathcal{H})$, there exists a unique bounded linear operator $T\in\mathcal{B}(\mathcal{H})$ such that
        \begin{gather}
            \rho(S) = \tr(ST)
        \end{gather}
        for all $S\in\mathcal{B}_1(\mathcal{H})$. This implies that $\mathcal{B}^*_1(\mathcal{H})$ and $\mathcal{B}(\mathcal{H})$ are isometrically equivalent.
    \end{property}

    The previous property allows for the following definition:
    \newdef{Weak-* operator topology}{\index{topology!$\sigma$-weak}\index{topology!operator}\label{functional:sigma_weak_topology}
        The weak-* topology on $\mathcal{B}(\mathcal{H})$ with respect to the trace-class operators $\mathcal{B}_1(\mathcal{H})$. This is also called the $\sigma$-weak topology on $\mathcal{B}(\mathcal{H})$.
    }

    \begin{example}[Hilbert-Schmidt operator]\index{Hilbert-Schmidt!operator}\label{functional:hilbert_schmidt}
        Consider the Hilbert-Schmidt norm $\|\cdot\|_2$ from Definition \ref{linalgebra:hilbert_schmidt_norm}. A linear operator $T\in\mathcal{B}(\mathcal{H})$ is said to be a Hilbert-Schmidt operator if it satisfies
        \begin{gather}
            \|T\|_2<\infty.
        \end{gather}
        This space is closed under taking adjoints.
    \end{example}

    A more general, but still well-behaved, class of linear operators is the space of closed operators:
    \newdef{Closed operator}{\index{closed!operator}
        A linear operator $f:V\rightarrow W$ such that for every sequence $\seq{v}$ in $\dom(f)$ converging to $v\in V$, where $f(v_n)$ converges to $w\in W$, one finds that $v\in\dom(f)$ and $f(v)=w$.

        Equivalently, one can define a closed linear operator as a linear operator for which its graph is a closed subset in the direct sum $V\oplus W$.
    }
    \newdef{Closure}{\index{closure}\label{functional:closure}
        Let $f:V\rightarrow W$ be a linear operator. Its closure (if it exists) is the closed linear operator $\overline{f}$ such that the graph of $\overline{f}$ is the closure of the graph of $f$ in $V\oplus W$.
    }

    \begin{theorem}[Closed graph theorem]\index{closed!graph theorem}
        A linear operator on a Banach space is closed if and only if it is bounded.
    \end{theorem}

\subsection{Self-adjoint operators}

    There is a multitude of different notions available in the literature that try to indicate in what sense a linear operator is related to its adjoint (not everyone agrees on the definitions). Here, an overview is given in the case of Hilbert spaces where all linear operators are allowed to be unbounded.

    Definition \ref{linalgebra:adjoint_operator} for finite-dimensional spaces can be generalized as follows:
    \newdef{Adjoint}{\index{adjoint!Hermitian}
        Let $A$ be a linear operator on a Hilbert space $\mathcal{H}$. A linear operator $A^\dag$ is said to be the (Hermitian) adjoint of $A$ if the following conditions are satisfied:
        \begin{enumerate}
            \item $\langle v\mid Aw \rangle = \langle A^\dag v\mid w \rangle$ for all $v\in\dom(A^\dag)$ and $w\in\dom(A)$.
            \item Every other linear operator $B$ satisfying this property is a restriction of $A^\dag$ (i.e.~the domain of $A^*$ is maximal with respect to the above property).
        \end{enumerate}
    }
    \begin{property}
        Let $A$ be a bounded linear operator. Its adjoint is also bounded and $\|A\|_\text{op} = \|A^\dag\|_\text{op}$.
    \end{property}

    \newdef{Symmetric operator}{\index{symmetric!operator}
        A linear operator $A$ on a Hilbert space $\mathcal{H}$ such that $\dom(A)\subseteq\dom(A^\dag)$ and $A=A^\dag|_{\dom(A)}$.
    }
    \newdef{Self-adjoint operator}{\index{self-adjoint}
        A linear operator $A$ on a Hilbert space $\mathcal{H}$ such that $\dom(A)$ is dense in $\mathcal{H}$ and $A=A^\dag$.
    }

    The notion of Hermitian operator is the one where almost nobody agrees upon its definition. Here the definition from \cite{nlab} is chosen:
    \newdef{Hermitian operator}{\index{Hermitian!operator}\label{functional:hermitian}
        A bounded symmetric operator.
    }

    \begin{theorem}[Hellinger-Toeplitz]\index{Hellinger-Toeplitz}
        A self-adjoint operator on a Hilbert space $\mathcal{H}$ is bounded if and only if its domain is all of $\mathcal{H}$.
    \end{theorem}

    \begin{theorem}[Stone]\index{Stone}\label{functional:stone}
        Consider a strongly continuous unitary one-parameter group, i.e.~a family of unitary operators $U:\mathbb{R}\rightarrow\mathrm{U}(\mathcal{H})$ such that
        \begin{itemize}
            \item $U$ is continuous in the strong operator topology: \[\lim_{t\rightarrow t_0}U(t)x=U(t_0)x\] for all $t_0\in\mathbb{R}, x\in\mathcal{H}$.
            \item $U$ forms a one-parameter group in the sense of Definition \ref{lie:one_parameter_subgroup}.
        \end{itemize}
        There exists a self-adjoint operator $A$ such that $U(t)=e^{itA}$. Furthermore, the linear operator $A$ is bounded if and only if $U$ is continuous in the norm topology.
    \end{theorem}
    \newdef{Generator}{\index{generator}
        The linear operator $A$ is called the (infinitesimal) generator of the family $U$. It can be obtained through a formal derivative:
        \begin{gather}
            A = \left.\deriv{U(t)}{t}\right|_{t=0}.
        \end{gather}
    }

\subsection{Compact operators}

    \newdef{Compact operator}{\index{compact!operator}\label{functional:compact_operator}
        Let $V,W$ be Banach spaces. A linear operator $A:V\rightarrow W$ is said to be compact if the image of any bounded set in $V$ is relatively compact \ref{topology:relatively_compact}.
    }

    \newadef{Compact operator}{
        Let $V,W$ be Banach spaces. A linear operator $A:V\rightarrow W$ is compact if for every bounded sequence $\seq{v}$ in $V$ the sequence $\seq{Av}\subset W$ has a convergent subsequence.
    }

    \begin{notation}
        \nomenclature[S_boundcompact]{$\mathcal{B}_0(V,W)$}{space of compact bounded operators between the Banach spaces $V$ and $W$}
        The space of compact bounded linear operators between Banach spaces $V,W$ is denoted by $\mathcal{B}_0(V,W)$. If $V=W$, this is abbreviated as $\mathcal{B}_0(V)$ as usual.
    \end{notation}
    \begin{property}
        $\mathcal{B}_0(V)$ is a two-sided ideal in the (Banach) algebra $\mathcal{B}(V)$.
    \end{property}

    \begin{property}[Finite-rank operators]
        All finite-rank operators are compact. In fact, the space of compact operators is the norm closure of that of finite-rank operators.
    \end{property}

    \begin{property}
        Every compact operator is bounded.
    \end{property}
    \begin{result}
        Every linear map between finite-dimensional Banach spaces is bounded.
    \end{result}

    \begin{property}
        If $A$ is a compact self-adjoint operator on a Hilbert space, then $-\|A\|$ or $\|A\|$ are an eigenvalue of $A$. Furthermore, the set of nonzero eigenvalues is either finite or converges to 0.
    \end{property}

    \newdef{Calkin algebra}{\index{Calkin algebra}
        Consider the algebra $\mathcal{B}(V)$ of bounded linear operators on $V$ together with its two-sided ideal $\mathcal{B}_0(V)$ of compact operators. The quotient algebra $\mathcal{Q}(V) = \mathcal{B}(V)/\mathcal{B}_0(V)$ is called the Calkin algebra of $V$.
    }

    \newdef{Fredholm operator}{\index{Fredholm!operator}\label{functional:fredholm}
        A bounded linear operator $F\in\mathcal{B}(V,W)$ for which the kernel and cokernel are finite-dimensional. The space of Fredholm operators is denoted by $\mathfrak{F}(V)$.
    }

    By a theorem of Atkinson one can characterize Fredholm operators using the Calkin algebra:
    \begin{property}[Atkinson]\index{Atkinson}\index{parametrix}
        A bounded linear operator $F:V\rightarrow W$ is a Fredholm operator if and only if it is invertible in the Calkin algebra, i.e.~there exists a bounded linear operator $G:W\rightarrow V$ and compact operators $C_1,C_2$ such that $\mathbbm{1}_W-FG=C_1$ and $\mathbbm{1}_V-GF=C_2$. $G$ is called the \textbf{parametrix} of $F$.
    \end{property}

    \newdef{Fredholm index}{\index{index!Fredholm}
        The index of a Fredholm operator $F$ is defined as follows:
        \begin{gather}
            \mathrm{ind}(F) := \dim\ker(F)-\dim\mathrm{coker}(F).
        \end{gather}
    }

    \begin{property}
        The induced function
        \begin{gather}
            \mathrm{ind}:\pi_0\big(\mathfrak{F}(\mathcal{H})\big)\rightarrow\mathbb{Z}
        \end{gather}
        is a group isomorphism:
        \begin{itemize}
            \item $\mathrm{ind}(F^*)=-\mathrm{ind}(F)$, and
            \item $\mathrm{ind}(FG) = \mathrm{ind}(F)+\mathrm{ind}(G)$.
        \end{itemize}
        This theorem is generalized in \textit{$K$-theory} by the \textit{Atiyah-J\"anich theorem} \ref{k:atiyah_janich}.
    \end{property}

\subsection{Spectrum}\label{section:spectrum}

    \newdef{Resolvent operator}{\index{resolvent}
        Let $A$ be a bounded linear operator on a normed space $V$. The resolvent operator of $A_\lambda$ for some $\lambda\in\mathbb{C}$ is defined as the linear operator $(A-\lambda\mathbbm{1}_V)^{-1}$.
    }

    \newdef{Resolvent set}{
        \nomenclature[S_zsymrho]{$\rho(A)$}{resolvent set of a bounded linear operator $A$}
        The resolvent set $\rho(A)$ consists of all scalars $\lambda\in\mathbb{C}$ for which the resolvent operator of A is a bounded linear operator on a dense subset of $V$. These scalars $\lambda$ are called \textbf{regular values} of $A$.
    }
    \newdef{Spectrum}{\index{spectrum}\label{functional:spectrum}
        The set of scalars $\mu\in\mathbb{C}\setminus\rho(A)$ is called the spectrum $\sigma(A)$.
    }

    \begin{remark}
        From Remark \ref{linalgebra:eigenvalue_remark} it is clear that every eigenvalue of $A$ belongs to the spectrum of $A$. The converse, however, is not true. This is remedied by introducing the following concepts:
    \end{remark}

    \newdef{Point spectrum}{
        The set of scalars $\mu\in\mathbb{C}$ for which $A-\mu\mathbbm{1}_V$ fails to be injective is called the point spectrum $\sigma_p(A)$. This set coincides with the set of eigenvalues of $A$.
    }
    \newdef{Continuous spectrum}{
        The set of scalars $\mu\in\mathbb{C}$ for which $A-\mu\mathbbm{1}_V$ is injective with dense image but fails to be surjective is called the continuous spectrum of $A$.
    }
    \newdef{Residual spectrum}{
        The set of scalars $\mu\in\mathbb{C}$ for which $A-\mu\mathbbm{1}_V$ is injective but fails to have a dense image is called the residual spectrum $\sigma(A)$.
    }

    \newdef{Essential spectrum}{\index{essential!spectrum}
        The set of scalars $\mu\in\mathbb{C}$ for which $A-\mu\mathbbm{1}_V$ is not a Fredholm operator is called the essential spectrum $\sigma_\mathrm{ess}(A)$.
    }
    From Atkinson's theorem\footnote{In fact one could (equivalently) define the essential spectrum in terms of the Calkin algebra using Atkinson's theorem. Then this property would be an obvious consequence.} one can derive the following result:
    \begin{property}
        Let $A$ be a bounded linear operator and let $T$ be a compact operator. The essential spectra of $A$ and $A+T$ coincide.
    \end{property}

    \begin{property}
        A self-adjoint operator is bounded if and only if its spectrum is bounded. Furthermore, it is positive if and only if its spectrum lies in $\mathbb{R}^+$.
    \end{property}

\subsection{Spectral theorem}\label{section:PVM}

    This section focuses on the algebra of bounded operators $\mathcal{B}(\mathcal{H})$ on a (complex) Hilbert space $\mathcal{H}$.

    \begin{property}[Closed subspaces]
        There exists a bijection between the set of closed subspaces of $\mathcal{H}$ and the set of projections in $\mathcal{B}(\mathcal{H})$. Furthermore, if the projection $p$ corresponds to a subspace $\mathcal{H}_p$, the projection $\mathbbm{1}_\mathcal{H}-p$ corresponds to the orthogonal complement $\mathcal{H}^\perp_p$.
    \end{property}

    \newdef{Projection-valued measure}{\index{measure!projection-valued}\index{spectral!measure}
        \nomenclature[A_PVM]{PVM}{projection-valued measure}
        Consider a topological space $X$ and let $\Sigma$ be a $\sigma$-algebra \ref{set:sigma_algebra} on $X$. A projection-valued measure (PVM) or \textbf{spectral measure}\footnote{Sometimes also called a \textbf{resolution of the identity}.} on $X$ is a map $P:\Sigma\rightarrow\mathcal{B}(\mathcal{H})$ satisfying the following conditions:\footnote{The third property can in fact be shown to follow from the others.}
        \begin{enumerate}
            \item $P_E$ is a projection for all $E\in\Sigma$,
            \item $P_X = \mathbbm{1}_\mathcal{H}$,
            \item $P_AP_B = P_{A\cap B}$, and
            \item for all disjoint $\seq{E}\subset\Sigma$:
                \begin{gather}
                    \sum_{n\in\mathbb{N}}P_{E_n} = P_{\cup_{n\in\mathbb{N}}E_n}.
                \end{gather}
        \end{enumerate}
    }
    \begin{property}
        Let $P$ be a spectral measure on $(X,\Sigma)$. For every two elements $v,w\in\mathcal{H}$ the map
        \begin{gather}
            E\mapsto\mu^P_{v,w}(E):=\langle v\mid P_Ew \rangle
        \end{gather}
        defines a (complex) measure $\mu^P_{v,w}$ on $X$. The square of the norm of an element $v\in\mathcal{H}$ is then simply given by $\mu^P_{v,v}(X)$ due to the second condition above.
    \end{property}

    \begin{property}
        Let $f:X\rightarrow\mathbb{C}$ be a measurable function on a measurable space $(X,\Sigma)$. Given a spectral measure $P$, one defines $\Delta_f$ to be the set of all $v\in\mathcal{H}$ for which $f\in L^2(X,\mu^P_{v,v})$. This set is dense in $\mathcal{H}$. Moreover, the map
        \begin{gather}
            \int_Xf(\lambda)\,dP(\lambda):\Delta_f\rightarrow\mathcal{H}
        \end{gather}
        defined by
        \begin{gather}
            \left\langle v\,\middle|\,\int_Xf(\lambda)\,dP(\lambda)w\right\rangle := \int_Xf(\lambda)\,d\mu^P_{v,w}(\lambda)
        \end{gather}
        is closed and normal. It also satisfies the following two equalities:
        \begin{align}
            \left(\int_Xf(\lambda)\,dP(\lambda)\right)^\dag &= \int_X\overline{f(\lambda)}\,dP(\lambda)\\
            \left\|\int_Xf(\lambda)\,dP(\lambda)v\right\|^2 &= \int_X|f(\lambda)|^2\,d\mu^P_{v,v}(\lambda).
        \end{align}
        If $f$ is bounded, the above operator is bounded by the supremum norm of $f$:
        \begin{gather}
            \left\|\int_Xf(\lambda)\,dP(\lambda)\right\|\leq\|f\|_\infty.
        \end{gather}
    \end{property}

    \begin{theorem}[Spectral decomposition]
        Let $A$ be a self-adjoint operator on a Hilbert space $\mathcal{H}$. There exists a unique spectral measure $P_A:\Sigma\rightarrow\mathcal{B}(\mathcal{H})$ on the Borel $\sigma$-algebra of the real line such that
        \begin{gather}
            A = \int_\mathbb{R}\lambda\,dP_A(\lambda).
        \end{gather}
        If $\mathbb{R}$ is replaced by $\mathbb{C}$, this theorem also holds for normal operators. If $A$ is compact, the measure becomes purely atomic, i.e.~there exists an orthonormal basis of $\mathcal{H}$ consisting of eigenvectors of $A$ and, moreover, the eigenvalues are necessarily real:
        \begin{gather}
            A = \sum_{i=1}^\infty\lambda_ie_i^*\otimes e_i.
        \end{gather}
    \end{theorem}
    \begin{property}[Spectrum and support]
        The spectrum of a self-adjoint operator $A$ coincides with the support of its associated spectral measure $P_A$. A number $\lambda\in\mathbb{R}$ belongs to the point spectrum of $A$ if and only if $P_A$ does not vanish on $\{\lambda\}$. A number $\lambda\in\mathbb{R}$ belongs to the continuous spectrum of $A$ if $P_A$ vanishes on $\{\lambda\}$ but is nonvanishing on any open set containing $\lambda$.
    \end{property}

    \newdef{Singular value}{\index{singular!value}
        Let $A$ be a compact operator. The singular values of $A$ are given by the square roots of the eigenvalues of the self-adjoint (and compact) operator $A^*A$. If $A$ is self-adjoint, its singular values and eigenvalues coincide.
    }

    \newdef{Measurable functional calculus}{\index{functional!calculus}
        Let $(X,\Sigma)$ be a measurable space and let $\mathcal{H}$ be a Hilbert space. A measurable functional calculus $(\Phi,\mathcal{H})$ on $(X,\Sigma)$ is an assignment
        \begin{gather}
            \Phi:\mathrm{Meas}(X,\mathbb{C})\rightarrow\mathcal{B}_0(\mathcal{H})
        \end{gather}
        satisfying the following conditions:
        \begin{enumerate}
            \item\textbf{Identity}: $\Phi(1)=\mathbbm{1}_\mathcal{H}$.
            \item\textbf{Sublinearity}: $\Phi(\lambda f + g)\subseteq\lambda\Phi(f)+\Phi(g)$ and the equality holds if either operator is bounded.
            \item\textbf{Submultiplicativity}: $\Phi(f)\Phi(g)\subseteq\Phi(fg)$ and the equality holds if either operator is bounded. Moreover, the product is commutative if either operator is bounded.
            \item\textbf{Density}:\footnote{This condition is actually redundant.} $\Phi(f)$ is densely defined.
            \item\textbf{Involutivity}: $\Phi\left(\overline{f}\right)=\overline{\Phi(f)}$.
            \item\textbf{Boundedness}: $\Phi(f)$ is bounded if $f$ is bounded.
            \item\textbf{Convergence}: If the bounded sequence $f_n\longrightarrow f$ pointwise, then $\Phi(f_n)\longrightarrow\Phi(f)$ strongly.
        \end{enumerate}
    }

    \begin{property}
        If $(\Phi,\mathcal{H})$ is a measurable functional calculus on $(X,\Sigma)$, then
        \begin{gather}
            P_\Phi:\Sigma\rightarrow\mathcal{B}(\mathcal{H}):E\mapsto\Phi(\mathbbm{1}_E)
        \end{gather}
        is a projection-valued measure. Conversely, every projection-valued measure $P$ gives rise to a measurable functional calculus $\Phi$ such that $P=P_\Phi$.
    \end{property}

    \newdef{Borel functional calculus}{\index{Borel!functional calculus}
        A functional calculus on $(X,\Sigma)$ where $X$ is a topological space and $\Sigma$ is its Borel $\sigma$-algebra. If $X\subseteq\mathbb{C}$ and the identity function $\mathbbm{1}_\mathbb{C}:z\mapsto z$ is measurable, $(\Phi,\mathcal{H})$ is called a Borel functional calculus for the operator $A$ if $\Phi(\mathbbm{1}_\mathbb{C})=A$.
    }

    The above properties allow to compose self-adjoint operators with (measurable) functions similar to how one can compute $f(X)$ for finite-dimensional operators by applying $f$ to the eigenvalues of $X$:
    \begin{formula}[Borel functional calculus]
        Let $f:\sigma(A)\rightarrow\mathbb{C}$ be a measurable function (with respect to the restriction of the Borel algebra on $\mathbb{R}$) and let $g:\mathbb{R}\rightarrow\mathbb{C}$ be any other measurable function that coincides with $f$ on $\sigma(A)$.
        \begin{gather}
            f(A) := \int_{\sigma(A)}f(\lambda)\,dP_A(\lambda) = \int_\mathbb{R}g(\lambda)\,dP_A(\lambda) =: g(A).
        \end{gather}
    \end{formula}

\subsection{Dixmier trace}

    \newdef{Dixmier ideal}{\index{Dixmier!ideal}
        For every compact operator one can sort the singular values in decreasing order. The Dixmier ideal is defined as follows:
        \begin{gather}
            \mathfrak{D}(\mathcal{H}):=\big\{A\in\End_0(\mathcal{H})\mid\sigma_n(A)=O(\ln(n))\big\}\,,
        \end{gather}
        where
        \begin{gather}
            \sigma_n(A) := \sum_{i=1}^ns_i(A).
        \end{gather}
    }
    The following functional gives an alternative for the ordinary trace on operators that are not trace-class.
    \newdef{Dixmier trace}{\index{Dixmier!trace}\index{measurable!operator}\label{operators:dixmier_trace}
        For every element in $A\in\mathfrak{D}(\mathcal{H})$, the Dixmier trace is defined as follows:
        \begin{gather}
            \tr_\mathfrak{D}(A) := \omega\left(\left\{\frac{\sigma_n(A)}{1+\log(n)}\,\middle\vert\,n\in\mathbb{N}\right\}\right),
        \end{gather}
        where $\omega:\ell^\infty(\mathbb{N})\rightarrow\mathbb{R}$ is a linear functional satisfying the conditions
        \begin{enumerate}
            \item\textbf{Positivity}: $\omega(s)\geq0$ if $s_n\geq0$ for all $n\in\mathbb{N}$.
            \item\textbf{Convergence}: $\omega(s)=\lim_{n\rightarrow\infty}s_n$ if $s$ is convergent.
            \item\textbf{Dilation-invariant}: Let $D:\ell^\infty(\mathbb{N})\rightarrow\ell^\infty(\mathbb{N})$ be the following operator:
            \begin{gather}
                D:(s_1,s_2,\ldots)\mapsto(s_1,s_1,s_2,s_2,\ldots).
            \end{gather}
            The state $\omega$ is dilation-invariant if $\omega(s)=\omega\big(D(s)\big)$ for all $s\in\ell^\infty(\mathbb{N})$.
        \end{enumerate}
        If for an operator $A\in\mathfrak{D}(\mathcal{H})$ the Dixmier trace is independent of the chosen state, it is said to be \textbf{measurable}.
    }
    \begin{property}\index{singular!trace}
        The Dixmier trace has the following properties:
        \begin{itemize}
            \item $\tr_\mathfrak{D}(A+B)=\tr_\mathfrak{D}(A) + \tr_\mathfrak{D}(B)$ for all $A,B\in\mathfrak{D}(\mathcal{H})$.
            \item If $A$ is bounded and $B$ is an element of the Dixmier ideal, then $\tr_\mathfrak{D}(AB)=\tr_\mathfrak{D}(BA)$.
            \item The Dixmier ideal vanishes on trace-class operators (in particular, it is \textbf{singular}, i.e.~it vanishes on finite-rank operators):
                \begin{gather}
                    A\in\mathcal{B}_1(\mathcal{H})\implies\tr_\mathfrak{D}(A)=0.
                \end{gather}
        \end{itemize}
    \end{property}
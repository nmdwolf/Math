\chapter{Derivations: Classical Physics}
\section{d'Alembert's principle}\label{deriv:lagrange}

    In this section the Euler-Lagrange equations \eqref{lagrange:first_kind} and \eqref{lagrange:second_kind} of classical mechanics are derived from d'Alembert's principle \ref{lagrange:dalembert_principle}.

    In the following derivation the mass is assumed to be constant.
    \begin{align}
        &\sum_k\left(\vector{F}_k - \dot{\vector{p}}_k\right)\cdot\dot{\vector{r}}_k = 0\nonumber\\
        \iff&\sum_k\left(\vector{F}_k - \dot{\vector{p}}_k\right)\cdot\left(\sum_l\pderiv{\vector{r}_k}{q_l}\dot{q_l}\right) = 0\nonumber\\
        \iff&\sum_l\left(\sum_k\vector{F}_k\cdot\pderiv{\vector{r}_k}{q_l} - \sum_km\ddot{\vector{r}}_k\cdot\pderiv{\vector{r}_k}{q_l}\right)\dot{q_l} = 0\nonumber\\
        \iff&\sum_l\left(Q_l - \sum_km\ddot{\vector{r}}_k\cdot\pderiv{\vector{r}_k}{q_l}\right)\dot{q_l} = 0.\label{lagrange_deriv:deriv1}
    \end{align}
    Now, consider at the following derivative:
    \begin{align}
        &\deriv{}{t}\left(\dot{\vector{r}}\cdot\pderiv{\vector{r}}{q_l}\right) = \ddot{\vector{r}}\cdot\pderiv{\vector{r}}{q_l} + \dot{\vector{r}}\cdot\deriv{}{t}\left(\pderiv{\vector{r}}{q_l}\right)\nonumber\\
        \iff&\ddot{\vector{r}}\cdot\pderiv{\vector{r}}{q_l} = \deriv{}{t}\left(\dot{\vector{r}}\cdot\pderiv{\vector{r}}{q_l}\right) - \dot{\vector{r}}\cdot\deriv{}{t}\left(\pderiv{\vector{r}}{q_l}\right)\nonumber\\
        \iff&\ddot{\vector{r}}\cdot\pderiv{\vector{r}}{q_l} = \deriv{}{t}\left(\dot{\vector{r}}\cdot{\color{red}\underbrace{\textcolor{black}{\pderiv{\vector{r}}{q_l}}}_A}\right) - \dot{\vector{r}}\cdot\left(\pderiv{\dot{\vector{r}}}{q_l}\right).\label{lagrange_deriv:deriv2}
    \end{align}
    To evaluate the factor indicated by \textcolor{red}{A}, one can consider another derivative:
    \begin{align}
        \pderiv{\dot{\vector{r}}}{\dot{q}_l} &= \pderiv{}{\dot{q}_l}\left(\sum_k\pderiv{r}{q_k}\dot{q}_k\right)\nonumber\\
        &=\sum_k\pderiv{r}{q_k}\delta_{kl}\nonumber\\
        &=\pderiv{\vector{r}}{q_l}\nonumber\\
        &=\textcolor{red}{A}.\nonumber
    \end{align}
    Substituting this in Equation \eqref{lagrange_deriv:deriv2} gives
    \begin{align}
        \ddot{\vector{r}}\cdot\pderiv{\vector{r}}{q_l} &= \deriv{}{t}\left(\dot{\vector{r}}\cdot\pderiv{\dot{\vector{r}}}{\dot{q}_l}\right) - \dot{\vector{r}}\cdot\left(\pderiv{\dot{\vector{r}}}{q_l}\right)\nonumber\\
        &=\deriv{}{t}\left(\frac{1}{2}\pderiv{\dot{\vector{r}}^2}{\dot{q}_l}\right) - \frac{1}{2}\pderiv{\dot{\vector{r}}^2}{q_l}.\label{lagrange_deriv:deriv3}
    \end{align}
    If one multiplies this by the mass $m$ and sums over all masses, the following expression is obtained:
    \begin{align}
        \sum_km_k\ddot{\vector{r}}_k\cdot\pderiv{\vector{r}_k}{q_l}=\ &\deriv{}{t}\pderiv{}{\dot{q}_l}\left(\sum_k\frac{1}{2}m\dot{\vector{r}}_k^2\right) - \pderiv{}{q_l}\left(\sum_k\frac{1}{2}m\dot{\vector{r}}_k^2\right)\nonumber\\
        =\ &\deriv{}{t}\pderiv{T}{\dot{q}_l} - \pderiv{T}{q_l}\label{lagrange_deriv:deriv4},
    \end{align}
    where the total kinetic energy is denoted by $T$ in the last line. Plugging this result into Equation \eqref{lagrange_deriv:deriv1} gives
    \begin{gather}
        \label{lagrange_deriv:deriv5}
        \sum_l\left(Q_l - \deriv{}{t}\pderiv{T}{\dot{q}_l} - \pderiv{T}{q_l}\right)\dot{q_l} = 0.
    \end{gather}
    Because all the coordinates $q_l$ are independent, the following relation should hold for all $l$:
    \begin{align}
        &Q_l - \deriv{}{t}\left(\pderiv{T}{\dot{q}_l}\right) - \pderiv{T}{q_l} = 0\nonumber\\
        \iff&\deriv{}{t}\left(\pderiv{T}{\dot{q}_l}\right) - \pderiv{T}{q_l} = Q_l.\label{lagrange_deriv:first_kind}
    \end{align}
    This last equation is known as a \textbf{Lagrange equation of the first kind}.

    If the system only contains conservative forces, the force on the $i^{th}$ mass can be written as
    \begin{gather}
        \label{lagrange_deriv:deriv7}
        F_i = -\nabla_iV.
    \end{gather}
    With this in mind, one can relate the partial derivatives of the potential to the generalized forces:
    \begin{gather}
        \label{lagrange_deriv:deriv8}
        \begin{aligned}
            \pderiv{V}{q_l} &= \sum_i\left(\nabla_iV\right)\cdot\pderiv{\vector{r}_i}{q_l}\\
            &=-Q_l.
        \end{aligned}
    \end{gather}
    Furthermore, the derivative of $V$ with respect to the generalized velocities vanishes. This combined with Equation \eqref{lagrange_deriv:first_kind} gives
    \begin{align}
        &\deriv{}{t}\left(\pderiv{T}{\dot{q}_l}\right) - \pderiv{T}{q_l} = Q_l\nonumber\\
        \iff&\deriv{}{t}\left(\pderiv{T}{\dot{q}_l}\right) - \pderiv{T}{q_l} = -\pderiv{V}{q_l} + \pderiv{V}{\dot{q}_l}\nonumber\\
        \iff&\deriv{}{t}\left(\pderiv{T}{\dot{q}_l} - \pderiv{V}{\dot{q}_l}\right) - \pderiv{}{q_l}\left(T - V\right) = 0.\label{lagrange:deriv9}
    \end{align}
    If one introduces a new variable $L:=T-V$, called the \textbf{Lagrangian}, one gets the \textbf{Lagrangian equation of the second kind}:
    \begin{gather}
        \label{lagrange_deriv:second_kind}
        \deriv{}{t}\left(\pderiv{L}{\dot{q}_l}\right) - \pderiv{L}{q_l} = 0.
    \end{gather}

\section{Hamilton's principle}\index{Hamilton!principle}

    In this section the Euler-Lagrange equations \eqref{lagrange:first_kind} and \eqref{lagrange:second_kind} of classical mechanics are derived from the principle of least action.

    First, recall the definition of the \textbf{action}:
    \begin{gather}
        \label{lagrange_deriv:action_integral}
        I[q] := \int_{t_1}^{t_2}L\left(q(t),\dot{q}(t),t\right)dt.
    \end{gather}
    The principle of least action (\textbf{Hamilton's principle}) postulates that the action is minimal for the physically relevant path. To this end, define a family of paths
    \begin{gather}
        \label{lagrange_deriv:family_of_paths}
        q(t,\alpha) = q(t) + \alpha\eta(t),
    \end{gather}
    where $\eta(t)$ is an arbitrary function satisfying the following boundary conditions:
    \begin{gather}
        \begin{cases}
        \eta(t_1) = 0,&\\
        \eta(t_2) = 0.&
        \end{cases}
    \end{gather}
    If the action integral is extended to such a family, the integral \eqref{lagrange_deriv:action_integral} becomes a function of $\alpha$:
    \begin{gather}
        \label{lagrange_deriv:action_integral_over_family}
        I(\alpha) = \int_{t_1}^{t_2}L\left(q(t,\alpha),\dot{q}(t,\alpha),t\right)dt.
    \end{gather}
    Requiring that the action integral is stationary for the physical path $q(t)$, i.e. $\alpha=0$, is equivalent to requiring that the derivative at $\alpha=0$ vanishes:
    \begin{gather}
        \label{lagrange_deriv:stationary_condition}
        \left.\deriv{I}{\alpha}\right|_{\alpha=0} = 0.
    \end{gather}
    As one evaluates this derivative at $\alpha=0$, $q(t,\alpha)$ can be replaced by $q(t)$ due to \eqref{lagrange_deriv:family_of_paths}:
    \begin{align}
        \deriv{I}{\alpha}&=\int_{t_1}^{t_2}\left[\pderiv{L}{q}\pderiv{q}{\alpha} + \pderiv{L}{\dot{q}}\pderiv{\dot{q}}{\alpha}\right]dt\nonumber\\
        &=\int_{t_1}^{t_2}\left[\pderiv{L}{q}\eta(t) + \pderiv{L}{\dot{q}}\dot{\eta}(t)\right]dt.
    \end{align}
    By applying integration by parts to the second term in this integral, one obtains
    \begin{align}
        \deriv{I}{\alpha}&=\int_{t_1}^{t_2}\left[\pderiv{L}{q}(t)\eta(t) + \pderiv{L}{\dot{q}}(t)\dot{\eta}(t)\right]dt\nonumber\\
        &=\int_{t_1}^{t_2}\left[\pderiv{L}{q}(t)\eta(t) + \pderiv{L}{\dot{q}}(t)\deriv{\eta}{t}\right]dt\nonumber\\
        &=\int_{t_1}^{t_2}\pderiv{L}{q}(t)\eta(t)dt + \eta(t_2)\pderiv{L}{\dot{q}}(t_2) - \eta(t_1)\pderiv{L}{\dot{q}}(t_1) - \int_{t_1}^{t_2}\deriv{}{t}\left(\pderiv{L}{\dot{q}}\right)\eta(t)dt.
    \end{align}
    Due to the initial conditions \eqref{lagrange_deriv:stationary_condition} for the function $\eta$, the second and third term vanish:
    \begin{gather}
        \label{lagrange_deriv:final_integral}
        \deriv{I}{\alpha}=\int_{t_1}^{t_2}\left[\pderiv{L}{q} - \deriv{}{t}\left(\pderiv{L}{\dot{q}}\right)\right]\eta(t)dt.
    \end{gather}
    Furthermore, because the function $\eta$ was arbitrary, the only possible way that this derivative zero is when the integrand itself is zero:
    \begin{gather}
        \label{lagrange_deriv:second_kind_with_hamilton}
        \pderiv{L}{q} - \deriv{}{t}\left(\pderiv{L}{\dot{q}}\right) = 0.
    \end{gather}
    Comparing this result to Equation \eqref{lagrange_deriv:second_kind} shows that one can also obtain the \textbf{Lagrangian equations of the second kind} by starting from the principle of least action.

\section{Noether's theorem}\label{proof:noether}

    In this section Noether's theorem \ref{field:noethers_theorem} for field theories is defived from a general variation.

    The general transformation rule for the Lagrangian is
    \begin{gather}
        \label{noether_deriv:1}
        \mathcal{L}\longrightarrow\mathcal{L} + \alpha\delta\mathcal{L}.
    \end{gather}
    To have a symmetry, i.e. to keep the action invariant, the deformation factor has to be a 4-divergence:
    \begin{gather}
        \label{noether_deriv:2}
        \mathcal{L}\longrightarrow\mathcal{L} + \alpha\partial_\mu\mathcal{J}^\mu.
    \end{gather}

    To obtain the conservation law \eqref{field:conserved_current}, the Lagrangian is varied explicitly:
    \begin{align*}
        \delta\mathcal{L} &= \pderiv{\mathcal{L}}{\phi}\delta\phi + \pderiv{\mathcal{L}}{(\partial_\mu\phi)}\delta(\partial_\mu\phi)\\
        &= \pderiv{\mathcal{L}}{\phi}\delta\phi + \partial_\mu\left(\pderiv{\mathcal{L}}{(\partial_\mu\phi)}\delta\phi\right) - \partial_\mu\left(\pderiv{\mathcal{L}}{(\partial_\mu\phi)}\right)\delta\phi\\
        &= \partial_\mu\left(\pderiv{\mathcal{L}}{(\partial_\mu\phi)}\delta\phi\right) + \left[\pderiv{\mathcal{L}}{\phi} - \pderiv{\mathcal{L}}{(\partial_\mu\phi)}\right]\delta\phi.
    \end{align*}
    The second term vanishes due to the Euler-Lagrange equation \eqref{lagrange_deriv:second_kind_with_hamilton}. Combining these formulas gives
    \begin{gather}
        \partial_\mu\left(\pderiv{\mathcal{L}}{(\partial_\mu\phi)}\delta\phi\right) - \partial_\mu\mathcal{J}^\mu(x) = 0.
    \end{gather}
    From this equation one can conclude that the current
    \begin{gather}
        j^\mu(x) = \pderiv{\mathcal{L}}{(\partial_\mu\phi)}\delta\phi - \mathcal{J}^\mu(x)
    \end{gather}
    is conserved.

\section{Moments of inertia}\label{deriv:inertia}\index{inertia}

    In this section the general formula for the inertia tensor \ref{classic:moment_of_inertia} is used to calculate the moment of inertia of some common objects.

\subsection{Disk}

    The volume of a (solid) disk is given by
    \begin{gather}
        V_\mathrm{disk} = \pi R^2d,
    \end{gather}
    where $R$ denotes the radius and $d$ denotes the thickness. The mass density is then given by
    \begin{gather}
        \rho = \frac{M}{\pi R^2d}.
    \end{gather}
    Using cylindrical coordinates the moment of inertia becomes
    \begin{align}
        I &= \frac{M}{\pi R^2d}\int_0^{2\pi}d\varphi\int_0^ddz\int_0^Rr^3dr\nonumber\\
        &= \frac{M}{\pi R^2d}2\pi d\frac{R^4}{4}\nonumber\\
        &= \frac{1}{2}MR^2.
    \end{align}

\subsection{Solid sphere}

    The volume of a solid sphere is given by
    \begin{gather}
        V_\mathrm{sphere} = \frac{4}{3}\pi R^3,
    \end{gather}
    where $R$ denotes the radius. The mass density is then given by
    \begin{gather}
        \rho = \frac{M}{\frac{4}{3}\pi R^3}.
    \end{gather}
    Spherical coordinates will be used to derive the moment of inertia, but one has to be careful. The $r$ in Formula \ref{classic:moment_of_inertia} is the distance between a point in the body and the axis of rotation. So it is not the same as the $r$ in spherical coordinates, which is the distance between a point and the origin. However, the relation between these two quantities is easily found using basic geometry:
    \begin{gather}
        r = r'\sin\theta,
    \end{gather}
    where $r'$ is the spherical coordinate. Now, one can calculate the moment of inertia as follows:
    \begin{align}
        I &= \frac{M}{\frac{4}{3}\pi R^3} \int_0^{2\pi}d\varphi\int_0^Rr'^{^4}dr'\int_0^\pi\sin^3\theta d\theta\nonumber\\
        &= \frac{M}{\frac{4}{3}\pi R^3} 2\pi\frac{R^5}{5}\frac{4}{3}\nonumber\\
        &= \frac{2}{5}MR^2.
    \end{align}

\chapter{Derivations: Optics and Material Physics}

\section{Law of Lambert-Beer}

    In this section the law of Lambert-Beer \ref{optics:lambert_beer} is derived.

    From Equation \eqref{optics:dielectric_function_non_magnetic} it is known that the complex refractive index can be written as \[\widetilde{n} = n+ik,\] where $k$ is called the \textbf{extinction coefficient}. From classical optics it is also known that in a material the speed of light obeys the following relation: \[c = \widetilde{n}v.\] It readily follows that the wave number (sadly also denoted by the letter $k$) can be written as \[k = \frac{\omega}{v} = \widetilde{n}\frac{\omega}{c}.\] From electromagnetism one knows that a plane wave can be written as \[E(x,t) = \mathrm{Re}\big\{A\exp\left[i(kx - \omega t + \phi)\right]\big\}.\] So, after putting everything together, one obtains \[E(x,t) = \mathrm{Re}\left\{A\exp\left[i\left((n+ik)\frac{\omega}{c}x - \omega t + \phi\right)\right]\right\}\] or \[E(x,t) = \mathrm{Re}\left\{A\exp\left(in\frac{\omega}{c}x\right)\cdot\exp\left(-k\frac{\omega}{c}x\right)\cdot\exp\left(-i\omega t\right)\cdot\exp\left(i\phi\right)\right\}.\] It is also known that the intensity is given by the following relation:\[I(x) = |E(x)|^2 = E^*(x)\cdot E(x).\] This implies that only the second exponential factor will remain. Dividing the result by its value at $x=0$ gives \[\frac{I(x)}{I(0)} = \frac{E(x)\cdot E^*(x)}{E(0)\cdot E^*(0)} = \exp\left(-\frac{2k\omega}{c}x\right) = \exp(-\alpha x),\]
    where $\alpha$ is the absorption coefficient as defined in Definition \ref{optics:absorption_coefficient}.\qed

\section{Schottky defects}\label{deriv:schottky_defects}

    In this section the distribution of Schottky defects \ref{solid:schottky_defects} in function of the temperature is derived.

    Let $E_v$ be the energy needed to remove a particle from its lattice point and move it to the surface. All surface effects will be neglected and it will be assumed that the the energy $E_v$ is independent of the distance to the surface.

    The total energy of all vacancies is then given by $E = nE_v$. The number of possible microstates is
    \begin{gather}
        \Omega = \frac{(N+n)!}{N!n!},
    \end{gather}
    where the fact that the removal of $n$ particles creates $n$ more lattice points at the surface was used. Using Boltzmann's entropy formula \eqref{statmech:boltzmann_formula} and Stirling's formula \eqref{calculus:stirling} one obtains
    \begin{gather}
        S(N,n) = k\ln\Omega = k\big[(N+n)\ln(N+n) -n\ln n - N\ln N \big].
    \end{gather}
    Using Definition \ref{statmech:temperature} of the temperature as the derivative of the energy gives
    \begin{gather}
        \frac{1}{T} = \left(\pderiv{S}{E}\right)_{N, V} = \deriv{S}{n}\deriv{n}{E} = \frac{k}{E_v}\ln\frac{N+n}{n}
    \end{gather}
    or
    \begin{gather}
        \frac{n}{N + n} = \exp\left(-\frac{E_v}{kT}\right).
    \end{gather}
    The density of Frenkel pairs can be derived analogously.
\chapter{Mathematical Formalism}\label{chapter:mathematical_formalism_qm}

    The main reference for the mathematically rigorous treatment of quantum mechanics, in particular in the infinite-dimensional setting, is \cite{moretti_QM}. Relevant chapters in this compendium are \ref{chapter:distributions}, \ref{chapter:normed_spaces} and \ref{chapter:operator_algebras}.

    ?? COMPLETE LIST ??

\section{Postulates}

    \begin{axiom}[State spaces]
        The possible states of a (closed) system are represented by vectors in a (complex) Hilbert space. In the infinite-dimensional setting one often further restricts to separable spaces.
    \end{axiom}

    \begin{axiom}[Observables]\index{observable}
        A self-adjoint operator. In the finite-dimensional case this is equivalent to an operator that admits a complete set of eigenfunctions
    \end{axiom}

    \begin{axiom}[Rays]
        The dynamics of the system do not depend on the global phase of states. Hence we can describe states as rays in a projective Hilbert space.
    \end{axiom}

\subsection{Observables}

    \begin{formula}\index{eigenfunction!expansion}
        Let $|\Psi\rangle$ be a state vector representing a given system and let the set $\{|\psi_i\rangle\}_{i\in I}$ be a complete set of eigenvectors of some observable of the system. The state vector $|\Psi\rangle$ can be expressed as a linear combination of the eigenfunctions:
        \begin{gather}
            \label{qm_formalism:eigenfunction_expansion}
            |\Psi\rangle = \sum_ic_i|\psi_i\rangle + \int c_a|\psi_a\rangle da
        \end{gather}
        where the summation ranges over the discrete spectrum and the integral over the continuous spectrum.
    \end{formula}

    \begin{formula}[Closure relation]\index{closure!relation}\index{resolution!of the identity}
        For a complete set of discrete eigenvectors the closure relation\footnote{This relation is also called the \textbf{resolution of the identity}.} is given by
        \begin{gather}
            \label{qm_formalism:closure}
            \sum_n|\psi_n\rangle\langle\psi_n| = \mathbbm{1}.
        \end{gather}
        For a complete set of continuous eigenvectors we have the following counterpart:
        \begin{gather}
            \label{qm_formalism:closure_continuouos}
            \int|i\rangle\langle i|di = \mathbbm{1}.
        \end{gather}
        For a mixed set of eigenvectors a similar relation is obtained by summing over the discrete part and integrating over the continuous part.
    \end{formula}
    \sremark{To simplify the notation we will almost always use the notation of equation \ref{qm_formalism:closure} and implicitly integrate over the continuous spectrum.}

    \newdef{Canonical commutation relations}{\index{CCR}\label{qm_formalism:CCR}
        \nomenclature[A_CCR]{CCR}{canonical commutation relation}
        Two observables $A,B$ are said to obey a canonical commutation relation (CCR) if they satisfy (often up to a constant $\hbar$)
        \begin{gather}
            [A, B] = i.
        \end{gather}
        The prime example are the position and momentum operators $\hat{x}, \hat{p}$. By functional calculus we can then define the exponential operators $e^{isA}$ and $e^{itB}$, the above relation then induces the so-called Weyl form of the CCR:
        \begin{gather}
            e^{isA}e^{itB} = e^{ist}e^{itB}e^{isA}.
        \end{gather}
    }
    \begin{theorem}[Stone-von Neumann]\index{Stone-von Neumann}\label{qm_formalism:stone_von_neumann}
        All pairs of irreducible unitary one-parameter subgroups satisfying the Weyl form of the CCR are unitarily equivalent.
    \end{theorem}
    \begin{result}
        The Stone-von Neumann theorem implies that the Schr\"odinger and Heisenberg pictures are unitarily equivalent.
    \end{result}

\section{Uncertainty principle}

    \newdef{Compatible observables}{\index{observable!compatibility}
        Let $\hat{A}, \hat{B}$ be two observables. If there exists a complete set of mutual eigenvectors $|\psi_n\rangle$, the two operators are said to be compatible.
    }

    \newformula{Uncertainty relation}{\index{Heisenberg!uncertainty relation}\index{Robertson|see{Heisenberg uncertainty relation}}
        Let $\hat{A}, \hat{B}$ be two observables and let $\Delta A, \Delta B$ be the corresponding uncertainties:
        \begin{gather}
            \Delta A := \langle\hat{A}^2\rangle - \langle\hat{A}\rangle^2.
        \end{gather}
        The (\textbf{Robertson}) uncertainty relation reads as follows:
        \begin{gather}
            \label{qm_formalism:uncertainty_relation}
            \Delta A\Delta B \geq \stylefrac{1}{4}\left|\left\langle\left[\hat{A}, \hat{B}\right]\right\rangle\right|^2.
        \end{gather}
    }

\section{Symmetries}
\subsection{Quantum symmetries}

    \newdef{State space}{
        By the postulates of quantum mechanics, the states in a quantum theory are given by rays in the projective Hilbert space $P\mathcal{H}$ since phase factors are irrelevant. Probabilities are then defined through the canonical metric on $P\mathcal{H}$ as follows:
        \begin{gather}
            \mathcal{P}(\psi, \phi) := \cos^2\big[d(\psi,\phi)\big] = \frac{|\langle\psi|\phi\rangle|^2}{\langle\psi|\psi\rangle\langle\phi|\phi\rangle}
        \end{gather}
        where $|\psi\rangle,|\phi\rangle$ are two representatives in $P\mathcal{H}$.
    }

    \newdef{Symmetry}{\index{symmetry}\index{automorphism!quantum}
        A quantum symmetry (or \textbf{quantum automorphism}) is an isometric automorphism of $P\mathcal{H}$. We will denote this group by $\text{Aut}_{qm}(P\mathcal{H})$.
    }

    The following theorem due to Wigner gives a (linear) characterization of quantum symmetries:\footnote{In fact it is a particular case of a more general theorem in projective geometry.}
    \begin{theorem}[Wigner]\index{Wigner}
        Every quantum automorphism of $P\mathcal{H}$ is induced by a unitary or anti-unitary operator on $\mathcal{H}$.
    \end{theorem}
    This is equivalent to saying that the group morphism $\pi:\text{Aut}(\mathcal{H}, \mathcal{P}):=\text{U}(\mathcal{H})\times\text{AU}(\mathcal{H})\rightarrow\text{Aut}_{qm}(P\mathcal{H})$ is surjective. The kernel $\text{U}(1)$ is given by phase shifts and hence we obtain a short exact sequence:
    \begin{gather}
        1\longrightarrow\text{U}(1)\longrightarrow\text{Aut}(\mathcal{H}, \mathcal{P})\longrightarrow\text{Aut}_{qm}(P\mathcal{H})\longrightarrow1.
    \end{gather}
    In the case of symmetry breaking (e.g. lattice systems) the full symmetry group is reduced to a subgroup $G\subset\text{Aut}_{qm}(P\mathcal{H})$. The group of operators acting on $\mathcal{H}$ is then given by the pullback $\widetilde{G}$ of the diagram \[\text{Aut}(\mathcal{H}, \mathcal{P})\longrightarrow\text{Aut}_{qm}(P\mathcal{H})\longleftarrow G.\] It should also be noted that the kernel of the homomorphism (in fact projection) $\widetilde{G}\rightarrow G$ is again $\text{U}(1)$. This then leads to the property that $\widetilde{G}$ is a $\mathbb{Z}_2$-twisted (and hence non-central) $\text{U}(1)$-extension of $G$ (where the twist is induced by the homomorphism $\phi:\text{Aut}(\mathcal{H}, \mathcal{P})\rightarrow\mathbb{Z}_2$ that tells us whether an operator is unitary or anti-unitary).

    ?? COMPLETE ??

\subsection{Symmetric states}

    \begin{axiom}[Symmetrization postulate]\index{symmetrization postulate}
        Let $\mathcal{H}$ be the Hilbert space belonging to a single particle. A system of $n$ identical particles is described by a state $\Psi$ belonging to either $S^n(\mathcal{H})$ or $\Lambda^n(\mathcal{H})$.
    \end{axiom}
    \begin{remark}
        In ordinary quantum mechanics this is a postulate, but in quantum field theory this is a consequence of the spin-statistics theorem of Pauli.
    \end{remark}

    \begin{formula}
        Consider the permutation group $S_n$ on $n$ elements. Let $|\psi\rangle$ be a single-particle wave function. Bosonic systems are described by a wave function of the form
        \begin{gather}
            |\Psi_B\rangle = \sum_{\sigma\in S_n}|\psi_{\sigma(1)}\rangle\cdots|\psi_{\sigma(n)}\rangle.
        \end{gather}
        Fermionic systems are described by a wave function of the form
        \begin{gather}
            |\Psi_F\rangle = \sum_{\sigma\in S_n}\sgn(\sigma)|\psi_{\sigma(1)}\rangle\cdots|\psi_{\sigma(n)}\rangle.
        \end{gather}
    \end{formula}

    \newdef{Slater determinant}{\index{Slater!determinant}\index{spin!orbitals}\index{permanent}
        Let $\{\phi_i(\vector{q})\}_{i\leq N}$ be a set of wave functions, called \textbf{spin orbitals}, describing a system of $N$ identical fermions. The totally antisymmetric wave function of the system is given by\footnote{For bosonic systems one can define a similar function using the concept of \textit{permanents}.}
        \begin{gather}
            \label{qm_formalism:slater_determinant}
            \psi(\vector{q}_1,\ldots,\vector{q}_N) = \frac{1}{\sqrt{N!}}\det\left(
            \begin{array}{ccc}
                \phi_1(\vector{q}_1)&\cdots&\phi_N(\vector{q}_1)\\
                \vdots&\ddots&\vdots\\
                \phi_1(\vector{q}_N)&\cdots&\phi_N(\vector{q}_N)
            \end{array}
            \right).
         \end{gather}
    }

\section{Interaction picture}\index{interaction!picture}\label{qm:interaction_picture}

    Let $\hat{H}(t) = \hat{H}_0 + \hat{V}(t)$ be the total Hamiltonian of a system where $\hat{V}(t)$ is the interaction potential. Let $|\psi(t)\rangle$ and $\hat{O}$ denote a state and operator in the Schr\"odinger picture.
    \begin{formula}
        In the interaction picture we define the state vector as follows:
        \begin{gather}
            |\psi(t)\rangle_I := e^{\frac{i}{\hbar}\hat{H}_0t}|\psi(t)\rangle.
        \end{gather}
        From this it follows that the operators in the interaction picture are given by
        \begin{gather}
            \hat{O}_I(t) = e^{\frac{i}{\hbar}\hat{H}_0t}\hat{O}e^{-\frac{i}{\hbar}\hat{H}_0t}.
        \end{gather}
    \end{formula}
    \newformula{Schr\"odinger equation}{
        Using the previous formulas, the Schr\"odinger equation can be rewritten as follows:
        \begin{gather}
            i\hbar\deriv{}{t}|\psi(t)\rangle_I = \hat{V}_I(t)|\psi(t)\rangle_I.
        \end{gather}
        The time-evolution of operators in the interaction picture is given by
        \begin{gather}
            \deriv{}{t}\hat{O}_I(t) = \frac{i}{\hbar}\left[\hat{H}_0, \hat{O}_I(t)\right].
        \end{gather}
    }

    \begin{theorem}[Adiabatic theorem]\index{adiabatic!theorem}
        If a perturbation is acting slowly enough on a system such that the system can adapt its configuration at every single moment then the system will remain in the same eigenstate.
    \end{theorem}

\section{\difficult{Curved backgrounds}}

    Using the tools of distribution theory and differential geometry, as presented in chapters \ref{chapter:distributions}, \ref{chapter:bundles} and onward, we can introduce quantum mechanics on curved backgrounds\footnote{That is space, not spacetime!}. The main reference for this chapter is \cite{schuller}.

    \begin{remark}
        A first important remark that we have to make is that the classical definition of the wave function as an element of $L^2(\mathbb{R}^d, \mathbb{C})$ is not sufficient, even in flat Cartesian space. A complete description requires the introduction of the so-called \textit{Gelfand triple}\footnote{Often called a \textit{rigged Hilbert space}.} where we replace the space of square-integrable functions by the Schwartz space\footnote{See definition \ref{distribution:schwartz_space}.} of rapidly decreasing functions. The linear functionals on this space are then given by the tempered distributions.
    \end{remark}

    \begin{construct}
        When working on curved spaces (or even in non-Cartesian coordinates on flat space) one can encounter problems with the definition of the self-adjoint operators $\hat{q}^i$ and $\hat{p}_i$. The naive definition $\hat{q}^i = q^i, \hat{p}_i = -i\partial_i$ gives rise to extra terms when calculating inner products that break the canonical commutation relations and the self-adjointness of the operators (e.g. the angular position operator $\hat{\varphi}$ on the circle together with its conjugate $\hat{L}$).

        An elegant solution to this problem is found by giving up the definition of the wave function as a function $\psi:\mathbb{R}^d\rightarrow\mathbb{C}$. Assume that we are working on a Riemannian manifold $(M, g)$ and that our ''naive'' wave functions take values in a vector space $V$. We then construct a vector bundle $E$ with typical fibre $V$ over $M$. On the frame bundle $F(E)$ associated to this vector bundle there lives an Ehresmann connection $\omega$ that we can use to define a (local) covariant derivative $\nabla$. The ''true'' wave function is now defined as a map $\Psi: F(E)\rightarrow V$ or locally as the pullback $\psi := \varphi^*\Psi$ for some local section $\varphi:U\subseteq M\rightarrow F(E)$.

        Now we introduce a general inner product
        \begin{gather}
            \langle\psi, \phi\rangle := \int d^dx\sqrt{\det(g)}\psi^*(x)\phi(x).
        \end{gather}
        Because the factor $\sqrt{\det(g)}$ transforms in the inverse manner of the measure $d^dx$, the integrand is invariant under coordinate transforms (which is something we generally require of our physical laws). Using this new inner product we can check the self-adjointness of the momentum operator $\hat{P}_i := -i\nabla_i$:
        \begin{align*}
            \langle\psi, \hat{P}_i\phi\rangle = &\int d^dx\sqrt{\det(g)}\psi^*(x)(-i\nabla_i)\phi(x)\\
            \overset{\ref{diff:prin:local_covariant_derivative}}{=} &\int d^dx\sqrt{\det(g)}\psi^*(x)(-i\partial_i - i\omega_i)\phi(x)\\
            = &i\int d^dx\left(\partial_i\sqrt{\det(g)}\right)\psi^*(x)\phi(x) + \int d^dx\sqrt{\det(g)}(-i\partial_i\psi)^*(x)\phi(x)\\
                &\hspace{2cm} -i \int d^dx\sqrt{\det(g)}\psi^*(x)\omega_i\phi(x)\\
            = &\langle\hat{P}_i\psi, \phi\rangle -i \int d^dx\sqrt{\det(g)}\psi^*(x)\omega_i^*\phi(x)\\
                &\hspace{2cm} + i\int d^dx\left(\partial_i\sqrt{\det(g)}\right)\psi^*(x)\phi(x) -i \int d^dx\sqrt{\det(g)}\psi^*(x)\omega_i\phi(x).
        \end{align*}
        Self-adjointness then requires that
        \begin{gather}
            \sqrt{\det(g)}(\omega_i + \omega_i^*) = \partial_i\sqrt{\det(g)}
        \end{gather}
        or using the identity $(\ln f)' = \frac{f'}{f}$:
        \begin{gather}
            2\text{Re}(\omega_i) = \partial_i\ln\left(\sqrt{\det(g)}\right).
        \end{gather}
    \end{construct}

    ?? COMPLETE ??

\section{\difficult{Geometric Quantization}}\label{section:geometric_quantization}
\subsection{Prequantization}

    \newdef{Prequantum line bundle}{\index{prequantum line bundle}
        Consider a classical phase space $M$ equipped with its symplectic form $\omega$. A prequantum line bundle for this manifold is a line bundle equipped with a connection $\nabla$ such that $\omega=F_\nabla$ (where $F$ denotes the curvature 2-form).
    }
    \begin{property}\index{Weil!integrality}\index{Dirac!quantization condition}
        Such a line bundle exists if and only if the symplectic form is integral\footnote{See definition \ref{diff:integral_form}.}. For simply-connected manifolds this is equivalent to
        \begin{gather}
            \int_S\omega \in 2\pi\mathbb{Z}
        \end{gather}
        for every 2-cycle $S\subset M$. This condition resembles the ''old'' \textit{Bohr-Sommerfeld condition} and is in general known as the \textbf{Weil integrality condition}.

        One can also derive the Dirac quantization condition from Weil integrality. If we couple the system to a gauge potential then the connection form should contain the gauge field and hence the curvature is transformed as $\omega\longrightarrow\omega + eF_{\text{EM}}$. Weil integrality then implies that $e$ is an integer.
    \end{property}

    \newdef{Prequantum Hilbert space}{
        Consider a symplectic manifold $(M, \omega)$ together with its prequantum line bundle $(L, \nabla)$. The prequantum Hilbert space $\mathcal{H}_{\mathbb{P}}$ is defined as the space of square-integrable sections of $L$ (with respect to the volume form induced by $\omega$).
    }

    \newdef{Quantization}{\index{quantization}
        Consider a symplectic manifold $(M, \omega)$. A quantization of $(M, \omega)$ is given by a prequantum line bundle $(L, \nabla)$ together with a polarization $P$ of $M$. The quantum state space $\mathcal{H}$ is given by the subspace of $\mathcal{H}_{\mathbb{P}}$ of those sections that are covariantly constant along $P$, i.e. those sections $s\in\Gamma(L)$ such that $\nabla_Xs=0$ for all $X\in P$.
    }

    \newdef{Prequantum operator}{
        Consider a symplectic manifold $(M, \omega)$ together with its prequantum line bundle $(L, \nabla)$. To every smooth function $f\in C^\infty(M,\mathbb{C})$ we associate a (prequantum) operator $\hat{f}:\Gamma(L)\rightarrow\Gamma(L)$ by the following formula:
        \begin{gather}
            \hat{f}:\psi\rightarrow -i\nabla_{X^f}\,\psi + f\cdot\psi
        \end{gather}
        where $X^f$ is the Hamiltonian vector field associated to $f$ (see definition \ref{diff:hamilton_vectorfield}) and $\nabla = d - i\theta$ with $\theta$ the Liouville 1-form.

        If this operator ought to preserve the polarization of $M$ then we should have \[\nabla_Xs=0\implies\nabla_X(\hat{f}s)=0\] for all sections $s\in\Gamma(L)$ and $X\in P$. Using the general formula for second covariant derivatives and the fact that the leaves of $P$ are Lagrangian we find the following condition:
        \begin{gather}
            [X, X^f]=0
        \end{gather}
        for all $X\in P$.
    }
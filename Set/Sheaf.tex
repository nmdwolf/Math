\chapter{Sheaf Theory}

\section{Presheafs}

	\newdef{Presheaf}{\index{presheaf}\index{section}
		Let $(X, \tau)$ be a topological space. A presheaf over $X$ consists of an algebraic structure $\mathcal{F}(U)$ for every open set $U\in\tau$ and a morphism $\Phi^U_V:\mathcal{F}(U)\rightarrow \mathcal{F}(V)$ for every two open sets $U, V\in\tau$ with $V\subseteq U$ such that the following conditions are satisfied:
		\begin{enumerate}
			\item $\Phi^U_U = \text{Id}$
			\item If $W\subseteq V\subseteq U$ then $\Phi^U_W = \Phi^V_W\circ\Phi^U_V$.
		\end{enumerate}
		The set $\mathcal{F}(U)$ is called the set of \textbf{sections} over $U$ and the morphisms $\Phi^U_V$ are called the \textbf{restriction maps}.
	}
	
	\newdef{Morphism of presheaves}{\index{morphism!of presheaves}\index{germ}
		Let $\mathcal{F}, \mathcal{F}'$ be two presheaves over a space $X$. A morphism $\mathcal{F}\rightarrow \mathcal{F}'$ is a set of morphisms $\Psi_U:\mathcal{F}(U)\rightarrow \mathcal{F}'(U)$ that commute with the restriction maps $\Phi^U_V$.
	}
	
	\begin{adefinition}[Category theory]
		Using the language of category theory one can more easily introduce presheaves: Let $\mathbf{C}$ be a category and let $X$ be a topological space. A $\mathbf{C}$-valued presheaf on $X$ is a contravariant functor $\mathcal{F}:\text{Open}(X)\rightarrow\mathbf{C}$.
	\end{adefinition}
	
	\begin{example}[Constant presheaf]\label{sheaf:constant_presheaf}
		Let $S$ be any set. The constant presheaf over $X$ with target $S$ is defined by:\[\mathcal{F}(U) = S\] for every open set $U\subseteq X$.
	\end{example}

\section{Sheafs}
	
	\newdef{Sheaf}{\index{sheaf}
		Let $(X, \tau)$ be a topological space. A sheaf $\mathcal{O}_X$ over $X$ is a presheaf $\mathcal{F}$ satisfying the following additional conditions:
		\begin{enumerate}
			\item Locality: Let $\{U_i\in\tau\}$ be an open cover of $U\subseteq X$ and consider sections $s, t\in\mathcal{F}(U)$. If $\forall i: s|_{U_i}=t|_{U_i}$ then $s=t$.
			\item Gluing: Let $\{U_i\in\tau\}$ be an open cover of $U\subseteq X$ and let $\{s_i\in\mathcal{F}(U_i)\}$ be a collection of sections. If $\forall i, j: s_i|_{U_i\cap U_j} = s_j|_{U_i\cap U_j}$ then there exists a section $s\in\mathcal{F}(U)$ such that $\forall i: s|_{U_i} = s_i$.
		\end{enumerate}
	}
	\newdef{Stalk}{\index{stalk}\index{germ}
		Let $x\in X$ and consider the set of all neighbourhoods of $x$. This set can be turned into a directed set\footnote{See definition \ref{set:directed_set}.} by equipping it with the (partial) order relation $U\subset V\implies U\geq V$. This turns the sheaf $\mathcal{F}$ over $X$ into a directed system. The stalk over $x$ is then defined as the following direct limit\footnote{See definition \ref{direct_limit}.}:
		\begin{equation}
			\mathcal{F}_x = \varinjlim_{U\ni x} \mathcal{F}(U)
		\end{equation}
		The equivalence class of a section $s\in\mathcal{F}(U)$ in $\mathcal{F}_x$ is called the \textbf{germ} of $s$ at $x$.
	}
	\begin{notation}
		Similar to the notation of the restriction morphisms we denote the morphism that maps every section to its equivalence class by $\Phi^U_x$.
	\end{notation}
	
	\begin{property}
		Two subsheaves of a sheaf $\mathcal{G}$ over $X$ are equal if and only if their stalks are equal as subsets of $\mathcal{G}_x$ for all points $x\in X$.
	\end{property}
	
	\begin{construct}[Sheafification]\index{sheafification}
		Consider a presheaf $\mathcal{F}$ over a topological space $X$. From this presheaf one can construct a sheaf $\mathcal{F}^\ast$, called the sheafification or \textbf{associated sheaf} of $\mathcal{F}$, in the following way:
		
		First we define a presheaf $\mathcal{G}$ such that:\footnote{Sections in this sheaf are said to be \textit{continuous}. This statement can be made formal using the concept of an \'etal\'e space. (See construction \ref{sheaf:etale_construction}.)}
		\begin{equation}
			\mathcal{G}(U) = \left\{\left.(s_x)_{x\in U}\in\bigsqcup_{x\in U}\mathcal{F}_x\right\vert\forall x\in U: \exists\text{ open }V, t\in\mathcal{F}(V): \forall v\in V: s_v = \Phi^V_v(t)\right\}
		\end{equation}
		where $U\subseteq X$ is open. The restriction maps $\rho^U_V$ are defined by:
		\begin{equation}
			\rho^U_V:(s_x)_{x\in U}\mapsto(s_x)_{x\in V}
		\end{equation}
		It is easily proven that this presheaf is in fact a sheaf and hence we obtain the sheafification by setting $\mathcal{F}^\ast = \mathcal{G}$. This construction also gives a canonical morphism $\varphi:\mathcal{F}\rightarrow\mathcal{F}^\ast$ defined by:
		\begin{equation}
			\varphi(s):U\rightarrow\bigsqcup_{x\in U}\mathcal{F}_x:x \mapsto s_x = \Phi^U_x(s)
		\end{equation}
		where $s\in\mathcal{F}(U)$ and $x\in U$.
	\end{construct}
	\sremark{We see that the sections in $\mathcal{F}^\ast$ arise from (locally) resticting sections in $\mathcal{F}$ to the stalks $\mathcal{F}_x$.}
	
	\begin{uproperty}
		Let $\mathcal{F}$ be a presheaf over $X$ with associated sheaf $\mathcal{F}^\ast$. For any sheaf $\mathcal{G}$ over $X$ and any morphism $\rho:\mathcal{F}\rightarrow\mathcal{G}$ there exists a unique morphism $\sigma:\mathcal{F}^\ast\rightarrow\mathcal{G}$ such that $\rho = \sigma\circ\varphi$ where $\varphi$ is the canonical morphism $\mathcal{F}\rightarrow\mathcal{F}^\ast$.
	\end{uproperty}
	
	\begin{property}
		Let $\mathcal{F}$ be a presheaf over $X$ with associated sheaf $\mathcal{F}^\ast$. The morphism $\varphi:\mathcal{F}\rightarrow\mathcal{F}^\ast$ induces an isomorphism $\varphi_x:\mathcal{F}_x\rightarrow\mathcal{F}^\ast_x$ for all $x\in X$.
	\end{property}
	\begin{property}
		Let $\mathcal{F}$ be a sheaf over $X$ with associated sheaf $\mathcal{F}^\ast$. The morphism $\varphi:\mathcal{F}\rightarrow\mathcal{F}^\ast$ is an isomorphism.
	\end{property}
	
	\begin{construct}[Alternative using \'etal\'e spaces]\label{sheaf:etale_construction}
		Let $\mathcal{F}$ be a presheaf over $X$. Consider the disjoint union
		\begin{equation}
			\overline{\mathcal{F}} = \bigsqcup_{x\in X}\mathcal{F}_x
		\end{equation}
		Define for every local section $s\in\mathcal{F}(U)$ a function $\overline{s}:U\rightarrow\mathcal{F}_x:x\mapsto s_x$ The union $\overline{\mathcal{F}}$ can be turned into an \'etal\'e space\footnote{See definition \ref{topology:etale_space}.} over $X$ by equipping it with the topology with basis
		\begin{equation}
			\{\overline{s}(U)\ |\ U\text{ open in }X, s\in\mathcal{F}(U)\}
		\end{equation}
		The projection map $\pi$ is given by $\pi:s_x\in\mathcal{F}_x\mapsto x$. The sheafification $\mathcal{F}^\ast$ is then given by the sheaf of sections of $\overline{\mathcal{F}}$.
	\end{construct}
	
	\begin{example}[Constant sheaf]
		Consider the constant presheaf over $X$ with target $S$ (see example \ref{sheaf:constant_presheaf}). The constant sheaf, denoted by $S_X$, is defined as the associated sheaf of this presheaf. The stalks over every point $x\in X$ can be identified with $S$. The continuous sections $S_X(U)$ are the locally constant functions $f:U\rightarrow S$.
	\end{example}
	
\section{Resolutions and cohomology}

	\newdef{Global sections functor}{\index{section}
		Let $X$ be a topological space. The global sections functor $\Gamma(X, -)$ is defined as the functor $\Gamma(X, -):\text{Sh}(X)\rightarrow\text{Set}:\mathcal{F}\rightarrow\mathcal{F}(X)$.
	}
	\begin{property}
		The global sections functor is only left exact.
	\end{property}
	
\section{Ringed spaces}

	\newdef{Ringed space}{\index{ringed space}
		A ringed space is a topological space $X$ equipped with a sheaf of rings $\mathcal{O}_X$.
	}
	\newdef{Locally ringed space}{
		A ringed space $(X, \mathcal{O}_X)$ is said to be locally ringed if the stalk over every point $x\in X$ is a local ring\footnote{See definition \ref{algebra:local_ring}.}.
	}
